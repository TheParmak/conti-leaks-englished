[15.11.21 14:41:48] biggie:		123
[16.11.21 08:09:02] biggie:		123
[16.11.21 08:09:20] stevie:		123
[16.11.21 08:09:23] biggie:		давай так
[16.11.21 08:09:27] stevie:		Ага)
[16.11.21 08:09:54] stevie:		@rocco попроси, он сбросит пароль E2e тебе.
[16.11.21 08:11:21] stevie:		Тебя shulman вчера отправил ко мне. Это все про мост.  Ситуация в кратце: 
```
 когда агарик соединяется с мостом, имя-пароль которые он использует для логина на мост, могут быть любыми
они нужны исключительно для идентификации этого бота
и их нужно протащить по цепочке до базы данных
сделать это непросто
для PAM - это кусок подсистемы аутентификации Linux
ppp - это демон соединений точка-точка
он пришел из эпохи модемных соединений и до сих пор в строю
только теперь он обслуживает VPN-соединения l2tp
цепочка такая
агарик подымает соединение l2tp на мост
на мосту стартует демон ppp
демон ppp получает логин-пароль соединяющейся стороны (агарика) и дальше ему необходимо узнать, валидный ли это юзер
для этого он дергает PAM
мы встроили в PAM свой модуль, который всегда дает ответ "да это валидный юзер", берет эти логин и пароль и сует в хранилище, передавая через механизм межпроцессных соединений UNIX (конкретно, это UNIX-сокет)
PAM отвечает PPP - да, это валидный пользак
PPP завершает установку соединения
проблема в том что тут race condition
откуда-то берутся таймауты 2 штуки ровно в 20 секунд, и за это время инициирующая соединение сторона устает ждать
соответственно соединение не устанавливается
локализовали пока что до того, что если аутентификацию отключить то все работает
```
[16.11.21 08:13:00] biggie:		а у версии гуса аутентификация отключена?
[16.11.21 08:13:41] biggie:		просто там агарики вроде подключаются...
[16.11.21 08:15:39] stevie:		У тебя есть навык c pppd? Я бы хотел попросить тебя поискать легальный путь решения этой проблемы  через настройки pppd, пока я копаюсь в его(pppd) коде.  У версии гуса нет. Он так же через пам идет. Есть артефакт на мастере, можно глянуть.  Да. Соединение есть, после того как оно проходит идет аутентификация РАМ, она проходит, после возникают какие то задержки и ... все....на этом...разрыв соединения
[16.11.21 08:16:30] stevie:		Если у тебя тоже не выйдет, будем что-то придумывать, чтобы обойти эту проблему
[16.11.21 08:17:08] biggie:		окей, а на серваке пароль не поменялся?
[16.11.21 08:17:20] stevie:		сменил. Ща. сек
[16.11.21 08:17:55] stevie:		```
194.62.42.137
Логин для Linux: root

Пароль: 34fhjdgEN3rE5ff
```
[16.11.21 08:18:30] stevie:		Как чего настраивается рассказать?
[16.11.21 08:18:53] stevie:		Ну или спрашивай по ходу.
[16.11.21 08:19:19] biggie:		поспрашиваю
[16.11.21 08:58:08] biggie:		а какой psk агарику писать?
[16.11.21 08:58:27] stevie:		123
[20.12.21 08:37:08] stevie:		В пароле буква z
[20.12.21 08:37:15] stevie:		в конце
[20.12.21 08:37:28] stevie:		добавилась
[20.12.21 08:37:31] biggie:		да я понел
