2020-10-07T12:21:20 skywalker -> flip
Привет. А ты с шелкодом не работал?

2020-10-07T12:22:09 flip -> skywalker
Привет. Немного работал. Подзабыл малость, нужно вспомнить. :)

2020-10-07T12:22:49 skywalker -> flip
Опишу проблему, вдруг подскажешь

2020-10-07T12:23:19 skywalker -> flip
В двух словах если, то пользуюсь msfvenom для генерации набора команд, когда созраняю и запускаю как elf файл, то все ок, как делаю через указать на массив, через консольное приложение, то  почему то ошибка при вызове.

Пользуюсь https://github.com/DimopoulosElias/SimpleShellcodeInjector

2020-10-07T12:23:51 skywalker -> flip
По ссылке версия для win, делаю на линухе через массив

2020-10-07T12:25:25 flip -> skywalker
Сейчас гляну.

2020-10-07T12:26:19 skywalker -> flip
Ок

2020-10-07T12:35:50 flip -> skywalker
1. Ты создал elf с неким кодом.

2020-10-07T12:36:09 flip -> skywalker
2.  Как ты выдернул код который засунул в массив?

2020-10-07T12:45:06 flip -> skywalker
https://github.com/UserExistsError/DllLoaderShellcode.git

2020-10-07T12:45:33 flip -> skywalker
Вот тут все по шагам было.

2020-10-07T12:47:00 flip -> skywalker
Загрузчик dll в виде shellcode, extactor этого шел кода, ну и тестовая либуха и собственно тест для инъекции.

2020-10-07T12:49:32 skywalker -> flip
1.yes

2020-10-07T12:49:50 skywalker -> flip
2.msfvenom выводит в массив си

2020-10-07T12:53:06 flip -> skywalker
Он не просто этот elf в массив переделывает? Он может хочет не elf, а bin с чисто text сегментом?

2020-10-07T12:53:39 flip -> skywalker
Посмотри первые байты совпадают с заголовком elf

2020-10-07T13:00:40 flip -> skywalker
Был такой формат в dos как com. Это был просто кусок кода, с относительными переходами. Без всяких заголовков. Вот shellcode нечто подобное. Нужно из elf выпилить нужный кусок  text сегмента с помощью, objdump и вот его и нужно запускать через массив.

2020-10-07T13:02:02 flip -> skywalker
Точнее objcopy

2020-10-07T13:45:35 skywalker -> flip
> Он не просто этот elf в массив переделывает? Он может хочет не elf, а bin с чисто text сегментом?
Не знаю. Везде в инете где смотрел чисто ассемблер не байтики были

> Посмотри первые байты совпадают с заголовком elf
Да совпадают

> Точнее objcopy
Надо посмотреть как. Я не помню.

2020-10-07T13:51:25 flip -> skywalker
objcopy --output-format=binary  --only-section=.text a.elf shellcode.bin как то так

2020-10-07T13:51:58 skywalker -> flip
Ок. Попробую

2020-10-08T10:00:24 flip -> skywalker
Привет. Ну как получилось?

2020-10-08T10:03:37 skywalker -> flip
Привет. Ну как получилось?

2020-10-08T15:05:45 flip -> skywalker

» [13:00:23] <flip> Привет. Ну как получилось?

2020-10-08T15:19:42 skywalker -> flip
Привет

2020-10-08T15:19:51 skywalker -> flip
Чёт отр поламался

2020-10-08T15:20:42 skywalker -> flip
Да. Получилось, только совсем по другому.... Секцию text обдждамп не нашел

2020-10-08T15:21:39 flip -> skywalker
Ага ясно. :)

2020-10-08T15:21:49 flip -> skywalker
А как сделал?

2020-10-08T15:24:35 skywalker -> flip
msfvenom -p windows/messagebox -f exe

2020-10-08T15:25:00 flip -> skywalker
msfvenom - я с этим не знаком. :)

2020-10-08T15:25:38 skywalker -> flip
Да я то-же. Часть какого то большого фреймворка для тестеров ИБ

